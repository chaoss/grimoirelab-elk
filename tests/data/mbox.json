[{
    "backend_name": "MBox",
    "backend_version": "0.8.1",
    "category": "message",
    "data": {
        "Date": "Wed, 01 Dec 2010 14:26:40 +0100",
        "From": "goran at domain.com ( G\u00f6ran Lastname )",
        "Message-ID": "<4CF64D10.9020206@domain.com>",
        "Subject": "[List-name] Protocol Buffers anyone?",
        "body": {
            "plain": "Hi!\n\nA message in English, with a signature with a different encoding.\n\nregards, G?ran\n\n\n"
        },
        "unixfrom": "goran at domain.com  Wed Dec  1 08:26:40 2010"
    },
    "origin": "http://example.com/",
    "perceval_version": "0.9.10",
    "tag": "http://example.com/",
    "timestamp": 1518165519.417628,
    "updated_on": 1291210000.0,
    "uuid": "86315b479b4debe320b59c881c1e375216cbf336"
},{
    "backend_name": "MBox",
    "backend_version": "0.8.1",
    "category": "message",
    "data": {
        "Date": "Wed, 01 Dec 2010 14:26:40 +0100",
        "From": "goran at domain.com ( G\u00f6ran Lastname )",
        "Message-ID": "<4CF64D10.9020206@domain.com>",
        "Subject": "[List-name] Protocol Buffers anyone?",
        "body": {
            "plain": "Hi!\n\nA message in English, with a signature with a different encoding.\n\nregards, G?ran\n\n\n"
        },
        "unixfrom": "goran at domain.com  Wed Dec  1 08:26:40 2010"
    },
    "origin": "http://example.com/",
    "perceval_version": "0.9.10",
    "tag": "http://example.com/",
    "timestamp": 1518165519.426099,
    "updated_on": 1291210000.0,
    "uuid": "86315b479b4debe320b59c881c1e375216cbf333"
},{
    "backend_name": "MBox",
    "backend_version": "0.8.1",
    "category": "message",
    "data": {
        "Cc": null,
        "Content-Transfer-Encoding": "7bit",
        "Content-Type": "text/plain; format=flowed; charset=\"iso-8859-1\";\n\treply-type=original",
        "Date": "Wed, 22 Sep 2004 02:03:40 -0700",
        "Delivered-To": "desktop-devel-list@gnome.org",
        "From": "\"Eugenia Loli-Queru\" <eloli@hotmail.com>",
        "List-Archive": "</archives>",
        "List-Help": "<mailto:desktop-devel-list-request@gnome.org?subject=help>",
        "List-Id": "GNOME Desktop Development List <desktop-devel-list.gnome.org>",
        "List-Post": "<mailto:desktop-devel-list@gnome.org>",
        "List-Subscribe": "<http://mail.gnome.org/mailman/listinfo/desktop-devel-list>,\n\t<mailto:desktop-devel-list-request@gnome.org?subject=subscribe>",
        "List-Unsubscribe": "<http://mail.gnome.org/mailman/listinfo/desktop-devel-list>,\n\t<mailto:desktop-devel-list-request@gnome.org?subject=unsubscribe>",
        "MIME-Version": "1.0",
        "Message-ID": "<BAY12-DAV6Dhd2stb2e0000c0ce@hotmail.com>",
        "Precedence": "list",
        "Received": "from 67.169.166.201 by bay12-dav6.bay12.hotmail.com with DAV;\n\tWed, 22 Sep 2004 09:03:47 +0000",
        "Return-Path": "<eloli@hotmail.com>",
        "Subject": "Re: Revisiting the Gnome Bindings",
        "To": "<language-bindings@gnome.org>, <desktop-devel-list@gnome.org>",
        "X-BeenThere": "desktop-devel-list@gnome.org",
        "X-List-Received-Date": "Wed, 22 Sep 2004 09:05:28 -0000",
        "X-MSMail-Priority": "Normal",
        "X-Mailer": "Microsoft Outlook Express 6.00.2900.2180",
        "X-Mailman-Version": "2.1.5",
        "X-MimeOLE": "Produced By Microsoft MimeOLE V6.00.2900.2180",
        "X-Original-To": "desktop-devel-list@gnome.org",
        "X-OriginalArrivalTime": "22 Sep 2004 09:04:00.0449 (UTC)\n\tFILETIME=[19A30310:01C4A083]",
        "X-Originating-Email": "[eloli@hotmail.com]",
        "X-Originating-IP": "[67.169.166.201]",
        "X-Priority": "3",
        "X-Sender": "eloli@hotmail.com",
        "X-Virus-Scanned": "by amavisd-new at gnome.org",
        "body": {
            "plain": ">I don't think it's fair to blame the Foundation [...]\n>of packaging since it's really not (just) a case [...]\n>marketing.\n\nNo matter what is really to blame, it ultimately [...]\n\n[...]\n\nRgds,\nEugenia\n"
        },
        "unixfrom": "eloli@hotmail.com  Wed Sep 22 05:05:28 2004"
    },
    "origin": "http://example.com/",
    "perceval_version": "0.9.10",
    "tag": "http://example.com/",
    "timestamp": 1518165519.439037,
    "updated_on": 1095843820.0,
    "uuid": "bd0185317b013beb21ad3ea04635de3db72496ad"
},{
    "backend_name": "MBox",
    "backend_version": "0.8.1",
    "category": "message",
    "data": {
        "Cc": "desktop-devel-list@gnome.org, \"Nikolay V. Shmyrev\" <nshmyrev@yandex.ru>,\n\tBrian Nitz <Brian.Nitz@sun.com>, Bastien Nocera <hadess@hadess.net>",
        "Content-Transfer-Encoding": "quoted-printable",
        "Content-Type": "text/plain; charset=utf-8",
        "Date": "Mon, 17 Mar 2008 10:35:05 +0100",
        "Delivered-To": "desktop-devel-list@gnome.org",
        "From": "danilo@gnome.org (Danilo  \u0160egan )",
        "In-Reply-To": "<1205676169.6819.27.camel@user-computer.NETWORK> (Simos\n\tXenitellis's message of \"Sun\\, 16 Mar 2008 14\\:02\\:49 +0000\")",
        "List-Archive": "</archives/desktop-devel-list>",
        "List-Help": "<mailto:desktop-devel-list-request@gnome.org?subject=help>",
        "List-Id": "GNOME Desktop Development List <desktop-devel-list.gnome.org>",
        "List-Post": "<mailto:desktop-devel-list@gnome.org>",
        "List-Subscribe": "<http://mail.gnome.org/mailman/listinfo/desktop-devel-list>,\n\t<mailto:desktop-devel-list-request@gnome.org?subject=subscribe>",
        "List-Unsubscribe": "<http://mail.gnome.org/mailman/listinfo/desktop-devel-list>,\n\t<mailto:desktop-devel-list-request@gnome.org?subject=unsubscribe>",
        "MIME-Version": "1.0",
        "Mail-Followup-To": "Simos Xenitellis <simos.lists@googlemail.com>,\n\tBastien Nocera <hadess@hadess.net>,\n\t\"Nikolay V. Shmyrev\" <nshmyrev@yandex.ru>,\n\tBrian Nitz <Brian.Nitz@sun.com>, desktop-devel-list@gnome.org",
        "Message-ID": "<87iqzlofqu.fsf@avet.kvota.net>",
        "Precedence": "list",
        "Received": "by adsl-236-193.eunet.yu (Postfix, from userid 1000)\n\tid 417517C13A; Mon, 17 Mar 2008 10:35:04 +0100 (CET)",
        "References": "<1204225143.12769.9.camel@localhost.localdomain>\n\t<1204236062.14337.5.camel@localhost.localdomain>",
        "Return-Path": "<danilo@adsl-236-193.eunet.yu>",
        "Subject": "Re: Low memory hacks",
        "To": "Simos Xenitellis <simos.lists@googlemail.com>",
        "User-Agent": "Gnus/5.11 (Gnus v5.11) Emacs/22.1 (gnu/linux)",
        "X-Amavis-OS-Fingerprint": "Linux 2.6 (newer, 3) (NAT!) (up: 150 hrs), (distance\n\t27, link: unknown-1460), [213.198.236.193]",
        "X-BeenThere": "desktop-devel-list@gnome.org",
        "X-List-Received-Date": "Mon, 17 Mar 2008 09:35:25 -0000",
        "X-Mailman-Version": "2.1.8",
        "X-Original-To": "desktop-devel-list@gnome.org",
        "X-Spam-Flag": "NO",
        "X-Spam-Level": null,
        "X-Spam-Score": "-0.76",
        "X-Spam-Status": "No, score=-0.76 tagged_above=-999 required=2 tests=[AWL=-1.427,\n\tBAYES_00=-2.599, DNS_FROM_RFC_ABUSE=0.2,\n\tHELO_DYNAMIC_DHCP=3.066]",
        "X-Virus-Scanned": "by amavisd-new at gnome.org",
        "body": {
            "plain": "Hi Simos,\n\nYesterday at 15:02, Simos Xenitellis wrote:\n\n>> I'll like to see some real numbers on the memory usage instead of\n>> numbers being thrown around.\n>\n> In Ubuntu 7.10, the PO files for en_GB are\n> $ du\n> -h /usr/share/locale/en_GB/LC_MESSAGES /usr/share/locale-langpack/en_GB/LC_MESSAGES/\n> 2.3M    /usr/share/locale/en_GB/LC_MESSAGES\n> 17M     /usr/share/locale-langpack/en_GB/LC_MESSAGES/\n> $_ \n>\n> In Ubuntu 8.04 (alpha 6), the PO files for en_GB are\n> $ du\n> -h /usr/share/locale/en_GB/LC_MESSAGES /usr/share/locale-langpack/en_GB/LC_MESSAGES/\n> 84K    /usr/share/locale/en_GB/LC_MESSAGES\n> 2.2M     /usr/share/locale-langpack/en_GB/LC_MESSAGES/\n> $_ \n>\n> What I am missing here is that I do not know when/how Ubuntu adds this\n> functionality. It would benefit other distros as well. Did Debian\n> introduce with feature? Danilo, any links?\n\nI am not handling Ubuntu packaging stuff\u2014it'd be worth checking with\nUbuntu guys instead.  Martin Pitt is probably the right person to ask\nabout it, but looking at the language pack sourcepackage should give a\nclue as well.\n\nHowever, I'd note that en_GB is not really the right locale to do\nthe metrics on.\n\n>>>From the 2.3M + 17M MO files in Ubuntu 7.10, a typical GNOME session\n> loads up a subset of the MO files,\n>\n> # lsof | grep \\.mo\\$ | awk '{print $7,$9}' | sort -n | uniq\n>\n> At this moment, my 7.10 is a bit messed up (I have en_GB.UTF-8 but most\n> apps have en_US?!?). The figures for 8.04 with el_GR should be\n> comparative of what you get now with 7.10 and en_GB:\n\nThey wouldn't be. A majority of el_GR probably uses two-byte UTF-8\nsequences, while en_GB would use a majority of single byte UTF-8\nsequences (i.e. ASCII).\n\n> # lsof | grep \\.mo\\$ | awk '{print $7,$9}' | sort -n | uniq | awk\n> '{printf \"%d+\",$1}' > /tmp/bc_sums\n>\n> Using \"bc\" with /tmp/bc_sums gives the figure\n> 3.6M (3624412) for a standard session. This figure is a bit\n> conservative, because en_GB probably did more work than el.\n>\n> With Ubuntu 8.04 (alpha6) and en_GB, the figure for the MO files is\n> less than 600K (585375).\n> Bastien, could you provide the proper figure for your system?\n>\n> That is a saving of at least 3M in memory.\n\nAs Bastien explained, mmap() doesn't read the entire file into memory,\nbut only reads it as needed.\n\n> The stripping of \"unneeded\" messages is good, and should happen at the\n> package generation level (not in GNOME, or when creating tarballs). \n\nTechnically, I've opposed introducing this in intltool because of a\none incompatible difference:\n\n  current gettext(\"Something\") != such gettext(\"Something\")\n\ni.e. if \"Something\" was (un)translated as \"Something\" in the MO file,\ngettext would return a static pointer with the string \"Something\".  If\nit was untranslated, it would return the passed pointer.\n\nThat can and was used to detect whether there is a translation in some\nprograms (I've seen it done), so, until gains are proven to be big\nenough to warrant breaking a few programs in strange ways, I wouldn't\ndo it on the packaging/build time.\n\nOf course, providing numbers to show what the gains are would help\nmake the decision.\n\nCheers,\nDanilo\n"
        },
        "unixfrom": "danilo@adsl-236-193.eunet.yu  Mon Mar 17 09:35:25 2008"
    },
    "origin": "http://example.com/",
    "perceval_version": "0.9.10",
    "tag": "http://example.com/",
    "timestamp": 1518165519.441833,
    "updated_on": 1205746505.0,
    "uuid": "51535703010a3e63d5272202942c283394cdebca"
},{
    "backend_name": "MBox",
    "backend_version": "0.8.1",
    "category": "message",
    "data": {
        "Date": "Mon, 7 Nov 2016 19:44:27 +0100",
        "From": "luc\udcedacharlie at wellsfargo.com (=?UTF-8?Q?Luc=eda_Charlie?=)",
        "Message-ID": "<4fce8064d819e07fd80267aaecaf30ef@www.platvoet.de>",
        "Subject": "[ovs-dev]  Remittance Advice",
        "body": {
            "plain": "Hello,\n\nIn response to the payment request we received from your client, we wish to notify you that payment has now been processed to your bank details on file through our intermediary bank.\n\nWire Confirmation No: BOA2019338564NBC.\nTransaction Status: Completed.\nFurther Details: On Payment Receipt\n\nAttached to this email is the secure remittance advice. To access the receipt and further details relating to this transaction.\n\nYou will be required to download and authenticate your email client on the Microsoft Secure File Access attached for security purposes.\n\nIf you are unable to view the file, do not hesitate to contact me.\n\nRegards\nLuc?a Charlie\nAccounts Payable\n"
        },
        "unixfrom": "luc\u00edacharlie at wellsfargo.com  Mon Nov  7 18:44:27 2016"
    },
    "origin": "http://example.com/",
    "perceval_version": "0.9.10",
    "tag": "http://example.com/",
    "timestamp": 1518165519.444045,
    "updated_on": 1478544267.0,
    "uuid": "b25134a09996f33e94b2e191a2f9f379b11168ac"
},{
    "backend_name": "MBox",
    "backend_version": "0.8.1",
    "category": "message",
    "data": {
        "Content-Type": "multipart/alternative;\n\tboundary=\"----=_NextPart_000_0199_01CA6348.55FBC940\"",
        "Content-language": "en-us",
        "Date": "Thu, 12 Nov 2009 03:29:24 +0100",
        "Delivered-To": "esl-dev@eclipse.org",
        "From": "\"yves (yingmin) yang\" <yves.yang@example.com>",
        "List-Archive": "<https://dev.eclipse.org/mailman/private/esl-dev>",
        "List-Help": "<mailto:esl-dev-request@eclipse.org?subject=help>",
        "List-Id": "Eclipse Tools for Silverlight Development team <esl-dev.eclipse.org>",
        "List-Post": "<mailto:esl-dev@eclipse.org>",
        "List-Subscribe": "<https://dev.eclipse.org/mailman/listinfo/esl-dev>,\n\t<mailto:esl-dev-request@eclipse.org?subject=subscribe>",
        "List-Unsubscribe": "<https://dev.eclipse.org/mailman/listinfo/esl-dev>,\n\t<mailto:esl-dev-request@eclipse.org?subject=unsubscribe>",
        "MIME-Version": "1.0",
        "Message-ID": "<019801ca633f$f4376140$dca623c0$@yang@example.com>",
        "Precedence": "list",
        "Reply-To": "Eclipse Tools for Silverlight Development team <esl-dev@eclipse.org>",
        "Return-Path": "<yves.yang@example.org>",
        "Subject": "[esl-dev] Committer vote for Chuwei Huang has concluded successfully",
        "Thread-Index": "AcpjP/LglPpfCKgGQKS3Gc5CAsQpug==",
        "To": "<esl-dev@eclipse.org>",
        "X-BeenThere": "esl-dev@eclipse.org",
        "X-List-Received-Date": "Thu, 12 Nov 2009 02:29:21 -0000",
        "X-Mailer": "Microsoft Office Outlook 12.0",
        "X-Mailman-Version": "2.1.5",
        "X-Original-To": "esl-dev@eclipse.org",
        "body": {
            "html": "<html xmlns:v=\"urn:schemas-microsoft-com:vml\" xmlns:o=\"urn:schemas-microsoft-com:office:office\" xmlns:w=\"urn:schemas-microsoft-com:office:word\" xmlns:m=\"http://schemas.microsoft.com/office/2004/12/omml\" xmlns=\"http://www.w3.org/TR/REC-html40\">\n\n<head>\n<META HTTP-EQUIV=\"Content-Type\" CONTENT=\"text/html; charset=us-ascii\">\n<meta name=Generator content=\"Microsoft Word 12 (filtered medium)\">\n<style>\n<!--\n /* Font Definitions */\n @font-face\n\t{font-family:SimSun;\n\tpanose-1:2 1 6 0 3 1 1 1 1 1;}\n@font-face\n\t{font-family:\"Cambria Math\";\n\tpanose-1:2 4 5 3 5 4 6 3 2 4;}\n@font-face\n\t{font-family:Calibri;\n\tpanose-1:2 15 5 2 2 2 4 3 2 4;}\n@font-face\n\t{font-family:\"\\@SimSun\";\n\tpanose-1:2 1 6 0 3 1 1 1 1 1;}\n@font-face\n\t{font-family:Consolas;\n\tpanose-1:2 11 6 9 2 2 4 3 2 4;}\n /* Style Definitions */\n p.MsoNormal, li.MsoNormal, div.MsoNormal\n\t{margin:0in;\n\tmargin-bottom:.0001pt;\n\tfont-size:11.0pt;\n\tfont-family:\"Calibri\",\"sans-serif\";}\na:link, span.MsoHyperlink\n\t{mso-style-priority:99;\n\tcolor:blue;\n\ttext-decoration:underline;}\na:visited, span.MsoHyperlinkFollowed\n\t{mso-style-priority:99;\n\tcolor:purple;\n\ttext-decoration:underline;}\np.MsoPlainText, li.MsoPlainText, div.MsoPlainText\n\t{mso-style-priority:99;\n\tmso-style-link:\"Plain Text Char\";\n\tmargin:0in;\n\tmargin-bottom:.0001pt;\n\tfont-size:10.5pt;\n\tfont-family:Consolas;}\nspan.EmailStyle17\n\t{mso-style-type:personal-compose;\n\tfont-family:\"Calibri\",\"sans-serif\";\n\tcolor:windowtext;}\nspan.PlainTextChar\n\t{mso-style-name:\"Plain Text Char\";\n\tmso-style-priority:99;\n\tmso-style-link:\"Plain Text\";\n\tfont-family:Consolas;}\n.MsoChpDefault\n\t{mso-style-type:export-only;}\n@page Section1\n\t{size:8.5in 11.0in;\n\tmargin:1.0in 1.0in 1.0in 1.0in;}\ndiv.Section1\n\t{page:Section1;}\n-->\n</style>\n<!--[if gte mso 9]><xml>\n <o:shapedefaults v:ext=\"edit\" spidmax=\"1026\" />\n</xml><![endif]--><!--[if gte mso 9]><xml>\n <o:shapelayout v:ext=\"edit\">\n  <o:idmap v:ext=\"edit\" data=\"1\" />\n </o:shapelayout></xml><![endif]-->\n</head>\n\n<body lang=EN-US link=blue vlink=purple>\n\n<div class=Section1>\n\n<p class=MsoPlainText>technology.esl Committers,<o:p></o:p></p>\n\n<p class=MsoPlainText>This automatically generated message marks the successful\ncompletion of voting for Chuwei Huang to receive full Committer status on the\ntechnology.esl project. The next step is for the PMC to approve this vote,\nfollowed by the EMO processing the paperwork and provisioning the account.<o:p></o:p></p>\n\n<p class=MsoPlainText><o:p>&nbsp;</o:p></p>\n\n<p class=MsoPlainText>Vote summary: 4/0/0 with 0 not voting<o:p></o:p></p>\n\n<p class=MsoPlainText>&nbsp; +1&nbsp; Thomas Guiu<o:p></o:p></p>\n\n<p class=MsoPlainText>&nbsp; +1&nbsp; Jin Liu<o:p></o:p></p>\n\n<p class=MsoPlainText>&nbsp; +1&nbsp; Yves YANG<o:p></o:p></p>\n\n<p class=MsoPlainText>&nbsp; +1&nbsp; Bo Zhou<o:p></o:p></p>\n\n<p class=MsoPlainText><o:p>&nbsp;</o:p></p>\n\n<p class=MsoPlainText>If you have any questions, please do not hesitate to\ncontact your project lead, PMC member, or the EMO &lt;emo@example.org&gt;<o:p></o:p></p>\n\n<p class=MsoPlainText><o:p>&nbsp;</o:p></p>\n\n<p class=MsoNormal><o:p>&nbsp;</o:p></p>\n\n</div>\n\n</body>\n\n</html>\n",
            "plain": "technology.esl Committers,\n\nThis automatically generated message marks the successful completion of\nvoting for Chuwei Huang to receive full Committer status on the\ntechnology.esl project. The next step is for the PMC to approve this vote,\nfollowed by the EMO processing the paperwork and provisioning the account.\n\n\n\nVote summary: 4/0/0 with 0 not voting\n\n  +1  Thomas Guiu\n\n  +1  Jin Liu\n\n  +1  Yves YANG\n\n  +1  Bo Zhou\n\n\n\nIf you have any questions, please do not hesitate to contact your project\nlead, PMC member, or the EMO <emo@example.org>\n\n\n\n\n\n"
        },
        "unixfrom": "yves.yang@example.org  Wed Nov 11 21:29:20 2009"
    },
    "origin": "http://example.com/",
    "perceval_version": "0.9.10",
    "tag": "http://example.com/",
    "timestamp": 1518165519.448305,
    "updated_on": 1257992964.0,
    "uuid": "302e314c07242bb4750351286862f49e758f3e17"
},{
    "backend_name": "MBox",
    "backend_version": "0.8.1",
    "category": "message",
    "data": {
        "Content-Type": "multipart/alternative;\n    boundary=\"----_=_NextPart_001_01C2C7EA.7C35AD84\"",
        "Date": "Wed, 29 Jan 2003 17:02:30 -0600",
        "Delivered-To": "platform-dev@eclipse.org",
        "Errors-To": "platform-dev-admin@eclipse.org",
        "From": "\"Nehren, Daniel\" <Daniel.Nehren@example.com>",
        "List-Archive": "<http://dev.eclipse.org/pipermail/platform-dev/>",
        "List-Help": "<mailto:platform-dev-request@eclipse.org?subject=help>",
        "List-Id": "Eclipse platform general developers list. <platform-dev.eclipse.org>",
        "List-Post": "<mailto:platform-dev@eclipse.org>",
        "List-Subscribe": "<http://dev.eclipse.org/mailman/listinfo/platform-dev>,\n    <mailto:platform-dev-request@eclipse.org?subject=subscribe>",
        "List-Unsubscribe": "<http://dev.eclipse.org/mailman/listinfo/platform-dev>,\n    <mailto:platform-dev-request@eclipse.org?subject=unsubscribe>",
        "MIME-Version": "1.0",
        "Message-ID": "<FB0C1D9DAED2D411BB990002A52C30EC03838593@example.com>",
        "Precedence": "bulk",
        "Reply-To": "platform-dev@eclipse.org",
        "Return-Path": "<Daniel.Nehren@example.com>",
        "Sender": "platform-dev-admin@eclipse.org",
        "Subject": "[platform-dev] Removing standard menus and toolbar icons",
        "To": "\"'platform-dev@eclipse.org'\" <platform-dev@eclipse.org>",
        "X-BeenThere": "platform-dev@eclipse.org",
        "X-Mailer": "Internet Mail Service (5.5.2655.55)",
        "X-Mailman-Version": "2.0.13",
        "body": {
            "html": "<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 3.2//EN\">\n<HTML>\n<HEAD>\n<META HTTP-EQUIV=\"Content-Type\" CONTENT=\"text/html; charset=us-ascii\">\n<META NAME=\"Generator\" CONTENT=\"MS Exchange Server version 5.5.2656.36\">\n<TITLE>Removing standard menus and toolbar icons</TITLE>\n</HEAD>\n<BODY>\n\n<P><FONT SIZE=2 FACE=\"Arial\">I am fairly new to eclipse. I am evaluating the use of eclipse for a generic UI framework that is not necessarily related to code generation.</FONT></P>\n\n<P><FONT SIZE=2 FACE=\"Arial\">Eclipse is very flexible and adding functionality seems straightforward. I can still use the project concept for what I need but there are things in the Workbench window that I don't want. For example the Open perspective icon, or some of the menus, like the Windows and project menu .</FONT></P>\n\n<P><FONT SIZE=2 FACE=\"Arial\">I understand that by using retargetable actions I can have my view taking over most of the actions, but I could not figure out how to block the core plug-in to put their own actions. In the workbench plug-in (org.eclipse.ui)&nbsp; I could not find where menus are defined and where actionsviews for all generic toolbars are defined.</FONT></P>\n\n<P><FONT SIZE=2 FACE=\"Arial\">How do I do this?</FONT>\n<BR><FONT SIZE=2 FACE=\"Arial\">Can this be done? </FONT>\n<BR><FONT SIZE=2 FACE=\"Arial\">Is anybody using eclipse as a generic UI framework? </FONT>\n</P>\n\n<P><FONT SIZE=2 FACE=\"Arial\">I appreciate any help.</FONT>\n</P>\n\n<P><FONT SIZE=2 FACE=\"Arial\">Thanks,</FONT>\n</P>\n\n<P><FONT SIZE=2 FACE=\"Arial\">Daniel Nehren</FONT>\n</P>\n\n</BODY>\n</HTML>",
            "plain": "I am fairly new to eclipse. I am evaluating the use of eclipse for a generic\nUI framework that is not necessarily related to code generation.\nEclipse is very flexible and adding functionality seems straightforward. I\ncan still use the project concept for what I need but there are things in\nthe Workbench window that I don't want. For example the Open perspective\nicon, or some of the menus, like the Windows and project menu .\n\nI understand that by using retargetable actions I can have my view taking\nover most of the actions, but I could not figure out how to block the core\nplug-in to put their own actions. In the workbench plug-in (org.eclipse.ui)\nI could not find where menus are defined and where actionsviews for all\ngeneric toolbars are defined.\n\nHow do I do this?\nCan this be done?\nIs anybody using eclipse as a generic UI framework?\n\nI appreciate any help.\n\nThanks,\n\nDaniel Nehren\n\n"
        },
        "unixfrom": "Daniel.Nehren@example.com  Wed Jan 29 17:30:32 2003"
    },
    "origin": "http://example.com/",
    "perceval_version": "0.9.10",
    "tag": "http://example.com/",
    "timestamp": 1518165519.450815,
    "updated_on": 1043881350.0,
    "uuid": "ddda42422c55d08d56c017a6f128fcd7447484ea"
},{
    "backend_name": "MBox",
    "backend_version": "0.8.1",
    "category": "message",
    "data": {
        "Date": "Wed, 01 Dec 2010 14:26:40 +0100",
        "From": "goran at domain.com ( G\u00f6ran Lastname )",
        "Message-ID": "<4CF64D10.9020206@domain.com>",
        "Subject": "[List-name] Protocol Buffers anyone?",
        "body": {
            "plain": "Hi!\n\nA message in English, with a signature with a different encoding.\n\nregards, G?ran\n\n\n"
        },
        "unixfrom": "goran at domain.com  Wed Dec  1 08:26:40 2010"
    },
    "origin": "http://example.com/",
    "perceval_version": "0.9.10",
    "tag": "http://example.com/",
    "timestamp": 1518165519.452574,
    "updated_on": 1291210000.0,
    "uuid": "86315b479b4debe320b59c881c1e375216cbf333"
},{
    "backend_name": "MBox",
    "backend_version": "0.8.1",
    "category": "message",
    "data": {
        "Date": "Thu, 15 Jan 2015 14:22:25 +0100",
        "From": "christian at example.org (Christian Aistleitner)",
        "In-Reply-To": "<CAKP=3WwxhP=nNqT5kJ+6ohUU-pgvRu+PkW=7ASLpiQguf7CKxg@example.org>",
        "Message-ID": "<20150115132225.GA22378@example.org>",
        "References": "<4ADDAFD4-A226-4F68-B02D-EDA5DE355104@wikimedia.org>\n        <CAE4f==fqAcbM+hg3ZrHM1Jv+d7W3hdU5HXvPNq2Q5ZdxvdgJ+Q@example.org>\n        <CAKP=3WyH=YfNyq5uspTo-n5txswQ6xfBd1WpfdYyxf+JK3YyRA@example.org>\n        <20150113220428.GA26586@example.org>\n        <CAKP=3WyQZFSu3W04s1QEJY2kkUa6aWXcfghpQMS0hRdp-Pz5Tg@example.org>\n        <CAHXK4BwCqapFeS6d3-7S665Fm8kGWxQBBM1w9VHm=vxiRpVRYA@example.org>\n        <CAKP=3WwxhP=nNqT5kJ+6ohUU-pgvRu+PkW=7ASLpiQguf7CKxg@example.org>",
        "Subject": "[Analytics] DNT, standards, and expectations",
        "body": {
            "plain": "Hi,\n\nOn Wed, Jan 14, 2015 at 12:07:57PM -0600, Aaron Halfaker wrote:\n> For example, not collecting usage data about certain sections of our\n> population (e.g. IE10 users where DNT is set by default) means that we\n> don't know if our software works for them.\n\nIf WMF's main form of QA was through automated usage data collection,\nyou'd have a point.\n\nBut actually, I think WMF is doing better than that.\n\n From my point of view, a central pillar in QA is \u201csoftware getting tested\u201d.\nThat's happening widely across WMF.\nBoth manually and automated.\nIt's great already and getting better every day.\n\nAnd for me the main QA ingredient is listening to feedback from the\nusers. Besides studies and dog-fooding, WMF's bugtracker is a\ntestament to that and contains reports that \u201c$X is not working on\nbrowser $Y\u201d or \u201c$X needs to also do $Z\u201d.\nAnd that's really great!\n\nTo me, user behaviour data collection is a way to support and assist\nthe above two. But it is not a requirement when trying to determine\n\u201cif our software works for them\u201d.\n\nUsers are sending us emails about issues, come to IRC to discuss\nissues, file a ticket, or they just tell someone.\nAll without having their usage data collected.\n\nI am convinced \u201cIE10 users that do not want to unset DNT\u201d are no\nexception to that.\n\nHave fun,\nChristian\n\n\nP.S.: I for one received bug reports from IE10 users. (But I do not\nknow whether or they used DNT.)\n\n\n\n-------------- next part --------------\nA non-text attachment was scrubbed...\nName: signature.asc\nType: application/pgp-signature\nSize: 490 bytes\nDesc: Digital signature\n"
        },
        "unixfrom": "christian at \u201cexample.org\u201d  Thu Jan 15 13:22:25 2015"
    },
    "origin": "http://example.com/",
    "perceval_version": "0.9.10",
    "tag": "http://example.com/",
    "timestamp": 1518165519.455236,
    "updated_on": 1421328145.0,
    "uuid": "ad3116ae93c0df50436f7c84bfc94000e990996c"
},{
    "backend_name": "MBox",
    "backend_version": "0.8.1",
    "category": "message",
    "data": {
        "Content-Type": "text/plain",
        "Date": "Sat, 24 Aug 2002 01:24:49 +0800",
        "Delivered-To": "platform-swt-dev@eclipse.org",
        "Errors-To": "platform-swt-dev-admin@eclipse.org",
        "From": "\"\udcc3\udc94\udcc2\udcac\udcc2\udcb4\udcc3\udc8f\" <yuancong@example.com>",
        "List-Archive": "<http://dev.eclipse.org/pipermail/platform-swt-dev/>",
        "List-Help": "<mailto:platform-swt-dev-request@eclipse.org?subject=help>",
        "List-Id": "Eclipse Platform SWT component developers list. <platform-swt-dev.eclipse.org>",
        "List-Post": "<mailto:platform-swt-dev@eclipse.org>",
        "List-Subscribe": "<http://dev.eclipse.org/mailman/listinfo/platform-swt-dev>,\n    <mailto:platform-swt-dev-request@eclipse.org?subject=subscribe>",
        "List-Unsubscribe": "<http://dev.eclipse.org/mailman/listinfo/platform-swt-dev>,\n    <mailto:platform-swt-dev-request@eclipse.org?subject=unsubscribe>",
        "Message-ID": "<20020823171132.541DB44147@example.com>",
        "Precedence": "bulk",
        "Reply-To": "platform-swt-dev@eclipse.org",
        "Return-Path": "<yuancong@example.com>",
        "Sender": "platform-swt-dev-admin@eclipse.org",
        "Subject": "[platform-swt-dev] How to refresh a control in another thread?",
        "To": "platform-swt-dev@eclipse.org",
        "X-BeenThere": "platform-swt-dev@eclipse.org",
        "X-Mailman-Version": "2.0.6",
        "X-Reply-To": "\"\udcc3\udc94\udcc2\udcac\udcc2\udcb4\udcc3\udc8f\" <yuancong@example.com>",
        "body": {
            "plain": "Hi,\n   In my application, the main thread creats the UI, and another thread collects\ndata that should be showed in UI.\n   I want to refresh the UI when collecting is completed, but when I called\nSomeControl.refreshUI(), I got a \"thread invalid access\" exception. I saw the\nsource of SWT, and found that Display check whether current thread is the thread\ncreated UI.\n   My qustion is, how can I refresh the control which created by main thread in\nanother thread?\n   Thanks\n"
        },
        "unixfrom": "yuancong@example.com  Fri Aug 23 13:11:33 2002"
    },
    "origin": "http://example.com/",
    "perceval_version": "0.9.10",
    "tag": "http://example.com/",
    "timestamp": 1518165519.457867,
    "updated_on": 1030123489.0,
    "uuid": "4e255acab6442424ecbf05cb0feb1eccb587f7de"
},{
    "backend_name": "MBox",
    "backend_version": "0.13.0",
    "category": "message",
    "classified_fields_filtered": null,
    "data": {
        "Authentication-Results": "spamd1-us-west.apache.org (amavisd-new);\n\tdkim=pass (2048-bit key) header.d=gmail.com",
        "Content-Transfer-Encoding": "quoted-printable",
        "Content-Type": "text/plain;\n\tcharset=utf-8",
        "DKIM-Signature": "v=1; a=rsa-sha256; c=relaxed/relaxed;\n        d=gmail.com; s=20161025;\n        h=from:content-transfer-encoding:mime-version:subject:date:references\n         :to:in-reply-to:message-id;\n        bh=iB9YyNok+thJWNNvcrLquI34ZWkery8etVRXFUbq7ss=;\n        b=krWYDy+sD/Yh6XQMONHDPdJK5KMsd3mNQL6+uillKeZYEJqzbQtBjWZCR1mkunyaLp\n         giMD0TefQx0KVzlpkZxKNCSS0uhZB0cY2f9V5TzGGKWZOzFS5Tw+glKRlzF6F08b3anO\n         JBRlpFBO3girnT6uOeMlugNsxqMbweketcJcyN1BjC5OGCpg7wha5ZY6dnfBGwROSVWH\n         8syJIPs+k0PCpjWyMM8YMO+1PNXtEKge8FccvooxtLO9Rttzh3AUMpdO3uW4gURWOyjU\n         V0ST6+dg8qZYRUSx3r1Tzdr0Opl6nq6EEMUPkcJrwAMZn71PVMfaYjvgVdMBr77fmQ3E\n         67AQ==",
        "Date": "Thu, 1 Aug 2019 09:55:45 +0300",
        "Delivered-To": "mailing list dev@kafka.apache.org",
        "From": "Levani Kokhreidze <levani.codes@gmail.com>",
        "In-Reply-To": "<5e62d2c2-cad5-c207-820a-37fca2fe169c@confluent.io>",
        "List-Help": "<mailto:dev-help@kafka.apache.org>",
        "List-Id": "<dev.kafka.apache.org>",
        "List-Post": "<mailto:dev@kafka.apache.org>",
        "List-Unsubscribe": "<mailto:dev-unsubscribe@kafka.apache.org>",
        "Mailing-List": "contact dev-help@kafka.apache.org; run by ezmlm",
        "Message-ID": "<F3C6ADC0-492D-442A-8A02-258361AD706C@gmail.com>",
        "Mime-Version": "1.0 (Mac OS X Mail 12.4 \\(3445.104.11\\))",
        "Precedence": "bulk",
        "Received": "from [10.29.0.28] ([178.162.192.10])\n        by smtp.gmail.com with ESMTPSA id x83sm79438957wmb.42.2019.07.31.23.55.46\n        for <dev@kafka.apache.org>\n        (version=TLS1_2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);\n        Wed, 31 Jul 2019 23:55:46 -0700 (PDT)",
        "Received-SPF": "Pass (mailfrom) identity=mailfrom; client-ip=2a00:1450:4864:20::436; helo=mail-wr1-x436.google.com; envelope-from=levani.codes@gmail.com; receiver=<UNKNOWN> ",
        "References": "<258921E7-3756-433B-89EA-4708B5720FC4@gmail.com>\n <CAFLS_9h+9RiagJVoPGxrzi4FFDjYK_eWUiHft5pSZL_eNFnYOw@mail.gmail.com>\n <535B831A-2071-44CC-A00B-F6E9972FCB29@gmail.com>\n <CAF7WS+oSLs_JFS6Pp0hS84yc4EoAiGDicnPjoGq_i1bpNZTq5A@mail.gmail.com>\n <CAHwHRrWmOge4y8sWANLxgbVkFiGo+veLrnU5AnX_ASD+wBo-BQ@mail.gmail.com>\n <7EA7789A-7372-4B33-B42C-8D17F099ED38@gmail.com>\n <CAHwHRrVZ2g6Krf3M3GeFwVJEn3+=ajpKVh07zh=2ip8tvSDdKA@mail.gmail.com>\n <5e62d2c2-cad5-c207-820a-37fca2fe169c@confluent.io>",
        "Reply-To": "dev@kafka.apache.org",
        "Return-Path": "<dev-return-106211-apmail-kafka-dev-archive=kafka.apache.org@kafka.apache.org>",
        "Subject": "Re: [VOTE] KIP-221: Enhance KStream with Connecting Topic Creation\n and Repartition Hint",
        "To": "dev@kafka.apache.org",
        "X-Gm-Message-State": "APjAAAUsOia8xj0WHUPnM7wW/iEJnqUmUcOxiOqfgUXU/72sEt6FGtDK\n\tDpVRKumW/bYwkfaqcD4HwOMAiVyq",
        "X-Google-DKIM-Signature": "v=1; a=rsa-sha256; c=relaxed/relaxed;\n        d=1e100.net; s=20161025;\n        h=x-gm-message-state:from:content-transfer-encoding:mime-version\n         :subject:date:references:to:in-reply-to:message-id;\n        bh=iB9YyNok+thJWNNvcrLquI34ZWkery8etVRXFUbq7ss=;\n        b=ZOIuqVxmRBbbyGYwmpFi0hO+744GzyrOcgkw/lVspH5j8VQ39+D/lvqKoxe8i25gKt\n         9L0BlKul1FdLSS2dp2pMa56Ckb6zda6zh3PMLt4JDwpFh9bBAC4lOC8kdAVyRPB9vBRh\n         ZgBm4770qasBt+H3bLnRXA/50jul7ODNjnThVxz8Sa7RhoSy66frNX2OZIBCHS/KuBZV\n         BzCkzeOVIe4uHC/3fduwO1warymhHk//LfsdnSl+vHcAjhYlRJ4ibmdac/k+v9zHoLI5\n         AxSwwlxV/NmpPM8IcKiIey6Nc0RXtyZgfxhGGwpJqADf03tntdkSTnujUG30G666znTC\n         k3kg==",
        "X-Google-Smtp-Source": "APXvYqykpvv3zMZBhb/EPJEa2dzJ6QkLk+hID2+JcVPkC25kdshDlXNAQHEciYFBiCc1oq+YXSExHQ==",
        "X-Mailer": "Apple Mail (2.3445.104.11)",
        "X-Original-To": "apmail-kafka-dev-archive@www.apache.org",
        "X-Received": "by 2002:adf:ce07:: with SMTP id p7mr58409146wrn.129.1564642547220;\n        Wed, 31 Jul 2019 23:55:47 -0700 (PDT)",
        "X-Spam-Flag": "NO",
        "X-Spam-Level": "***",
        "X-Spam-Score": "3.359",
        "X-Spam-Status": "No, score=3.359 tagged_above=-999 required=6.31\n\ttests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,\n\tDKIM_VALID_EF=-0.1, RCVD_IN_DNSWL_NONE=-0.0001, RCVD_IN_SBL_CSS=3.558,\n\tSPF_HELO_NONE=0.001, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]\n\tautolearn=disabled",
        "X-Virus-Scanned": "Debian amavisd-new at spamd1-us-west.apache.org",
        "body": {
            "plain": "Thank you all!\n\nThe vote has been open for ~8 days. KIP has three binding votes (Bill, Guozhang, Matthias) and one non-binding (Sophie) so the KIP vote passes!\nI\u2019ll mark KIP as accepted and start working on it as soon as possible!\n\nRegards,\nLevani\n\n> On Aug 1, 2019, at 2:37 AM, Matthias J. Sax <matthias@confluent.io> wrote:\n> \n> +1 (binding)\n> \n> On 7/31/19 8:36 AM, Guozhang Wang wrote:\n>> Thanks for the update! +1 (binding).\n>> \n>> On Tue, Jul 30, 2019 at 11:42 PM Levani Kokhreidze <levani.codes@gmail.com>\n>> wrote:\n>> \n>>> Hello Guozhang,\n>>> \n>>> Thanks for the feedback. That\u2019s an interesting point. To be honest, I\n>>> totally missed it. I wasn\u2019t aware that there\u2019s `groupBy` possibility on\n>>> KTable.\n>>> I don\u2019t see any reasons why not to add same functionality to KTable\n>>> interface.\n>>> \n>>> I\u2019ve updated the KIP:\n>>> https://cwiki.apache.org/confluence/display/KAFKA/KIP-221%3A+Enhance+DSL+with+Connecting+Topic+Creation+and+Repartition+Hint\n>>> <\n>>> https://cwiki.apache.org/confluence/display/KAFKA/KIP-221:+Enhance+DSL+with+Connecting+Topic+Creation+and+Repartition+Hint\n>>>> \n>>> Please let me know if you have any other questions and/or concerns.\n>>> \n>>> Regards,\n>>> Levani\n>>> \n>>>> On Jul 31, 2019, at 1:24 AM, Guozhang Wang <wangguoz@gmail.com> wrote:\n>>>> \n>>>> Hello Levani,\n>>>> \n>>>> Thanks for the KIP! Just got a quick question here about the scope: why\n>>> do\n>>>> we only want this for `KStream`, not `KTable#groupBy` for example?\n>>>> \n>>>> \n>>>> Guozhang\n>>>> \n>>>> \n>>>> On Tue, Jul 30, 2019 at 1:27 PM Bill Bejeck <bbejeck@gmail.com> wrote:\n>>>> \n>>>>> Thanks for the KIP Levani.\n>>>>> \n>>>>> +1 (binding)\n>>>>> \n>>>>> -Bill\n>>>>> \n>>>>> On Tue, Jul 30, 2019 at 3:37 PM Levani Kokhreidze <\n>>> levani.codes@gmail.com>\n>>>>> wrote:\n>>>>> \n>>>>>> Hello,\n>>>>>> \n>>>>>> Still waiting for feedback on this KIP.\n>>>>>> Please let me know if you have any concerns and/or questions.\n>>>>>> \n>>>>>> Regards,\n>>>>>> Levani\n>>>>>> \n>>>>>> \n>>>>>>> On Jul 24, 2019, at 8:20 PM, Sophie Blee-Goldman <sophie@confluent.io\n>>>> \n>>>>>> wrote:\n>>>>>>> \n>>>>>>> Looks good! Thanks Levani,\n>>>>>>> \n>>>>>>> +1 (non-binding)\n>>>>>>> \n>>>>>>> Sophie\n>>>>>>> \n>>>>>>> On Tue, Jul 23, 2019 at 2:16 PM Levani Kokhreidze <\n>>>>>> levani.codes@gmail.com>\n>>>>>>> wrote:\n>>>>>>> \n>>>>>>>> Hello,\n>>>>>>>> \n>>>>>>>> I\u2019d like to initialize voting on KIP-221:\n>>>>>>>> \n>>>>>> \n>>>>> \n>>> https://cwiki.apache.org/confluence/display/KAFKA/KIP-221%3A+Enhance+KStream+with+Connecting+Topic+Creation+and+Repartition+Hint\n>>>>>>>> <\n>>>>>>>> \n>>>>>> \n>>>>> \n>>> https://cwiki.apache.org/confluence/display/KAFKA/KIP-221:+Enhance+KStream+with+Connecting+Topic+Creation+and+Repartition+Hint\n>>>>>>>>> \n>>>>>>>> If there\u2019re any more concerns about the KIP, happy to discuss\n>>> further.\n>>>>>>>> \n>>>>>>>> Regards,\n>>>>>>>> Levani\n>>>>>> \n>>>>>> \n>>>>> \n>>>> \n>>>> \n>>>> --\n>>>> -- Guozhang\n>>> \n>>> \n>> \n> \n\n"
        },
        "unixfrom": "dev-return-106211-apmail-kafka-dev-archive=kafka.apache.org@kafka.apache.org  Thu Aug  1 06:56:03 2019"
    },
    "origin": "nitish_box",
    "perceval_version": "0.14.0",
    "search_fields": {
        "item_id": "<F3C6ADC0-492D-442A-8A02-258361AD706C@gmail.com>"
    },
    "tag": "nitish_box",
    "timestamp": 1588015221.709632,
    "updated_on": 1564642545.0,
    "uuid": "d8bfe375a7d747225374db018028bd8204ceced7"
},{
    "backend_name": "MBox",
    "backend_version": "0.13.0",
    "category": "message",
    "classified_fields_filtered": null,
    "data": {
        "Authentication-Results": "spamd3-us-west.apache.org (amavisd-new);\n\tdkim=pass (2048-bit key) header.d=gmail.com",
        "Content-Type": "multipart/alternative; boundary=\"0000000000006bd02c058f0f3fe1\"",
        "DKIM-Signature": "v=1; a=rsa-sha256; c=relaxed/relaxed;\n        d=gmail.com; s=20161025;\n        h=mime-version:references:in-reply-to:from:date:message-id:subject:to;\n        bh=DAAPs87ojVBn2vO36wr3JAVf+1iD7y/svMqlgYcDIrw=;\n        b=HSOgVVF1UZLL0gvShuuafgEoLocjpmswg9sIRUtX4DRdSC8fwz/R7n5njpTQ5v4sI9\n         hAve11K8zl4Pu9MYw2zceD3Y1PJ2KrESwo+uIXbvxfCAwS6bwh66aetU8N+5eJNrAkDU\n         GoVzAFOc0eD6xjRVZAOEsDYlGVVr6BvrdjJKq5nsGqL0u8fnWhkZHA2YtguOnn60bKc1\n         Aa6166G7QWipkYVBbYNnjA6OEbyS2G6nryB17Yqq7XUGRuJ0poeb11ooxebXNNe9LtFt\n         MUanYhk0sJRDPpB7DA3z4vMwoQWs6TWVEl5d+HCXrBMwvUPhP2Wy0tpv/3rztfbhbCQO\n         pQXA==",
        "Date": "Thu, 1 Aug 2019 10:42:03 -0400",
        "Delivered-To": "mailing list dev@kafka.apache.org",
        "From": "Bill Bejeck <bbejeck@gmail.com>",
        "In-Reply-To": "<CAAyirGuFmeFvBc=Bc5bEEaJHgayQSFm3tHy1wkqdEg+z1UYF=A@mail.gmail.com>",
        "List-Help": "<mailto:dev-help@kafka.apache.org>",
        "List-Id": "<dev.kafka.apache.org>",
        "List-Post": "<mailto:dev@kafka.apache.org>",
        "List-Unsubscribe": "<mailto:dev-unsubscribe@kafka.apache.org>",
        "MIME-Version": "1.0",
        "Mailing-List": "contact dev-help@kafka.apache.org; run by ezmlm",
        "Message-ID": "<CAF7WS+o+s+kT89a0mFyH+eWTS3WMdjBKRPMcUJ8QmFi1wih52Q@mail.gmail.com>",
        "Precedence": "bulk",
        "Received": "by mail-vk1-xa2e.google.com with SMTP id w186so6226126vkd.11\n        for <dev@kafka.apache.org>; Thu, 01 Aug 2019 07:42:22 -0700 (PDT)",
        "Received-SPF": "Pass (mailfrom) identity=mailfrom; client-ip=2607:f8b0:4864:20::a2e; helo=mail-vk1-xa2e.google.com; envelope-from=bbejeck@gmail.com; receiver=<UNKNOWN> ",
        "References": "<CAFtWJ8oiwOMH_+W=qW7PhzTmEaqNKZ6Co48HrY0fsBw5Utdeow@mail.gmail.com>\n <CAAyirGuE-gRTizrwKZkv1Rz9TVrp8C5uwzTHri4zt1q0BotG5Q@mail.gmail.com>\n <CAFtWJ8p9gC+J_h42FtBs_=127Qm-gsVfHPm1aPm7JfSgSA+t2A@mail.gmail.com>\n <CAAyirGspv4jHTQs46fZxafEqZ=3jX5c=dUjVwUK1WRvuR5q5GA@mail.gmail.com>\n <CAFtWJ8qanAO3==21Qmw2_gYaeYt6mTa5XRp4kvuo+=Na-6uXHg@mail.gmail.com>\n <CAAyirGs0xD8kJm=jxSdDpeuP9sQhkeJwRV=2o-PnmPm+p3yM6Q@mail.gmail.com>\n <CAHwHRrXg8kXFaeHc=ORhjzPKtnybt0GZxF+GkpL-_yC_6mV1Dw@mail.gmail.com>\n <CAFtWJ8rJ97KBSGUW6J2rUhan+G-aWGdLKQXdPJB96860QMBK2w@mail.gmail.com>\n <CAHwHRrUp_MrUFtiaJh3rBxXJppua3h1iBzkeb7QrvAPWMXNMkg@mail.gmail.com>\n <CAF7WS+ooWOu3zk8sRDNBWZ9pCWc=mHKzHw0KGWmqdiDje9DYfA@mail.gmail.com>\n <31f16c45-54bc-f6f3-2a94-368669decfed@confluent.io> <CAFtWJ8p6J3mO7jUs-kfHCM2SV3Ed4vvaNwMG7oM2OFeGtnGj6A@mail.gmail.com>\n <CAF7WS+pktCxnEq+WgXi6zyYRNgEZerU2osOJKiShV9Wugev=zg@mail.gmail.com>\n <CAFtWJ8pRzx33pdi30eRAByQ8Y5ftmf-aKoR9WcJ_qFu6ram9_g@mail.gmail.com>\n <76823728-49ef-f06e-3459-73aa252933b9@confluent.io> <CAFtWJ8ogLfM7Kco4Pgsru-dm=6qbR2EwS9cn6QFNCEE+5rCFTQ@mail.gmail.com>\n <CAAyirGuFmeFvBc=Bc5bEEaJHgayQSFm3tHy1wkqdEg+z1UYF=A@mail.gmail.com>",
        "Reply-To": "dev@kafka.apache.org",
        "Return-Path": "<dev-return-106217-apmail-kafka-dev-archive=kafka.apache.org@kafka.apache.org>",
        "Subject": "Re: [DISCUSS] KIP-470: TopologyTestDriver test input and output\n usability improvements",
        "To": "dev@kafka.apache.org",
        "X-Gm-Message-State": "APjAAAU12UJsRjkA+7l33PysgKJMpbZ181giwiI3OV4EmMTmS1+iuHaH\n\tYpSkIKOrO9kGsIgBMcNUD+PNJymCi4P0g3QHyEc2Ww==",
        "X-Google-DKIM-Signature": "v=1; a=rsa-sha256; c=relaxed/relaxed;\n        d=1e100.net; s=20161025;\n        h=x-gm-message-state:mime-version:references:in-reply-to:from:date\n         :message-id:subject:to;\n        bh=DAAPs87ojVBn2vO36wr3JAVf+1iD7y/svMqlgYcDIrw=;\n        b=JnUaHI/9M4UVNEDuadN1C5r+GljvzrO7iNo8Vvg4InSSHUsZCcOI0CwXnKi7bz1hkJ\n         tD0EYTSv332Q18lZKWtuc6Fj/KCmb6rcB69yI6PnYBB01ClsjYXW/H2MuOS4ngs/FzSv\n         tq4pMnKD+dXgAA1GuFXJvlA52U4muJHA5Ae/DIvykGMSNuD3/NK45iM4+p8WT8gHUjii\n         P6UWxkE5lP9qDAouHf9Yo3kXkXEGQi326RqP3zZs6sgwdQNSosSbNvh9cqUCGsZP5Sie\n         PAA6XCijrdfWRsbMIKYW0VZAyw+EqoUMjT+EznWJ2yvBHtmjhRbBKt+aTAkDufHEnsoz\n         f3yA==",
        "X-Google-Smtp-Source": "APXvYqxz2nyXvtRhCH/VrIu8imhZLOIEFil8tk6lIXbtlRjYE+xxlusW+/YA8F8wcP/3hKm6iUy0M1O9ZJdOAo3xxI0=",
        "X-Original-To": "apmail-kafka-dev-archive@www.apache.org",
        "X-Received": "by 2002:a1f:c802:: with SMTP id y2mr45761478vkf.56.1564670534863;\n Thu, 01 Aug 2019 07:42:14 -0700 (PDT)",
        "X-Spam-Flag": "NO",
        "X-Spam-Level": "*",
        "X-Spam-Score": "1.801",
        "X-Spam-Status": "No, score=1.801 tagged_above=-999 required=6.31\n\ttests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,\n\tDKIM_VALID_EF=-0.1, HTML_MESSAGE=2, RCVD_IN_DNSWL_NONE=-0.0001,\n\tSPF_HELO_NONE=0.001, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]\n\tautolearn=disabled",
        "X-Virus-Scanned": "Debian amavisd-new at spamd3-us-west.apache.org",
        "body": {
            "plain": "Hi Jukka,\n\nI also think 3, 4, and 5 are all good options.\n\nMy personal preference is 4, but I also wouldn't mind going with 5 if that\nis what others want to do.\n\nThanks,\nBill\n\nOn Tue, Jul 30, 2019 at 9:31 AM John Roesler <john@confluent.io> wrote:\n\n> Hey Jukka,\n>\n> Sorry for the delay.\n>\n> For what it's worth, I think 3, 4, and 5 are all good options. I guess my\n> own preference is 5.\n>\n> It seems like the migration pain is a one-time concern vs. having more\n> maintainable code for years thereafter.\n>\n> Thanks,\n> -John\n>\n>\n>\n> On Tue, Jul 2, 2019 at 4:03 AM Jukka Karvanen <jukka.karvanen@jukinimi.com\n> >\n> wrote:\n>\n> > Hi Matthias,\n> >\n> > Generally I think using Instant and Duration make the test more readable\n> > and that's why I modified KIP based on your suggestion.\n> > Now a lot of code use time with long or Long and that make the change\n> more\n> > complicated.\n> >\n> > What I tried to say about the migration is the lines without timestamp or\n> > if long timestamp is supported can be migrated mainly with search &\n> > recplace:\n> >\n> >\n> >\n> testDriver.pipeInput(recordFactory.create(WordCountLambdaExample.inputTopic,\n> > nullKey, \"Hello\", 1L));\n> >\n> > ->\n> >\n> > *inputTopic*.pipeInput(nullKey, \"Hello\", 1L);\n> >\n> > If long is not supported as timestamp, the same is not so easy:\n> >\n> >\n> >\n> testDriver.pipeInput(recordFactory.create(WordCountLambdaExample.inputTopic,\n> > nullKey, \"Hello\", 1L));\n> >\n> > ->\n> >\n> > *inputTopic1*.pipeInput(nullKey, \"Hello\", Instant.ofEpochMilli(1L));\n> >\n> > Also if you need to convert arbitrary long timestamps to proper time\n> > Instants, it require you need to understand the logic of the test. So\n> > mechanical search & replace is not possible.\n> >\n> >\n> > I see there are several alternatives for long vs Instant / Duration:\n> >\n> > 1. All times as long/Long like in this version:\n> >\n> >\n> https://cwiki.apache.org/confluence/pages/viewpage.action?pageId=119550011\n> >\n> > (startTimestampMs, autoAdvanceMs as parameter of  createInputTopic\n> > instead of configureTiming)\n> >\n> > 2. Auto timestamping configured with Instant and Duration, pipeInput\n> > and TestRecord with long:\n> >\n> >\n> https://cwiki.apache.org/confluence/pages/viewpage.action?pageId=120722523\n> >\n> >\n> > 3. (CURRENT) Auto timestamping configured with Instant and Duration,\n> > pipeInput and TestRecord with Instant, version with long deprecated:\n> >\n> >\n> >\n> https://cwiki.apache.org/confluence/display/KAFKA/KIP-470%3A+TopologyTestDriver+test+input+and+output+usability+improvements\n> >\n> >\n> > 4. Auto timestamping configured with Instant and Duration, pipeInput\n> > and TestRecord with Instant and long parallel (with long not\n> > deprecated):\n> >\n> > 5. Auto timestamping configured with Instant and Duration, pipeInput\n> > and TestRecord with Instant only\n> >\n> > I hope to get feedback.\n> >\n> > My own preference currently is alternative 3. or 4.\n> >\n> >\n> > If somebody want to test, there is a implementation of this version\n> > available in Github:\n> >\n> > https://github.com/jukkakarvanen/kafka-streams-test-topics\n> >\n> > which can be used directly from public Maven repository:\n> >\n> >     <dependency>\n> >         <groupId>com.github.jukkakarvanen</groupId>\n> >         <artifactId>kafka-streams-test-topics</artifactId>\n> >         <version>0.0.1-beta3</version>\n> >         <scope>test</scope>\n> >     </dependency>\n> >\n> > Also is this approach in KIP-470 preferred over KIP-456, so can we close\n> > it:\n> >\n> >\n> >\n> https://cwiki.apache.org/confluence/display/KAFKA/KIP-456%3A+Helper+classes+to+make+it+simpler+to+write+test+logic+with+TopologyTestDriver\n> >\n> > Jukka\n> >\n> > .\n> >\n> >\n> > pe 28. kes\u00e4k. 2019 klo 1.10 Matthias J. Sax (matthias@confluent.io)\n> > kirjoitti:\n> >\n> > > Thanks Jukka!\n> > >\n> > > The idea to use `Instant/Duration` was a proposal. If we think it's not\n> > > a good one, we could still stay with `long`. Because `ProducerRecord`\n> > > and `ConsumerRecord` are both based on `long,` it might make sense to\n> > > keep `long`?\n> > >\n> > > > The result of converting millis to Instant directly generates\n> > > >> rather non readable test code and changing from long to Instant\n> > > correctly\n> > > >> require understand what is the case it is testing.\n> > >\n> > > This might be a good indicator the using `Instant/Duration` might not\n> be\n> > > a good idea.\n> > >\n> > > Would be nice to get feedback from others.\n> > >\n> > > About adding new methods that we deprecate immediately: I don't think\n> we\n> > > should do this. IMHO, there are two kind of users, one that immediately\n> > > rewrite their code to move off deprecated methods. Those won't use the\n> > > new+deprecated ones anyway. Other uses migrate their code slowly and\n> > > would just not rewrite their code at all, and thus also not use the\n> > > new+deprecated methods.\n> > >\n> > > > Checking my own tests I was able to migrate the most of my code with\n> > > > search&replace without further thinking about the logic to this new\n> > > > approach. The result of converting millis to Instant directly\n> generates\n> > > > rather non readable test code and changing from long to Instant\n> > correctly\n> > > > require understand what is the case it is testing.\n> > >\n> > > Not sure if I can follow here. You first say, you could easily migrate\n> > > your code, but than you say it was not easily possible? Can you clarify\n> > > your experience upgrading your test code?\n> > >\n> > >\n> > > -Matthias\n> > >\n> > >\n> > > On 6/27/19 12:21 AM, Jukka Karvanen wrote:\n> > > > Hi,\n> > > >\n> > > >>> (4) Should we switch from `long` for timestamps to `Instant` and\n> > > > `Duration` ?\n> > > >> This version startTimestamp is Instant and autoAdvance Duration in\n> > > > Initialization and with manual configured collection pipe methods.\n> > > >> Now timestamp of TestRecord is still Long and similarly single\n> record\n> > > > pipeInput still has long as parameter.\n> > > >> Should these also converted to to Instant type?\n> > > >> Should there be both long and Instant parallel?\n> > > >> I expect there are existing test codebase which would be easier to\n> > > migrate\n> > > > if long could be still used.\n> > > > Now added Instant version to TestRecord and pipeInput method.\n> > > >\n> > > > Checking my own tests I was able to migrate the most of my code with\n> > > > search&replace without further thinking about the logic to this new\n> > > > approach. The result of converting millis to Instant directly\n> generates\n> > > > rather non readable test code and changing from long to Instant\n> > correctly\n> > > > require understand what is the case it is testing.\n> > > >\n> > > > That is why version with long left still as deprecated for easier\n> > > migration\n> > > > for existing test.\n> > > > Also TopologyTestDriver constructor and advanceWallClockTime  method\n> > > > modified with same approach.\n> > > >\n> > > > Jukka\n> > > >\n> > > >\n> > > > ma 24. kes\u00e4k. 2019 klo 16.47 Bill Bejeck (bbejeck@gmail.com)\n> > kirjoitti:\n> > > >\n> > > >> Hi Jukka\n> > > >>\n> > > >>> These topic objects are only interfacing TopologyTestDriver, not\n> > > >> affecting\n> > > >>> the internal functionality of it. In my plan the internal data\n> > > structures\n> > > >>> are using those Producer/ConsumerRecords as earlier. That way I\n> don't\n> > > see\n> > > >>> how those could be affected.\n> > > >>\n> > > >> I mistakenly thought the KIP was proposing to completely remove\n> > > >> Producer/ConsumerRecords in favor of TestRecord.  But taking another\n> > > quick\n> > > >> look I can see the plan for using the TestRecord objects.  Thanks\n> for\n> > > the\n> > > >> clarification.\n> > > >>\n> > > >> -Bill\n> > > >>\n> > > >> On Sat, Jun 22, 2019 at 2:26 AM Jukka Karvanen <\n> > > >> jukka.karvanen@jukinimi.com>\n> > > >> wrote:\n> > > >>\n> > > >>> Hi All,\n> > > >>> Hi Matthias,\n> > > >>>\n> > > >>>> (1) It's a little confusing that you list all method (existing,\n> > > proposed\n> > > >>>> to deprecate, and new one) of `TopologyTestDriver` in the KIP.\n> Maybe\n> > > >>>> only list the ones you propose to deprecate and the new ones you\n> > want\n> > > to\n> > > >>>> add?\n> > > >>>\n> > > >>> Ok. Unmodified methods removed.\n> > > >>>\n> > > >>>> (2) `TopologyTestDriver#createInputTopic`: might it be worth to\n> add\n> > > >>>> overload to initialize the timetamp and auto-advance feature\n> > directly?\n> > > >>>> Otherwise, uses always need to call `configureTiming` as an extra\n> > > call?\n> > > >>>\n> > > >>> Added with Instant and Duration parameters.\n> > > >>>\n> > > >>>> (3) `TestInputTopic#configureTiming()`: maybe rename to\n> > > >>> `reconfigureTiming()` ?\n> > > >>>\n> > > >>> I removed this method when we have now initialization in\n> constructor.\n> > > >>> You can recreate TestInputTopic if needing to reconfigure timing.\n> > > >>>\n> > > >>>\n> > > >>>> (4) Should we switch from `long` for timestamps to `Instant` and\n> > > >>> `Duration` ?\n> > > >>> This version startTimestamp is Instant and autoAdvance Duration in\n> > > >>> Initialization and with manual configured collection pipe methods.\n> > > >>> Now timestamp of TestRecord is still Long and similarly single\n> record\n> > > >>> pipeInput still has long as parameter.\n> > > >>> Should these also converted to to Instant type?\n> > > >>> Should there be both long and Instant parallel?\n> > > >>> I expect there are existing test codebase which would be easier to\n> > > >> migrate\n> > > >>> if long could be still used.\n> > > >>>\n> > > >>> Also should advanceWallClockTime  in TopologyTestDriver changed(or\n> > > added\n> > > >>> alternative) for Duration parameter.\n> > > >>>\n> > > >>>\n> > > >>>> (5) Why do we have redundant getters? Or set with `getX()` and one\n> > > >>> set without `get`-prefix?\n> > > >>>\n> > > >>> The methods without get-prefix are for compatibility with\n> > > >> ProducerRecord /\n> > > >>> ConsumerRecord and I expect would make migration to TestRecord\n> > easier.\n> > > >>> Standard getters in TestRecord enable writing test ignoring\n> selected\n> > > >> fields\n> > > >>> with hamcrest like this:\n> > > >>>\n> > > >>> assertThat(outputTopic.readRecord(), allOf(\n> > > >>>         hasProperty(\"key\", equalTo(1L)),\n> > > >>>         hasProperty(\"value\", equalTo(\"Hello\")),\n> > > >>>         hasProperty(\"headers\", equalTo(headers))));\n> > > >>>\n> > > >>>\n> > > >>> That's why I have currently both methods.\n> > > >>>\n> > > >>> Jukka\n> > > >>>\n> > > >>>\n> > > >>> pe 21. kes\u00e4k. 2019 klo 22.20 Matthias J. Sax (\n> matthias@confluent.io)\n> > > >>> kirjoitti:\n> > > >>>\n> > > >>>> Thanks for the KIP. The idea to add InputTopic and OutputTopic\n> > > >>>> abstractions is really neat!\n> > > >>>>\n> > > >>>>\n> > > >>>> Couple of minor comment:\n> > > >>>>\n> > > >>>> (1) It's a little confusing that you list all method (existing,\n> > > >> proposed\n> > > >>>> to deprecate, and new one) of `TopologyTestDriver` in the KIP.\n> Maybe\n> > > >>>> only list the ones you propose to deprecate and the new ones you\n> > want\n> > > >> to\n> > > >>>> add?\n> > > >>>>\n> > > >>>> (Or mark all existing methods clearly -- atm, I need to got back\n> to\n> > > the\n> > > >>>> code to read the KIP and to extract what changes are proposed).\n> > > >>>>\n> > > >>>>\n> > > >>>> (2) `TopologyTestDriver#createInputTopic`: might it be worth to\n> add\n> > > >>>> overload to initialize the timetamp and auto-advance feature\n> > directly?\n> > > >>>> Otherwise, uses always need to call `configureTiming` as an extra\n> > > call?\n> > > >>>>\n> > > >>>>\n> > > >>>> (3) `TestInputTopic#configureTiming()`: maybe rename to\n> > > >>>> `reconfigureTiming()` ?\n> > > >>>>\n> > > >>>>\n> > > >>>> (4) Should we switch from `long` for timestamps to `Instant` and\n> > > >>>> `Duration` ?\n> > > >>>>\n> > > >>>>\n> > > >>>> (5) Why do we have redundant getters? Or set with `getX()` and one\n> > set\n> > > >>>> without `get`-prefix?\n> > > >>>>\n> > > >>>>\n> > > >>>>\n> > > >>>> -Matthias\n> > > >>>>\n> > > >>>>\n> > > >>>>\n> > > >>>>\n> > > >>>> On 6/21/19 10:57 AM, Bill Bejeck wrote:\n> > > >>>>> Jukka,\n> > > >>>>>\n> > > >>>>> Thanks for the KIP. I like the changes overall.\n> > > >>>>> One thing I wanted to confirm, and this may be me being paranoid,\n> > but\n> > > >>>> will\n> > > >>>>> the changes for input/output topic affect how the\n> > TopologyTestDriver\n> > > >>>> works\n> > > >>>>> with internal topics when there are sub-topologies created?\n> > > >>>>>\n> > > >>>>> On Fri, Jun 21, 2019 at 12:05 PM Guozhang Wang <\n> wangguoz@gmail.com\n> > >\n> > > >>>> wrote:\n> > > >>>>>\n> > > >>>>>> 1) Got it, could you list this class along with all its\n> functions\n> > in\n> > > >>> the\n> > > >>>>>> proposed public APIs as well?\n> > > >>>>>>\n> > > >>>>>> 2) Ack, thanks!\n> > > >>>>>>\n> > > >>>>>> On Thu, Jun 20, 2019 at 11:27 PM Jukka Karvanen <\n> > > >>>>>> jukka.karvanen@jukinimi.com>\n> > > >>>>>> wrote:\n> > > >>>>>>\n> > > >>>>>>> Hi  Guozhang,\n> > > >>>>>>>\n> > > >>>>>>> 1) This TestRecord is new class in my proposal. So it is a\n> > > >> simplified\n> > > >>>>>>> version of ProducerRecord and ConsumerRecord containing only\n> the\n> > > >>> fields\n> > > >>>>>>> needed to test record content.\n> > > >>>>>>>\n> > > >>>>>>> 2)\n> > > >>>>>>> public final <K, V> TestInputTopic<K, V> createInputTopic(final\n> > > >>> String\n> > > >>>>>>> topicName, final Serde<K> keySerde, final Serde<V> valueSerde);\n> > > >>>>>>> public final <K, V> TestOutputTopic<K, V>\n> createOutputTopic(final\n> > > >>>> String\n> > > >>>>>>> topicName, final Serde<K> keySerde, final Serde<V> valueSerde);\n> > > >>>>>>> The purpose is to create separate object for each input and\n> > output\n> > > >>>> topic\n> > > >>>>>>> you are using. The topic name is given to\n> createInput/OutputTopic\n> > > >>> when\n> > > >>>>>>> initialize topic object.\n> > > >>>>>>>\n> > > >>>>>>> For example:\n> > > >>>>>>>\n> > > >>>>>>> final TestInputTopic<Long, String> inputTopic1 =\n> > > >>>>>>> testDriver.createInputTopic( INPUT_TOPIC, longSerde,\n> > stringSerde);\n> > > >>>>>>> final TestInputTopic<Long, String> inputTopic2 =\n> > > >>>>>>> testDriver.createInputTopic( INPUT_TOPIC_MAP, longSerde,\n> > > >>> stringSerde);\n> > > >>>>>>> final TestOutputTopic<Long, String> outputTopic1 =\n> > > >>>>>>> testDriver.createOutputTopic(OUTPUT_TOPIC, longSerde,\n> > stringSerde);\n> > > >>>>>>> final TestOutputTopic<String, Long> outputTopic2 =\n> > > >>>>>>> testDriver.createOutputTopic(OUTPUT_TOPIC_MAP, stringSerde,\n> > > >>>>>>> longSerde);\n> > > >>>>>>> inputTopic1.pipeInput(1L, \"Hello\");\n> > > >>>>>>> assertThat(outputTopic1.readKeyValue(), equalTo(new\n> > KeyValue<>(1L,\n> > > >>>>>>> \"Hello\")));\n> > > >>>>>>> assertThat(outputTopic2.readKeyValue(), equalTo(new\n> > > >>> KeyValue<>(\"Hello\",\n> > > >>>>>>> 1L)));\n> > > >>>>>>> inputTopic2.pipeInput(1L, \"Hello\");\n> > > >>>>>>>\n> > > >>>>>>>\n> > > >>>>>>> Jukka\n> > > >>>>>>>\n> > > >>>>>>> to 20. kes\u00e4k. 2019 klo 23.52 Guozhang Wang (wangguoz@gmail.com\n> )\n> > > >>>>>> kirjoitti:\n> > > >>>>>>>\n> > > >>>>>>>> Hello Jukka,\n> > > >>>>>>>>\n> > > >>>>>>>> Thanks for writing the KIP, I have a couple of quick\n> questions:\n> > > >>>>>>>>\n> > > >>>>>>>> 1) Is \"TestRecord\" an existing class that you propose to\n> > > >> piggy-back\n> > > >>>> on?\n> > > >>>>>>>> Right now we have a scala TestRecord case class but I doubt\n> that\n> > > >> was\n> > > >>>>>> your\n> > > >>>>>>>> proposal, or are you proposing to add a new Java class?\n> > > >>>>>>>>\n> > > >>>>>>>> 2) Would the new API only allow a single input / output topic\n> > with\n> > > >>>>>>>> `createInput/OutputTopic`? If not, when we call pipeInput how\n> to\n> > > >>>>>>> determine\n> > > >>>>>>>> which topic this record should be pipe to?\n> > > >>>>>>>>\n> > > >>>>>>>>\n> > > >>>>>>>> Guozhang\n> > > >>>>>>>>\n> > > >>>>>>>> On Mon, Jun 17, 2019 at 1:34 PM John Roesler <\n> john@confluent.io\n> > >\n> > > >>>>>> wrote:\n> > > >>>>>>>>\n> > > >>>>>>>>> Woah, I wasn't aware of that Hamcrest test style. Awesome!\n> > > >>>>>>>>>\n> > > >>>>>>>>> Thanks for the updates. I look forward to hearing what others\n> > > >>> think.\n> > > >>>>>>>>>\n> > > >>>>>>>>> -John\n> > > >>>>>>>>>\n> > > >>>>>>>>> On Mon, Jun 17, 2019 at 4:12 AM Jukka Karvanen\n> > > >>>>>>>>> <jukka.karvanen@jukinimi.com> wrote:\n> > > >>>>>>>>>>\n> > > >>>>>>>>>> Wiki page updated:\n> > > >>>>>>>>>>\n> > > >>>>>>>>>\n> > > >>>>>>>>\n> > > >>>>>>>\n> > > >>>>>>\n> > > >>>>\n> > > >>>\n> > > >>\n> > >\n> >\n> https://cwiki.apache.org/confluence/display/KAFKA/KIP-470%3A+TopologyTestDriver+test+input+and+output+usability+improvements\n> > > >>>>>>>>>>\n> > > >>>>>>>>>>\n> > > >>>>>>>>>> ClientRecord removed and replaced with TestRecord in method\n> > > >> calls.\n> > > >>>>>>>>>> TestRecordFactory removed (time tracking functionality to be\n> > > >>>>>> included\n> > > >>>>>>>> to\n> > > >>>>>>>>>> TestInputTopic)\n> > > >>>>>>>>>> OutputVerifier deprecated\n> > > >>>>>>>>>> TestRecord topic removed and getters added\n> > > >>>>>>>>>>\n> > > >>>>>>>>>> Getters in TestRecord enable writing test ignoring selected\n> > > >> fields\n> > > >>>>>>> with\n> > > >>>>>>>>>> hamcrest like this:\n> > > >>>>>>>>>>\n> > > >>>>>>>>>> assertThat(outputTopic.readRecord(), allOf(\n> > > >>>>>>>>>>         hasProperty(\"key\", equalTo(1L)),\n> > > >>>>>>>>>>         hasProperty(\"value\", equalTo(\"Hello\")),\n> > > >>>>>>>>>>         hasProperty(\"headers\", equalTo(headers))));\n> > > >>>>>>>>>>\n> > > >>>>>>>>>>\n> > > >>>>>>>>>> Jukka\n> > > >>>>>>>>>>\n> > > >>>>>>>>>> la 15. kes\u00e4k. 2019 klo 1.10 John Roesler (john@confluent.io\n> )\n> > > >>>>>>>> kirjoitti:\n> > > >>>>>>>>>>\n> > > >>>>>>>>>>> Sounds good. Thanks as always for considering my feedback!\n> > > >>>>>>>>>>> -John\n> > > >>>>>>>>>>>\n> > > >>>>>>>>>>> On Fri, Jun 14, 2019 at 12:12 PM Jukka Karvanen\n> > > >>>>>>>>>>> <jukka.karvanen@jukinimi.com> wrote:\n> > > >>>>>>>>>>>>\n> > > >>>>>>>>>>>> Ok, I will modify KIP Public Interface in a wiki based on\n> > the\n> > > >>>>>>>>> feedback.\n> > > >>>>>>>>>>>>\n> > > >>>>>>>>>>>> TestRecordFactory / ConsumerRecordFactory was used by\n> > > >>>>>>>> TestInputTopic\n> > > >>>>>>>>> with\n> > > >>>>>>>>>>>> the version I had with KIP456, but maybe I can merge That\n> > > >>>>>>>>> functionality\n> > > >>>>>>>>>>> to\n> > > >>>>>>>>>>>> InputTopic or  TestRecordFactory   can kept non public\n> maybe\n> > > >>>>>>> moving\n> > > >>>>>>>>> it to\n> > > >>>>>>>>>>>> internals package.\n> > > >>>>>>>>>>>>\n> > > >>>>>>>>>>>> I will make the proposal with a slim down interface.\n> > > >>>>>>>>>>>> I don't want to go to so slim as you proposed with only\n> > > >>>>>>> TestRecord\n> > > >>>>>>>> or\n> > > >>>>>>>>>>>> List<TestRecord>, because you then still end up doing\n> helper\n> > > >>>>>>>> methods\n> > > >>>>>>>>> to\n> > > >>>>>>>>>>>> construct List of TestRecord.\n> > > >>>>>>>>>>>> The list of values is easier to write and clearer to read\n> > than\n> > > >>>>>> if\n> > > >>>>>>>> you\n> > > >>>>>>>>>>> need\n> > > >>>>>>>>>>>> to contruct list of TestRecords.\n> > > >>>>>>>>>>>>\n> > > >>>>>>>>>>>> For example:\n> > > >>>>>>>>>>>>\n> > > >>>>>>>>>>>> final List<String> inputValues = Arrays.asList(\n> > > >>>>>>>>>>>>         \"Apache Kafka Streams Example\",\n> > > >>>>>>>>>>>>         \"Using Kafka Streams Test Utils\",\n> > > >>>>>>>>>>>>         \"Reading and Writing Kafka Topic\"\n> > > >>>>>>>>>>>> );\n> > > >>>>>>>>>>>> inputTopic.pipeValueList(inputValues);\n> > > >>>>>>>>>>>>\n> > > >>>>>>>>>>>>\n> > > >>>>>>>>>>>> Let's check after the next iteration is it still worth\n> > > >> reducing\n> > > >>>>>>> the\n> > > >>>>>>>>>>> methods.\n> > > >>>>>>>>>>>>\n> > > >>>>>>>>>>>>\n> > > >>>>>>>>>>>> Jukka\n> > > >>>>>>>>>>>>\n> > > >>>>>>>>>>>>\n> > > >>>>>>>>>>>> pe 14. kes\u00e4k. 2019 klo 18.27 John Roesler (\n> > john@confluent.io)\n> > > >>>>>>>>> kirjoitti:\n> > > >>>>>>>>>>>>\n> > > >>>>>>>>>>>>> Thanks, Jukka,\n> > > >>>>>>>>>>>>>\n> > > >>>>>>>>>>>>> Ok, I buy this reasoning.\n> > > >>>>>>>>>>>>>\n> > > >>>>>>>>>>>>> Just to echo what I think I read, you would just drop\n> > > >>>>>>>> ClientRecord\n> > > >>>>>>>>>>>>> from the proposal, and TestRecord would stand on its own,\n> > > >>>>>> with\n> > > >>>>>>>> the\n> > > >>>>>>>>>>>>> same methods and properties you proposed, and the \"input\n> > > >>>>>> topic\"\n> > > >>>>>>>>> would\n> > > >>>>>>>>>>>>> accept TestRecord, and the \"output topic\" would produce\n> > > >>>>>>>> TestRecord?\n> > > >>>>>>>>>>>>> Further, the \"input and output topic\" classes would\n> > > >>>>>> internally\n> > > >>>>>>>>> handle\n> > > >>>>>>>>>>>>> the conversion to and from ConsumerRecord and\n> > ProducerRecord\n> > > >>>>>> to\n> > > >>>>>>>>> pass\n> > > >>>>>>>>>>>>> to and from the TopologyTestDriver?\n> > > >>>>>>>>>>>>>\n> > > >>>>>>>>>>>>> This seems good to me.\n> > > >>>>>>>>>>>>>\n> > > >>>>>>>>>>>>> Since the object coming out of the \"output topic\" is much\n> > > >>>>>> more\n> > > >>>>>>>>>>>>> ergonomic, I suspect we won't need the OutputVerifier at\n> > all.\n> > > >>>>>>> It\n> > > >>>>>>>>> was\n> > > >>>>>>>>>>>>> mostly needed because of all the extra junk in\n> > ProducerRecord\n> > > >>>>>>> you\n> > > >>>>>>>>> need\n> > > >>>>>>>>>>>>> to ignore. It seems better to just deprecate it. If in\n> the\n> > > >>>>>>> future\n> > > >>>>>>>>> it\n> > > >>>>>>>>>>>>> turns out there is some actual use case for a verifier,\n> we\n> > > >>>>>> can\n> > > >>>>>>>>> have a\n> > > >>>>>>>>>>>>> very small KIP to add one. But reading your response, I\n> > > >>>>>> suspect\n> > > >>>>>>>>> that\n> > > >>>>>>>>>>>>> existing test verification libraries would be sufficient\n> on\n> > > >>>>>>> their\n> > > >>>>>>>>> own.\n> > > >>>>>>>>>>>>>\n> > > >>>>>>>>>>>>> Similarly, it seems like we can shrink the total\n> interface\n> > by\n> > > >>>>>>>>> removing\n> > > >>>>>>>>>>>>> the TestRecordFactory from the proposal. If TestRecord\n> > > >>>>>> already\n> > > >>>>>>>>> offers\n> > > >>>>>>>>>>>>> all the constructors you'd want, then the only benefit of\n> > the\n> > > >>>>>>>>> factory\n> > > >>>>>>>>>>>>> is to auto-increment the timestamps, but then again, the\n> > > >>>>>> \"input\n> > > >>>>>>>>> topic\"\n> > > >>>>>>>>>>>>> can already do that (e.g., it can do it if the record\n> > > >>>>>> timestamp\n> > > >>>>>>>> is\n> > > >>>>>>>>> not\n> > > >>>>>>>>>>>>> set).\n> > > >>>>>>>>>>>>>\n> > > >>>>>>>>>>>>> Likewise, if the TestRecords are easy to create, then we\n> > > >>>>>> don't\n> > > >>>>>>>> need\n> > > >>>>>>>>>>>>> all the redundant methods in \"input topic\" to pipe\n> values,\n> > or\n> > > >>>>>>>>>>>>> key/values, or key/value/timestamp, etc. We can do with\n> > just\n> > > >>>>>>> two\n> > > >>>>>>>>>>>>> methods, one for a single TestRecord and one for a\n> > collection\n> > > >>>>>>> of\n> > > >>>>>>>>> them.\n> > > >>>>>>>>>>>>> This reduces API ambiguity and also dramatically\n> decreases\n> > > >>>>>> the\n> > > >>>>>>>>> surface\n> > > >>>>>>>>>>>>> area of the interface, which ultimately makes it much\n> > easier\n> > > >>>>>> to\n> > > >>>>>>>>> use.\n> > > >>>>>>>>>>>>>\n> > > >>>>>>>>>>>>> It's best to start with the smallest interface that will\n> do\n> > > >>>>>> the\n> > > >>>>>>>> job\n> > > >>>>>>>>>>>>> and expand it upon request, rather than throwing in\n> > > >>>>>> everything\n> > > >>>>>>>> you\n> > > >>>>>>>>> can\n> > > >>>>>>>>>>>>> think of up front. The extra stuff would be confusing to\n> > > >>>>>> people\n> > > >>>>>>>>> facing\n> > > >>>>>>>>>>>>> two practically identical paths to accomplish the same\n> > goal,\n> > > >>>>>>> and\n> > > >>>>>>>>> it's\n> > > >>>>>>>>>>>>> very difficult to slim the interface down later, because\n> we\n> > > >>>>>>> don't\n> > > >>>>>>>>>>>>> really know which parts are more popular (i.e., no one\n> > > >>>>>> submits\n> > > >>>>>>>>>>>>> \"feature requests\" to _remove_ stuff they don't need,\n> only\n> > to\n> > > >>>>>>>> _add_\n> > > >>>>>>>>>>>>> stuff that they need.\n> > > >>>>>>>>>>>>>\n> > > >>>>>>>>>>>>> But overall, I really like the structure of this design.\n> > I'm\n> > > >>>>>>>> super\n> > > >>>>>>>>>>>>> excited about this KIP.\n> > > >>>>>>>>>>>>>\n> > > >>>>>>>>>>>>> Thanks,\n> > > >>>>>>>>>>>>> -John\n> > > >>>>>>>>>>>>>\n> > > >>>>>>>>>>>>> On Fri, Jun 14, 2019 at 2:55 AM Jukka Karvanen\n> > > >>>>>>>>>>>>> <jukka.karvanen@jukinimi.com> wrote:\n> > > >>>>>>>>>>>>>>\n> > > >>>>>>>>>>>>>> Hi,\n> > > >>>>>>>>>>>>>>\n> > > >>>>>>>>>>>>>> I am not a fan of swapping only ProducerRecord and\n> > > >>>>>>>>> ConsumerRecord.\n> > > >>>>>>>>>>>>>> As a test writer point of view I do not want to care\n> about\n> > > >>>>>>> the\n> > > >>>>>>>>>>> difference\n> > > >>>>>>>>>>>>>> of those and\n> > > >>>>>>>>>>>>>> that way I like to have object type which can be used to\n> > > >>>>>> pipe\n> > > >>>>>>>>>>> records in\n> > > >>>>>>>>>>>>>> and compare outputs.\n> > > >>>>>>>>>>>>>> That way avoid unnecessary conversions between\n> > > >>>>>> ProducerRecord\n> > > >>>>>>>> and\n> > > >>>>>>>>>>>>>> ConsumerRecord.\n> > > >>>>>>>>>>>>>>\n> > > >>>>>>>>>>>>>> My initial assumption was that ProducerRecord and\n> > > >>>>>>>>>>> ConsumerRecord.could\n> > > >>>>>>>>>>>>>> implement the same ClientRecord\n> > > >>>>>>>>>>>>>> and that way test writer could have used either of\n> those,\n> > > >>>>>> but\n> > > >>>>>>>>> seems\n> > > >>>>>>>>>>> that\n> > > >>>>>>>>>>>>>> return type of timestamp method long vs Long is not\n> > > >>>>>>> compatible.\n> > > >>>>>>>>>>>>>> Now the main advantage of ClientRecord is no need to\n> > > >>>>>>> duplicate\n> > > >>>>>>>>>>>>>> OutputVerifier when it is modified from ProducerRecord\n> to\n> > > >>>>>>>>>>> ClientRecord.\n> > > >>>>>>>>>>>>>> Generally is there need for OutputVerifier. Can we\n> > > >>>>>> deprecate\n> > > >>>>>>>> the\n> > > >>>>>>>>>>> existing\n> > > >>>>>>>>>>>>>> and use standard assertion libraries for new test.\n> > > >>>>>>>>>>>>>>\n> > > >>>>>>>>>>>>>> If you use hamcrest, assert-j or any other assertion\n> > > >>>>>> library\n> > > >>>>>>>>> for the\n> > > >>>>>>>>>>>>> rest\n> > > >>>>>>>>>>>>>> of the test, why not use it with these also.\n> > > >>>>>>>>>>>>>> When we have these methods to access only needed fields\n> it\n> > > >>>>>> is\n> > > >>>>>>>>> easier\n> > > >>>>>>>>>>> to\n> > > >>>>>>>>>>>>>> write test like this:\n> > > >>>>>>>>>>>>>> assertThat(outputTopic.readValue()).isEqualTo(\"Hello\");\n> > > >>>>>>>>>>>>>>\n> > > >>>>>>>>>>>>>> or\n> > > >>>>>>>>>>>>>>\n> > > >>>>>>> assertThat(outputTopic.readRecord()).isEqualTo(expectedRecord);\n> > > >>>>>>>>>>>>>>\n> > > >>>>>>>>>>>>>> Only value for new OutputVerifier is when needing to\n> > ignore\n> > > >>>>>>>> some\n> > > >>>>>>>>>>> fields\n> > > >>>>>>>>>>>>>> ClientRecord actual = outputTopic.readRecord();\n> > > >>>>>>>>>>>>>> assertThat(actual.value()).isEqualTo(\"Hello\");\n> > > >>>>>>>>>>>>>> assertThat(actual.key()).isEqualTo(expectedKey);\n> > > >>>>>>>>>>>>>>\n> > > >>>>>> assertThat(actual.timestamp()).isEqualTo(expectedTimestamp);\n> > > >>>>>>>>>>>>>>\n> > > >>>>>>>>>>>>>> So if want to leave client package untouched, I would\n> > > >>>>>> modify\n> > > >>>>>>>> the\n> > > >>>>>>>>>>> methods\n> > > >>>>>>>>>>>>>> with ClientRecord now in InputTopic and OutputTopic to\n> > pass\n> > > >>>>>>> in\n> > > >>>>>>>>> and\n> > > >>>>>>>>>>> out\n> > > >>>>>>>>>>>>> this\n> > > >>>>>>>>>>>>>> TestRecord instead.\n> > > >>>>>>>>>>>>>> In that case there would be possibility to add methods\n> to\n> > > >>>>>>>>> TestRecord\n> > > >>>>>>>>>>> to\n> > > >>>>>>>>>>>>>> help ignore some fields in assertions like:\n> > > >>>>>>>>>>>>>>\n> > > >>>>>>>>>>>>>>\n> > > >>>>>>>>>>>>>\n> > > >>>>>>>>>>>\n> > > >>>>>>>>>\n> > > >>>>>>>>\n> > > >>>>>>>\n> > > >>>>>>\n> > > >>>>\n> > > >>>\n> > > >>\n> > >\n> >\n> assertThat(outputTopic.readRecord().getValueTimestamp()).isEqualTo(expectedRecord.get\n> > > >>>>>>>>>>>>>> ValueTimestamp());\n> > > >>>>>>>>>>>>>>\n> > > >>>>>>>>>>>>>> How about this alternative?\n> > > >>>>>>>>>>>>>> If this way sounds better I will modify KIP page in\n> wiki.\n> > > >>>>>>>>>>>>>>\n> > > >>>>>>>>>>>>>>\n> > > >>>>>>>>>>>>>> Jukka\n> > > >>>>>>>>>>>>>>\n> > > >>>>>>>>>>>>>>\n> > > >>>>>>>>>>>>>> to 13. kes\u00e4k. 2019 klo 18.30 John Roesler (\n> > > >>>>>> john@confluent.io\n> > > >>>>>>> )\n> > > >>>>>>>>>>> kirjoitti:\n> > > >>>>>>>>>>>>>>\n> > > >>>>>>>>>>>>>>> Hey, all, maybe we can jump-start this discussion.\n> > > >>>>>>>>>>>>>>>\n> > > >>>>>>>>>>>>>>> I think this approach would be very ergonomic for\n> > > >>>>>> testing,\n> > > >>>>>>>> and\n> > > >>>>>>>>>>> would\n> > > >>>>>>>>>>>>>>> help reduce boilerplate in tests.\n> > > >>>>>>>>>>>>>>>\n> > > >>>>>>>>>>>>>>> The think I like most about it is that it mirrors the\n> > > >>>>>>> mental\n> > > >>>>>>>>> model\n> > > >>>>>>>>>>>>>>> that people already have from Kafka Streams, in which\n> you\n> > > >>>>>>>>> write to\n> > > >>>>>>>>>>> an\n> > > >>>>>>>>>>>>>>> \"input topic\" and then get your results from an \"output\n> > > >>>>>>>>> topic\". As\n> > > >>>>>>>>>>> a\n> > > >>>>>>>>>>>>>>> side benefit, the input and output topics in the\n> proposal\n> > > >>>>>>>> also\n> > > >>>>>>>>>>> close\n> > > >>>>>>>>>>>>>>> over the serdes, which makes it much less boilerplate\n> for\n> > > >>>>>>>> test\n> > > >>>>>>>>>>> code.\n> > > >>>>>>>>>>>>>>>\n> > > >>>>>>>>>>>>>>> If I can offer one suggestion for change, I'm not sure\n> > > >>>>>> I'm\n> > > >>>>>>>>> totally\n> > > >>>>>>>>>>>>>>> sold on the need for a new abstraction \"ClientRecord\"\n> > > >>>>>> with\n> > > >>>>>>> an\n> > > >>>>>>>>>>>>>>> implementation for tests \"TestRecord\". It seems like\n> this\n> > > >>>>>>>>>>>>>>> unnecessarily complicates the main (non-testing) data\n> > > >>>>>>> model.\n> > > >>>>>>>> It\n> > > >>>>>>>>>>> seems\n> > > >>>>>>>>>>>>>>> like it would be sufficient, and just as ergonomic, to\n> > > >>>>>> have\n> > > >>>>>>>> the\n> > > >>>>>>>>>>> input\n> > > >>>>>>>>>>>>>>> topic accept ProducerRecords and the output topic\n> return\n> > > >>>>>>>>>>>>>>> ConsumerRecords. I'm open to discussion on this point,\n> > > >>>>>>>> though.\n> > > >>>>>>>>>>>>>>>\n> > > >>>>>>>>>>>>>>> Thanks for the proposal, Jukka!\n> > > >>>>>>>>>>>>>>> -John\n> > > >>>>>>>>>>>>>>>\n> > > >>>>>>>>>>>>>>> On Mon, May 20, 2019 at 7:59 AM Jukka Karvanen\n> > > >>>>>>>>>>>>>>> <jukka.karvanen@jukinimi.com> wrote:\n> > > >>>>>>>>>>>>>>>>\n> > > >>>>>>>>>>>>>>>> Hi All,\n> > > >>>>>>>>>>>>>>>>\n> > > >>>>>>>>>>>>>>>> I would like to start the discussion on KIP-470:\n> > > >>>>>>>>>>> TopologyTestDriver\n> > > >>>>>>>>>>>>> test\n> > > >>>>>>>>>>>>>>>> input and output usability improvements:\n> > > >>>>>>>>>>>>>>>>\n> > > >>>>>>>>>>>>>>>\n> > > >>>>>>>>>>>>>\n> > > >>>>>>>>>>>\n> > > >>>>>>>>>\n> > > >>>>>>>>\n> > > >>>>>>>\n> > > >>>>>>\n> > > >>>>\n> > > >>>\n> > > >>\n> > >\n> >\n> https://cwiki.apache.org/confluence/display/KAFKA/KIP-470%3A+TopologyTestDriver+test+input+and+output+usability+improvements\n> > > >>>>>>>>>>>>>>>>\n> > > >>>>>>>>>>>>>>>>\n> > > >>>>>>>>>>>>>>>> This KIP is inspired by the Discussion in KIP-456:\n> > > >>>>>> Helper\n> > > >>>>>>>>>>> classes to\n> > > >>>>>>>>>>>>> make\n> > > >>>>>>>>>>>>>>>> it simpler to write test logic with\n> TopologyTestDriver:\n> > > >>>>>>>>>>>>>>>>\n> > > >>>>>>> https://cwiki.apache.org/confluence/display/KAFKA/KIP-456\n> > > >>>>>>>>>>>>>>>>\n> > > >>>>>>>>>>>>>>>\n> > > >>>>>>>>>>>>>\n> > > >>>>>>>>>>>\n> > > >>>>>>>>>\n> > > >>>>>>>>\n> > > >>>>>>>\n> > > >>>>>>\n> > > >>>>\n> > > >>>\n> > > >>\n> > >\n> >\n> %3A+Helper+classes+to+make+it+simpler+to+write+test+logic+with+TopologyTestDriver\n> > > >>>>>>>>>>>>>>>>\n> > > >>>>>>>>>>>>>>>>\n> > > >>>>>>>>>>>>>>>> The proposal in KIP-456\n> > > >>>>>>>>>>>>>>>> <\n> > > >>>>>>>>>>>>>>>\n> > > >>>>>>>>>>>>>\n> > > >>>>>>>>>>>\n> > > >>>>>>>>>\n> > > >>>>>>>>\n> > > >>>>>>>\n> > > >>>>>>\n> > > >>>>\n> > > >>>\n> > > >>\n> > >\n> >\n> https://cwiki.apache.org/confluence/display/KAFKA/KIP-456%3A+Helper+classes+to+make+it+simpler+to+write+test+logic+with+TopologyTestDriver\n> > > >>>>>>>>>>>>>>>>\n> > > >>>>>>>>>>>>>>>> was\n> > > >>>>>>>>>>>>>>>> to add alternate way to input and output topic, but\n> > > >>>>>> this\n> > > >>>>>>>> KIP\n> > > >>>>>>>>>>> enhance\n> > > >>>>>>>>>>>>>>> those\n> > > >>>>>>>>>>>>>>>> classes and deprecate old functionality to make clear\n> > > >>>>>>>>> interface\n> > > >>>>>>>>>>> for\n> > > >>>>>>>>>>>>> test\n> > > >>>>>>>>>>>>>>>> writer to use.\n> > > >>>>>>>>>>>>>>>>\n> > > >>>>>>>>>>>>>>>> In current KIP-470 proposal, topic objects are created\n> > > >>>>>>> with\n> > > >>>>>>>>>>>>> topicName and\n> > > >>>>>>>>>>>>>>>> related serders.\n> > > >>>>>>>>>>>>>>>>     public final <K, V> TestInputTopic<K, V>\n> > > >>>>>>>>>>> createInputTopic(final\n> > > >>>>>>>>>>>>>>> String\n> > > >>>>>>>>>>>>>>>> topicName, final Serde<K> keySerde, final Serde<V>\n> > > >>>>>>>>> valueSerde);\n> > > >>>>>>>>>>>>>>>>     public final <K, V> TestOutputTopic<K, V>\n> > > >>>>>>>>>>> createOutputTopic(final\n> > > >>>>>>>>>>>>>>> String\n> > > >>>>>>>>>>>>>>>> topicName, final Serde<K> keySerde, final Serde<V>\n> > > >>>>>>>>> valueSerde);\n> > > >>>>>>>>>>>>>>>> One thing I wondered if there way to find out topic\n> > > >>>>>>> related\n> > > >>>>>>>>> serde\n> > > >>>>>>>>>>>>> from\n> > > >>>>>>>>>>>>>>>> TopologyTestDriver topology, it would simply creation\n> > > >>>>>> of\n> > > >>>>>>>>> these\n> > > >>>>>>>>>>> Topic\n> > > >>>>>>>>>>>>>>>> objects:\n> > > >>>>>>>>>>>>>>>>     public final <K, V> TestInputTopic<K, V>\n> > > >>>>>>>>>>> createInputTopic(final\n> > > >>>>>>>>>>>>>>> String\n> > > >>>>>>>>>>>>>>>> topicName);\n> > > >>>>>>>>>>>>>>>>     public final <K, V> TestOutputTopic<K, V>\n> > > >>>>>>>>>>> createOutputTopic(final\n> > > >>>>>>>>>>>>>>> String\n> > > >>>>>>>>>>>>>>>> topicName);\n> > > >>>>>>>>>>>>>>>>\n> > > >>>>>>>>>>>>>>>> KIP-456 can be discarded if this KIP get accepted.\n> > > >>>>>>>>>>>>>>>>\n> > > >>>>>>>>>>>>>>>>\n> > > >>>>>>>>>>>>>>>> Best Regards,\n> > > >>>>>>>>>>>>>>>> Jukka\n> > > >>>>>>>>>>>>>>>\n> > > >>>>>>>>>>>>>\n> > > >>>>>>>>>>>\n> > > >>>>>>>>>\n> > > >>>>>>>>\n> > > >>>>>>>>\n> > > >>>>>>>> --\n> > > >>>>>>>> -- Guozhang\n> > > >>>>>>>>\n> > > >>>>>>>\n> > > >>>>>>\n> > > >>>>>>\n> > > >>>>>> --\n> > > >>>>>> -- Guozhang\n> > > >>>>>>\n> > > >>>>>\n> > > >>>>\n> > > >>>>\n> > > >>>\n> > > >>\n> > > >\n> > >\n> > >\n> >\n>\n"
        },
        "unixfrom": "dev-return-106217-apmail-kafka-dev-archive=kafka.apache.org@kafka.apache.org  Thu Aug  1 14:42:35 2019"
    },
    "origin": "nitish_box",
    "perceval_version": "0.14.0",
    "search_fields": {
        "item_id": "<CAF7WS+o+s+kT89a0mFyH+eWTS3WMdjBKRPMcUJ8QmFi1wih52Q@mail.gmail.com>"
    },
    "tag": "nitish_box",
    "timestamp": 1588015221.721787,
    "updated_on": 1564670523.0,
    "uuid": "31304d4418a0df6e10adf26a10ca38a2e147a76e"
},{
    "backend_name": "MBox",
    "backend_version": "0.13.0",
    "category": "message",
    "classified_fields_filtered": null,
    "data": {
        "Authentication-Results": "spamd4-us-west.apache.org (amavisd-new);\n\tdkim=pass (2048-bit key) header.d=confluent.io",
        "Content-Type": "multipart/alternative; boundary=\"000000000000e818fc058f12d74d\"",
        "DKIM-Signature": "v=1; a=rsa-sha256; c=relaxed/relaxed;\n        d=confluent.io; s=google;\n        h=mime-version:references:in-reply-to:from:date:message-id:subject:to;\n        bh=i2e9+M6/fgNmArsbxr4by4HQ87uL3bo6l3LD4hwM/o8=;\n        b=U2oc+MXtlQ2fXPZJAmZ06rC4F7KRQEqlfEWAu0YrXKbzxw8WzKgOe9z6zINE5wr0Hv\n         bCRhCQjy2DuxuYdQutCzlwx9SEucRL7wOSgYvUmGy4WXr/6+CUn3xAhGaFXX3UvevRN6\n         3uSjynr3abp6HuGdcbhyc4CjuGrHPi42+x9Gku4e0Va4S9G/MEZqnRdPCRplqJdxpiwM\n         U/MBqdEQirJNQLr86fqMAyFAmBYL24HwnGlI9hJAesq+NbJnhVFO+//MS17zi5irEVFk\n         ZQj1bE81nazPCK1GC6yEX4auyqpLgsdWE6q5TujyNP8iWs6YtOdn6S1ZRBvfss7F/rvz\n         p9xQ==",
        "Date": "Thu, 1 Aug 2019 11:59:26 -0700",
        "Delivered-To": "mailing list dev@kafka.apache.org",
        "From": "Jun Rao <jun@confluent.io>",
        "In-Reply-To": "<ab513ff6-c97a-4110-9472-72a67e67e3ae@www.fastmail.com>",
        "List-Help": "<mailto:dev-help@kafka.apache.org>",
        "List-Id": "<dev.kafka.apache.org>",
        "List-Post": "<mailto:dev@kafka.apache.org>",
        "List-Unsubscribe": "<mailto:dev-unsubscribe@kafka.apache.org>",
        "MIME-Version": "1.0",
        "Mailing-List": "contact dev-help@kafka.apache.org; run by ezmlm",
        "Message-ID": "<CAFc58G92ngQrnQg7Xz78o6MjS2spQ-JH9DaE_DoxN1R3s4CBeg@mail.gmail.com>",
        "Precedence": "bulk",
        "Received": "by mail-qt1-x842.google.com with SMTP id z4so71423566qtc.3\n        for <dev@kafka.apache.org>; Thu, 01 Aug 2019 11:59:44 -0700 (PDT)",
        "Received-SPF": "Pass (mailfrom) identity=mailfrom; client-ip=2607:f8b0:4864:20::842; helo=mail-qt1-x842.google.com; envelope-from=jun@confluent.io; receiver=<UNKNOWN> ",
        "References": "<24f4660e-ac91-4b9d-b81a-6f69d019d145@www.fastmail.com>\n <CAA9QSJJW4zkEFkzzq8-kumjRT0bd-vRFzzTB2deY_7FZdPGsGw@mail.gmail.com>\n <CAJDuW=D=7FfGHJYyLgCDJy3iNYJoUyYF9QWW_Dqch19J7Y=4AQ@mail.gmail.com>\n <499647c5-806f-46a6-b12f-5349cf1d6082@www.fastmail.com> <9624dce8-0e16-428c-90fc-90da707e2737@www.fastmail.com>\n <1867601726.578961.1557875742921@mail.yahoo.com> <cec5257e-3ef5-47df-982f-26c1e184d453@www.fastmail.com>\n <1714711084.3309489.1558484144620@mail.yahoo.com> <36f90f94-9322-474f-b2c0-877c6b0a7d4d@www.fastmail.com>\n <CANZZNGwhaM2-NBKmhC1gZi1mUdF_7ZMDM7KtAi9kE-4xkeqX=w@mail.gmail.com>\n <909fbcfb-b440-4b8d-a58e-4056bb8b439b@www.fastmail.com> <CAJDuW=AsZ+SMQtwqNYx-0jNMFFD87TPuPa_bZeotGxvdnWvp4g@mail.gmail.com>\n <CAA9QSJKM9m0Kcif094YojQPJT0-+LQtit+_Q_LCcqT3U_38-Zg@mail.gmail.com>\n <37071079.2113589.1563497289422@mail.yahoo.com> <CAO4VHgTDPiDMRvOAnG-hM6jRTvD9W9ki4ktJ_Xk2pTUFQH3XbQ@mail.gmail.com>\n <e6022b55-87a7-4211-9e2a-7531fd79a4a7@www.fastmail.com> <CAFc58G90YV=YhKqOhXSeYDCgvy599mWmvNLhznD-9etHRBueZg@mail.gmail.com>\n <CANZZNGwL-QqQawBaG7maMRdt09_P2jzef3vfPZ0NFde3oEZbag@mail.gmail.com>\n <CAFc58G8VLUv1SbTt4EO2H-JhVKx2q9wiZb_Y_p9gVdhBwNaTrA@mail.gmail.com> <ab513ff6-c97a-4110-9472-72a67e67e3ae@www.fastmail.com>",
        "Reply-To": "dev@kafka.apache.org",
        "Return-Path": "<dev-return-106224-apmail-kafka-dev-archive=kafka.apache.org@kafka.apache.org>",
        "Subject": "Re: [VOTE] KIP-455: Create an Administrative API for Replica Reassignment",
        "To": "dev <dev@kafka.apache.org>",
        "X-Gm-Message-State": "APjAAAWHtUxyAduv4jjFe5kqU+QBZpI3rVpjJk5uoYYos0dUQWxvckpH\n\t5FdsmYcNfwtDajoixDNzCm1VZnGBbHe+CSBajcCLMgH8",
        "X-Google-DKIM-Signature": "v=1; a=rsa-sha256; c=relaxed/relaxed;\n        d=1e100.net; s=20161025;\n        h=x-gm-message-state:mime-version:references:in-reply-to:from:date\n         :message-id:subject:to;\n        bh=i2e9+M6/fgNmArsbxr4by4HQ87uL3bo6l3LD4hwM/o8=;\n        b=P2IsSWXOsDQGMdEUJ2vvPN5O7ZTZc9v/h4A6nMLlWj2hegqiW6EjrF1SulOCV3CLru\n         mEQg+uJf/6TH/R681srdA2q0vA7CHdAUuL101JJA4dRuZlCCeBWiggd3qhPUXqLu4vgD\n         IbEGs7+2Dc51d9zfTmRqLcKXrgOj7lYK0YfxPZhCb21VWjW4v4dAMLlnDRtil/iLp3Zz\n         nyziQukZyeZnY3f1O1I/ebasN/CtSbjx8zOWaRKeL3Uj7w3RhdT0zb1yMGcszIohjK/E\n         lqG1d68yo4otmFPVuIxjFwkl7pfKwzthrZaUdM5y285DU2mwEg5cPfPjWKiJkKm+I0sD\n         8LQA==",
        "X-Google-Smtp-Source": "APXvYqzyHTYTCFe1ckrb57diTGBUM/VntDXLIjvVKukzTDnmW6OOjaDtTATV0tVADI8YGURy7zK4Vzb5jEj8FAMeeHg=",
        "X-Original-To": "apmail-kafka-dev-archive@www.apache.org",
        "X-Received": "by 2002:ac8:252e:: with SMTP id 43mr91623748qtm.61.1564685978041;\n Thu, 01 Aug 2019 11:59:38 -0700 (PDT)",
        "X-Spam-Flag": "NO",
        "X-Spam-Level": "****",
        "X-Spam-Score": "4.801",
        "X-Spam-Status": "No, score=4.801 tagged_above=-999 required=6.31\n\ttests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,\n\tDKIM_VALID_EF=-0.1, HTML_MESSAGE=2, KAM_TIME=3,\n\tRCVD_IN_DNSWL_NONE=-0.0001, SPF_HELO_NONE=0.001, SPF_PASS=-0.001,\n\tURIBL_BLOCKED=0.001] autolearn=disabled",
        "X-Virus-Scanned": "Debian amavisd-new at spamd4-us-west.apache.org",
        "body": {
            "plain": "Hi, Colin,\n\n10. Sounds good.\n\n13. Our current convention is to bump up the version of ZK value if there\nis any format change. For example, we have bumped up the version of the\nvalue in /brokers/ids/nnn multiple times and all of those changes are\ncompatible (just adding new fields). This has the slight benefit that it\nmakes it clear there is a format change. Rolling upgrades and downgrades\ncan still be supported with the version bump. For example, if you downgrade\nfrom a compatible change, you can leave the new format in ZK and the old\ncode will only pick up fields relevant to the old version. Upgrade will be\ncontrolled by inter broker protocol.\n\nThanks,\n\nJun\n\nOn Wed, Jul 31, 2019 at 1:22 PM Colin McCabe <cmccabe@apache.org> wrote:\n\n> Hi Jun,\n>\n> Thanks for taking another look at this.\n>\n> On Wed, Jul 31, 2019, at 09:22, Jun Rao wrote:\n> > Hi, Stan,\n> >\n> > Thanks for the explanation.\n> >\n> > 10. If those new fields in LeaderAndIsr are only needed for future work,\n> > perhaps they should be added when we do the future work instead of now?\n>\n> I think this ties in with one of the big goals of this KIP, making it\n> possible to distinguish reassigning replicas from normal replicas.  This is\n> the key to follow-on work like being able to ensure that partitions with a\n> reassignment don't get falsely flagged as under-replicated in the metrics,\n> or implementing reassignment quotas that don't accidentally affect normal\n> replication traffic when a replica falls out of the ISR.\n>\n> For these follow-on improvements, we need to have that information in\n> LeaderAndIsrRequest.  We could add the information in a follow-on KIP, of\n> course, but then all the improvements are blocked on that follow-on KIP.\n> That would slow things down for all of the downstream KIPs that are blocked\n> on this.\n>\n> Also, to keep things consistent, I think it would be best if the format of\n> the data in the LeaderAndIsrRequest matched the format of the data in\n> ZooKeeper.  Since we're deciding on the ZK format in this KIP, I think it\n> makes sense to also decide on the format in the LeaderAndIsrRequest.\n>\n> > > > Should we include those two fields in UpdateMetadata and potentially\n> > > > Metadata requests too?\n>\n> We had some discussion earlier about how metadata responses to clients are\n> getting too large, in part because they include a lot of information that\n> most clients don't need (such as the ISR).  I think reassignment\n> information definitely falls in the category of something a client doesn't\n> need to know, so we shouldn't include it.\n>\n> A program like CruiseControl, or the command-line reassignment program,\n> just wants to get the most up-to-date information about the state of\n> reassigning partitions.  The MetadataRequest API wouldn't deliver that,\n> because there are inherently delays in how we propagate metadata to\n> brokers.  That's why the ListPartitionReassignments API is a better choice\n> for those programs.  So I think if we added this information to the\n> MetadataResponse, nobody would actually use it, and it would just use up\n> more bandwidth.\n>\n> Of course, we can always revisit this later if we find a scenario where a\n> producer or consumer would actually care about this.  But I think we should\n> default to not adding stuff to the metadata response if we don't have a\n> good use case in mind.\n>\n> > > > 11. \"If a new reassignment is issued during an on-going one, we\n> cancel the\n> > > > current one by emptying out both AR and RR, constructing them from\n> (the\n> > > > updated from the last-reassignment) R and TR, and starting anew.\" In\n> this\n> > > > case, it seems that the controller needs to issue a StopReplica\n> request to\n> > > > remove those unneeded replicas.\n>\n> Good catch.  Yes, we should document this in the  KIP.\n>\n> > > > 12. \"Essentially, once a cancellation is called we subtract AR from\n> R,\n> > > > empty out both AR and RR, and send LeaderAndIsr requests to cancel\n> the\n> > > > replica movements that have not yet completed.\" Similar to the\n> above, it\n> > > > seems the controller needs to issue a StopReplica request to remove\n> those\n> > > > unneeded replicas.\n>\n> Right.  Let's add this.\n>\n> > > > 13. Since we changed the format of the topics/[topic] zNode, should\n> we bump\n> > > > up the version number in the json value?\n>\n> The change to the zNode is backwards compatible, though.  Older brokers\n> will continue to work, but just ignore the new fields.  If we bump that\n> version number, then downgrades will require hand-editing zookeeper.  (Of\n> course downgrade isn't officially supported, but it would be nice not to\n> break it if we don't need to...)  Changing the version number would also\n> create problems during a rolling upgrade.\n>\n> best,\n> Colin\n>\n> > > >\n> > > > Jun\n> > > >\n> > > > On Mon, Jul 22, 2019 at 8:38 AM Colin McCabe <cmccabe@apache.org>\n> wrote:\n> > > >\n> > > > > Hi all,\n> > > > >\n> > > > > With three non-binding +1 votes from Viktor Somogyi-Vass, Robert\n> > > Barrett,\n> > > > > and George Li, and 3 binding +1 votes from Gwen Shapira, Jason\n> > > Gustafson,\n> > > > > and myself, the vote passes.  Thanks, everyone!\n> > > > >\n> > > > > best,\n> > > > > Colin\n> > > > >\n> > > > > On Fri, Jul 19, 2019, at 08:55, Robert Barrett wrote:\n> > > > > > +1 (non-binding). Thanks for the KIP!\n> > > > > >\n> > > > > > On Thu, Jul 18, 2019 at 5:59 PM George Li <\n> sql_consulting@yahoo.com\n> > > > > .invalid>\n> > > > > > wrote:\n> > > > > >\n> > > > > > >  +1 (non-binding)\n> > > > > > >\n> > > > > > >\n> > > > > > >\n> > > > > > > Thanks for addressing the comments.\n> > > > > > > George\n> > > > > > >\n> > > > > > >     On Thursday, July 18, 2019, 05:03:58 PM PDT, Gwen Shapira <\n> > > > > > > gwen@confluent.io> wrote:\n> > > > > > >\n> > > > > > >  Renewing my +1, thank you Colin and Stan for working through\n> all\n> > > the\n> > > > > > > questions, edge cases, requests and alternatives. We ended up\n> with\n> > > a\n> > > > > > > great protocol.\n> > > > > > >\n> > > > > > > On Thu, Jul 18, 2019 at 4:54 PM Jason Gustafson <\n> > > jason@confluent.io>\n> > > > > > > wrote:\n> > > > > > > >\n> > > > > > > > +1 Thanks for the KIP. Really looking forward to this!\n> > > > > > > >\n> > > > > > > > -Jason\n> > > > > > > >\n> > > > > > > > On Wed, Jul 17, 2019 at 1:41 PM Colin McCabe <\n> cmccabe@apache.org\n> > > >\n> > > > > wrote:\n> > > > > > > >\n> > > > > > > > > Thanks, Stanislav.  Let's restart the vote to reflect the\n> fact\n> > > > that\n> > > > > > > we've\n> > > > > > > > > made significant changes.  The new vote will go for 3 days\n> as\n> > > > > usual.\n> > > > > > > > >\n> > > > > > > > > I'll start with my +1 (binding).\n> > > > > > > > >\n> > > > > > > > > best,\n> > > > > > > > > Colin\n> > > > > > > > >\n> > > > > > > > >\n> > > > > > > > > On Wed, Jul 17, 2019, at 08:56, Stanislav Kozlovski wrote:\n> > > > > > > > > > Hey everybody,\n> > > > > > > > > >\n> > > > > > > > > > We have further iterated on the KIP in the accompanying\n> > > > > discussion\n> > > > > > > thread\n> > > > > > > > > > and I'd like to propose we resume the vote.\n> > > > > > > > > >\n> > > > > > > > > > Some notable changes:\n> > > > > > > > > > - we will store reassignment information in the\n> > > > > > > `/brokers/topics/[topic]`\n> > > > > > > > > > - we will internally use two collections to represent a\n> > > > > reassignment\n> > > > > > > -\n> > > > > > > > > > \"addingReplicas\" and \"removingReplicas\". LeaderAndIsr has\n> > > been\n> > > > > > > updated\n> > > > > > > > > > accordingly\n> > > > > > > > > > - the Alter API will still use the \"targetReplicas\"\n> > > collection,\n> > > > > but\n> > > > > > > the\n> > > > > > > > > > List API will now return three separate collections - the\n> > > full\n> > > > > > > replica\n> > > > > > > > > set,\n> > > > > > > > > > the replicas we are adding as part of this reassignment\n> > > > > > > > > (\"addingReplicas\")\n> > > > > > > > > > and the replicas we are removing (\"removingReplicas\")\n> > > > > > > > > > - cancellation of a reassignment now means a proper\n> rollback\n> > > of\n> > > > > the\n> > > > > > > > > > assignment to its original state prior to the API call\n> > > > > > > > > >\n> > > > > > > > > > As always, you can re-read the KIP here\n> > > > > > > > > >\n> > > > > > > > >\n> > > > > > >\n> > > > >\n> > > >\n> > >\n> https://cwiki.apache.org/confluence/display/KAFKA/KIP-455%3A+Create+an+Administrative+API+for+Replica+Reassignment\n> > > > > > > > > >\n> > > > > > > > > > Best,\n> > > > > > > > > > Stanislav\n> > > > > > > > > >\n> > > > > > > > > > On Wed, May 22, 2019 at 6:12 PM Colin McCabe <\n> > > > cmccabe@apache.org\n> > > > > >\n> > > > > > > wrote:\n> > > > > > > > > >\n> > > > > > > > > > > Hi George,\n> > > > > > > > > > >\n> > > > > > > > > > > Thanks for taking a look.  I am working on getting a PR\n> > > done\n> > > > > as a\n> > > > > > > > > > > proof-of-concept.  I'll post it soon.  Then we'll\n> finish up\n> > > > the\n> > > > > > > vote.\n> > > > > > > > > > >\n> > > > > > > > > > > best,\n> > > > > > > > > > > Colin\n> > > > > > > > > > >\n> > > > > > > > > > > On Tue, May 21, 2019, at 17:33, George Li wrote:\n> > > > > > > > > > > >  Hi Colin,\n> > > > > > > > > > > >\n> > > > > > > > > > > >  Great! Looking forward to these features.    +1\n> > > > > (non-binding)\n> > > > > > > > > > > >\n> > > > > > > > > > > > What is the estimated timeline to have this\n> implemented?\n> > > > If\n> > > > > any\n> > > > > > > help\n> > > > > > > > > > > > is needed in the implementation of cancelling\n> > > > > reassignments,  I\n> > > > > > > can\n> > > > > > > > > > > > help if there is spare cycle.\n> > > > > > > > > > > >\n> > > > > > > > > > > >\n> > > > > > > > > > > > Thanks,\n> > > > > > > > > > > > George\n> > > > > > > > > > > >\n> > > > > > > > > > > >\n> > > > > > > > > > > >\n> > > > > > > > > > > >    On Thursday, May 16, 2019, 9:48:56 AM PDT, Colin\n> > > McCabe\n> > > > > > > > > > > > <cmccabe@apache.org> wrote:\n> > > > > > > > > > > >\n> > > > > > > > > > > >  Hi George,\n> > > > > > > > > > > >\n> > > > > > > > > > > > Yes, KIP-455 allows the reassignment of individual\n> > > > > partitions to\n> > > > > > > be\n> > > > > > > > > > > > cancelled.  I think it's very important for these\n> > > > operations\n> > > > > to\n> > > > > > > be at\n> > > > > > > > > > > > the partition level.\n> > > > > > > > > > > >\n> > > > > > > > > > > > best,\n> > > > > > > > > > > > Colin\n> > > > > > > > > > > >\n> > > > > > > > > > > > On Tue, May 14, 2019, at 16:34, George Li wrote:\n> > > > > > > > > > > > >  Hi Colin,\n> > > > > > > > > > > > >\n> > > > > > > > > > > > > Thanks for the updated KIP.  It has very good\n> > > > improvements\n> > > > > of\n> > > > > > > Kafka\n> > > > > > > > > > > > > reassignment operations.\n> > > > > > > > > > > > >\n> > > > > > > > > > > > > One question, looks like the KIP includes the\n> > > > Cancellation\n> > > > > of\n> > > > > > > > > > > > > individual pending reassignments as well when the\n> > > > > > > > > > > > > AlterPartitionReasisgnmentRequest has empty\n> replicas\n> > > for\n> > > > > the\n> > > > > > > > > > > > > topic/partition. Will you also be implementing the\n> the\n> > > > > > > partition\n> > > > > > > > > > > > > cancellation/rollback in the PR ?    If yes,  it\n> will\n> > > > make\n> > > > > > > KIP-236\n> > > > > > > > > (it\n> > > > > > > > > > > > > has PR already) trivial, since the cancel all\n> pending\n> > > > > > > > > reassignments,\n> > > > > > > > > > > > > one just needs to do a\n> ListPartitionRessignmentRequest,\n> > > > > then\n> > > > > > > submit\n> > > > > > > > > > > > > empty replicas for all those topic/partitions in\n> > > > > > > > > > > > > one AlterPartitionReasisgnmentRequest.\n> > > > > > > > > > > > >\n> > > > > > > > > > > > >\n> > > > > > > > > > > > > Thanks,\n> > > > > > > > > > > > > George\n> > > > > > > > > > > > >\n> > > > > > > > > > > > >    On Friday, May 10, 2019, 8:44:31 PM PDT, Colin\n> > > McCabe\n> > > > > > > > > > > > > <cmccabe@apache.org> wrote:\n> > > > > > > > > > > > >\n> > > > > > > > > > > > >  On Fri, May 10, 2019, at 17:34, Colin McCabe\n> wrote:\n> > > > > > > > > > > > > > On Fri, May 10, 2019, at 16:43, Jason Gustafson\n> > > wrote:\n> > > > > > > > > > > > > > > Hi Colin,\n> > > > > > > > > > > > > > >\n> > > > > > > > > > > > > > > I think storing reassignment state at the\n> partition\n> > > > > level\n> > > > > > > is\n> > > > > > > > > the\n> > > > > > > > > > > right move\n> > > > > > > > > > > > > > > and I also agree that replicas should\n> understand\n> > > that\n> > > > > > > there is\n> > > > > > > > > a\n> > > > > > > > > > > > > > > reassignment in progress. This makes KIP-352 a\n> > > > trivial\n> > > > > > > > > follow-up\n> > > > > > > > > > > for\n> > > > > > > > > > > > > > > example. The only doubt I have is whether the\n> > > leader\n> > > > > and\n> > > > > > > isr\n> > > > > > > > > znode\n> > > > > > > > > > > is the\n> > > > > > > > > > > > > > > right place to store the target reassignment.\n> It\n> > > is a\n> > > > > bit\n> > > > > > > odd\n> > > > > > > > > to\n> > > > > > > > > > > keep the\n> > > > > > > > > > > > > > > target assignment in a separate place from the\n> > > > current\n> > > > > > > > > assignment,\n> > > > > > > > > > > right? I\n> > > > > > > > > > > > > > > assume the thinking is probably that although\n> the\n> > > > > current\n> > > > > > > > > > > assignment should\n> > > > > > > > > > > > > > > probably be in the leader and isr znode as\n> well, it\n> > > > is\n> > > > > > > hard to\n> > > > > > > > > > > move the\n> > > > > > > > > > > > > > > state in a compatible way. Is that right? But\n> if we\n> > > > > have no\n> > > > > > > > > plan\n> > > > > > > > > > > to remove\n> > > > > > > > > > > > > > > the assignment znode, do you see a downside to\n> > > > storing\n> > > > > the\n> > > > > > > > > target\n> > > > > > > > > > > > > > > assignment there as well?\n> > > > > > > > > > > > > > >\n> > > > > > > > > > > > > >\n> > > > > > > > > > > > > > Hi Jason,\n> > > > > > > > > > > > > >\n> > > > > > > > > > > > > > That's a good point -- it's probably better to\n> keep\n> > > the\n> > > > > > > target\n> > > > > > > > > > > > > > assignment in the same znode as the current\n> > > assignment,\n> > > > > for\n> > > > > > > > > > > > > > consistency.  I'll change the KIP.\n> > > > > > > > > > > > >\n> > > > > > > > > > > > > Hi Jason,\n> > > > > > > > > > > > >\n> > > > > > > > > > > > > Thanks again for the review.\n> > > > > > > > > > > > >\n> > > > > > > > > > > > > I took another look at this, and I think we should\n> > > stick\n> > > > > with\n> > > > > > > the\n> > > > > > > > > > > > > initial proposal of putting the reassignment state\n> into\n> > > > > > > > > > > > >\n> /brokers/topics/[topic]/partitions/[partitionId]/state.\n> > > > > The\n> > > > > > > > > reason is\n> > > > > > > > > > > > > because we'll want to bump the leader epoch for the\n> > > > > partition\n> > > > > > > when\n> > > > > > > > > > > > > changing the reassignment state, and the leader\n> epoch\n> > > > > resides\n> > > > > > > in\n> > > > > > > > > that\n> > > > > > > > > > > > > znode anyway.  I agree there is some inconsistency\n> > > here,\n> > > > > but\n> > > > > > > so be\n> > > > > > > > > it:\n> > > > > > > > > > > > > if we were to greenfield these zookeeper data\n> > > structures,\n> > > > > we\n> > > > > > > might\n> > > > > > > > > do\n> > > > > > > > > > > > > it differently, but the proposed scheme will work\n> fine\n> > > > and\n> > > > > be\n> > > > > > > > > > > > > extensible for the future.\n> > > > > > > > > > > > >\n> > > > > > > > > > > > > >\n> > > > > > > > > > > > > > > A few additional questions:\n> > > > > > > > > > > > > > >\n> > > > > > > > > > > > > > > 1. Should `alterPartitionReassignments` be\n> > > > > > > > > > > `alterPartitionAssignments`?\n> > > > > > > > > > > > > > > It's the current assignment we're altering,\n> right?\n> > > > > > > > > > > > > >\n> > > > > > > > > > > > > > That's fair.  AlterPartitionAssigments reads a\n> little\n> > > > > > > better, and\n> > > > > > > > > > > I'll\n> > > > > > > > > > > > > > change it to that.\n> > > > > > > > > > > > >\n> > > > > > > > > > > > > +1.  I've changed the RPC and API name in the wiki.\n> > > > > > > > > > > > >\n> > > > > > > > > > > > > >\n> > > > > > > > > > > > > > > 2. Does this change affect the Metadata API? In\n> > > other\n> > > > > > > words,\n> > > > > > > > > are\n> > > > > > > > > > > clients\n> > > > > > > > > > > > > > > aware of reassignments? If so, then we probably\n> > > need\n> > > > a\n> > > > > > > change\n> > > > > > > > > to\n> > > > > > > > > > > > > > > UpdateMetadata as well. The only alternative I\n> can\n> > > > > think of\n> > > > > > > > > would\n> > > > > > > > > > > be to\n> > > > > > > > > > > > > > > represent the replica set in the Metadata\n> request\n> > > as\n> > > > > the\n> > > > > > > union\n> > > > > > > > > of\n> > > > > > > > > > > the\n> > > > > > > > > > > > > > > current and target replicas, but I can't think\n> of\n> > > any\n> > > > > > > benefit\n> > > > > > > > > to\n> > > > > > > > > > > hiding\n> > > > > > > > > > > > > > > reassignments. Note that if we did this, we\n> > > probably\n> > > > > > > wouldn't\n> > > > > > > > > need\n> > > > > > > > > > > a\n> > > > > > > > > > > > > > > separate API to list reassignments.\n> > > > > > > > > > > > > >\n> > > > > > > > > > > > > > I thought about this a bit... and I think on\n> balance,\n> > > > > you're\n> > > > > > > > > right.\n> > > > > > > > > > > We\n> > > > > > > > > > > > > > should keep this information together with the\n> > > replica\n> > > > > > > nodes, isr\n> > > > > > > > > > > > > > nodes, and offline replicas, and that\n> information is\n> > > > > > > available in\n> > > > > > > > > > > the\n> > > > > > > > > > > > > > MetadataResponse.\n> > > > > > > > > > > > > >  However, I do think in order to do this, we'll\n> need\n> > > a\n> > > > > flag\n> > > > > > > in\n> > > > > > > > > the\n> > > > > > > > > > > > > > MetadataRequest that specifiies \"only show me\n> > > > reassigning\n> > > > > > > > > > > partitions\".\n> > > > > > > > > > > > > > I'll add this.\n> > > > > > > > > > > > >\n> > > > > > > > > > > > > I revisited this, and I think we should stick with\n> the\n> > > > > original\n> > > > > > > > > > > > > proposal of having a separate\n> > > ListPartitionReassignments\n> > > > > API.\n> > > > > > > > > There\n> > > > > > > > > > > > > really is no use case where the Producer or\n> Consumer\n> > > > needs\n> > > > > to\n> > > > > > > know\n> > > > > > > > > > > > > about a reassignment.  They should just be notified\n> > > when\n> > > > > the\n> > > > > > > set of\n> > > > > > > > > > > > > partitions changes, which doesn't require changes\n> to\n> > > > > > > > > > > > > MetadataRequest/Response.  The Admin client only\n> cares\n> > > if\n> > > > > > > someone\n> > > > > > > > > is\n> > > > > > > > > > > > > managing the reassignment.  So adding this state\n> to the\n> > > > > > > > > > > > > MetadataResponse adds overhead for no real\n> benefit.  In\n> > > > the\n> > > > > > > common\n> > > > > > > > > > > case\n> > > > > > > > > > > > > where there is no ongoing reassignment, it would\n> be 4\n> > > > > bytes per\n> > > > > > > > > > > > > partition of extra overhead in the\n> MetadataResponse.\n> > > > > > > > > > > > >\n> > > > > > > > > > > > > In general, I think we have a problem of\n> oversharing in\n> > > > the\n> > > > > > > > > > > > > MetadataRequest/Response.  As we 10x or 100x the\n> number\n> > > > of\n> > > > > > > > > partitions\n> > > > > > > > > > > > > we support, we'll need to get stricter about giving\n> > > > clients\n> > > > > > > only\n> > > > > > > > > the\n> > > > > > > > > > > > > information they actually need, about the\n> partitions\n> > > they\n> > > > > > > actually\n> > > > > > > > > > > care\n> > > > > > > > > > > > > about.  Reassignment state clearly falls in the\n> > > category\n> > > > of\n> > > > > > > state\n> > > > > > > > > that\n> > > > > > > > > > > > > isn't needed by clients (except very specialized\n> > > > > rebalancing\n> > > > > > > > > programs).\n> > > > > > > > > > > > >\n> > > > > > > > > > > > > Another important consideration here is that\n> someone\n> > > > > managing\n> > > > > > > an\n> > > > > > > > > > > > > ongoing reassignment wants the most up-to-date\n> > > > information,\n> > > > > > > which\n> > > > > > > > > is\n> > > > > > > > > > > to\n> > > > > > > > > > > > > be found on the controller.  Therefore adding this\n> > > state\n> > > > to\n> > > > > > > > > listTopics\n> > > > > > > > > > > > > or describeTopics, which could contact any node in\n> the\n> > > > > > > cluster, is\n> > > > > > > > > > > > > sub-optimal.\n> > > > > > > > > > > > >\n> > > > > > > > > > > > > Finally, adding this to listTopics or\n> describeTopics\n> > > > feels\n> > > > > > > like a\n> > > > > > > > > > > warty\n> > > > > > > > > > > > > API.  It's an extra boolean which interacts with\n> other\n> > > > > extra\n> > > > > > > > > booleans\n> > > > > > > > > > > > > like \"show internal\", etc. in weird ways.  I think\n> a\n> > > > > separate\n> > > > > > > API\n> > > > > > > > > is\n> > > > > > > > > > > > > cleaner.\n> > > > > > > > > > > > >\n> > > > > > > > > > > > > >\n> > > > > > > > > > > > > > > 3. As replicas come into sync, they will join\n> the\n> > > > ISR.\n> > > > > > > Will we\n> > > > > > > > > > > await all\n> > > > > > > > > > > > > > > target replicas joining the ISR before taking\n> the\n> > > > > replica\n> > > > > > > out\n> > > > > > > > > of\n> > > > > > > > > > > the target\n> > > > > > > > > > > > > > > replicas set? Also, I assume that target\n> replicas\n> > > can\n> > > > > > > still be\n> > > > > > > > > > > elected as\n> > > > > > > > > > > > > > > leader?\n> > > > > > > > > > > > > >\n> > > > > > > > > > > > > > We'll take a replica out of the target replicas\n> set\n> > > as\n> > > > > soon\n> > > > > > > as\n> > > > > > > > > that\n> > > > > > > > > > > > > > replica is in the ISR.  Let me clarify this in\n> the\n> > > KIP.\n> > > > > > > > > > > > > >\n> > > > > > > > > > > > > > > 4. Probably useful to mention permissions for\n> the\n> > > new\n> > > > > APIs.\n> > > > > > > > > > > > > >\n> > > > > > > > > > > > > > Good point.  I think alterPartitionAssignments\n> should\n> > > > > require\n> > > > > > > > > ALTER\n> > > > > > > > > > > on\n> > > > > > > > > > > > > > CLUSTER.  MetadataRequest permissions will be\n> > > > unchanged.\n> > > > > > > > > > > > >\n> > > > > > > > > > > > > I added permission information.\n> > > > > > > > > > > > >\n> > > > > > > > > > > > > best,\n> > > > > > > > > > > > > Colin\n> > > > > > > > > > > > >\n> > > > > > > > > > > > > >\n> > > > > > > > > > > > > > best,\n> > > > > > > > > > > > > > Colin\n> > > > > > > > > > > > > >\n> > > > > > > > > > > > > > >\n> > > > > > > > > > > > > > > Thanks,\n> > > > > > > > > > > > > > > Jason\n> > > > > > > > > > > > > > >\n> > > > > > > > > > > > > > > On Fri, May 10, 2019 at 9:30 AM Gwen Shapira <\n> > > > > > > > > gwen@confluent.io>\n> > > > > > > > > > > wrote:\n> > > > > > > > > > > > > > >\n> > > > > > > > > > > > > > > > +1 (binding)\n> > > > > > > > > > > > > > > > Looks great, and will be awesome to have\n> this new\n> > > > > > > capability.\n> > > > > > > > > > > > > > > >\n> > > > > > > > > > > > > > > > On Wed, May 8, 2019 at 10:23 PM Colin McCabe\n> <\n> > > > > > > > > cmccabe@apache.org>\n> > > > > > > > > > > wrote:\n> > > > > > > > > > > > > > > >\n> > > > > > > > > > > > > > > > > Hi all,\n> > > > > > > > > > > > > > > > >\n> > > > > > > > > > > > > > > > > I'd like to start the vote for KIP-455:\n> Create\n> > > an\n> > > > > > > > > > > Administrative API for\n> > > > > > > > > > > > > > > > > Replica Reassignment.  I think this KIP is\n> > > > > important\n> > > > > > > since\n> > > > > > > > > it\n> > > > > > > > > > > will unlock\n> > > > > > > > > > > > > > > > > many follow-on improvements to Kafka\n> > > reassignment\n> > > > > (see\n> > > > > > > the\n> > > > > > > > > > > \"Future work\"\n> > > > > > > > > > > > > > > > > section, plus a lot of the other\n> discussions\n> > > > we've\n> > > > > had\n> > > > > > > > > > > recently about\n> > > > > > > > > > > > > > > > > reassignment).  It also furthers the\n> important\n> > > > > KIP-4\n> > > > > > > goal\n> > > > > > > > > of\n> > > > > > > > > > > removing\n> > > > > > > > > > > > > > > > > direct access to ZK.\n> > > > > > > > > > > > > > > > >\n> > > > > > > > > > > > > > > > > I made a few changes based on the\n> discussion in\n> > > > the\n> > > > > > > > > [DISCUSS]\n> > > > > > > > > > > thread.  As\n> > > > > > > > > > > > > > > > > Robert suggested, I removed the need to\n> > > > explicitly\n> > > > > > > cancel a\n> > > > > > > > > > > reassignment\n> > > > > > > > > > > > > > > > > for a partition before setting up a\n> different\n> > > > > > > reassignment\n> > > > > > > > > for\n> > > > > > > > > > > that\n> > > > > > > > > > > > > > > > > specific partition.  I also simplified the\n> API\n> > > a\n> > > > > bit by\n> > > > > > > > > adding\n> > > > > > > > > > > a\n> > > > > > > > > > > > > > > > > PartitionReassignment class which is used\n> by\n> > > both\n> > > > > the\n> > > > > > > alter\n> > > > > > > > > > > and list\n> > > > > > > > > > > > > > > > APIs.\n> > > > > > > > > > > > > > > > >\n> > > > > > > > > > > > > > > > > I modified the proposal so that we now\n> > > deprecate\n> > > > > the\n> > > > > > > old\n> > > > > > > > > > > znode-based API\n> > > > > > > > > > > > > > > > > rather than removing it completely.  That\n> > > should\n> > > > > give\n> > > > > > > > > external\n> > > > > > > > > > > > > > > > rebalancing\n> > > > > > > > > > > > > > > > > tools some time to transition to the new\n> API.\n> > > > > > > > > > > > > > > > >\n> > > > > > > > > > > > > > > > > To clarify a question Viktor asked, I\n> added a\n> > > > note\n> > > > > > > that the\n> > > > > > > > > > > > > > > > > kafka-reassign-partitions.sh will now use a\n> > > > > > > > > --bootstrap-server\n> > > > > > > > > > > argument\n> > > > > > > > > > > > > > > > to\n> > > > > > > > > > > > > > > > > contact the admin APIs.\n> > > > > > > > > > > > > > > > >\n> > > > > > > > > > > > > > > > > thanks,\n> > > > > > > > > > > > > > > > > Colin\n> > > > > > > > > > > > > > > > >\n> > > > > > > > > > > > > > > >\n> > > > > > > > > > > > > > > >\n> > > > > > > > > > > > > > > > --\n> > > > > > > > > > > > > > > > *Gwen Shapira*\n> > > > > > > > > > > > > > > > Product Manager | Confluent\n> > > > > > > > > > > > > > > > 650.450.2760 | @gwenshap\n> > > > > > > > > > > > > > > > Follow us: Twitter <\n> > > > https://twitter.com/ConfluentInc>\n> > > > > |\n> > > > > > > blog\n> > > > > > > > > > > > > > > > <http://www.confluent.io/blog>\n> > > > > > > > > > > > > > > >\n> > > > > > > > > > > > > > >\n> > > > > > > > > > > > > >\n> > > > > > > > > > > > >\n> > > > > > > > > > >\n> > > > > > > > > >\n> > > > > > > > >\n> > > > > > >\n> > > > > > >\n> > > > > > >\n> > > > > > > --\n> > > > > > > Gwen Shapira\n> > > > > > > Product Manager | Confluent\n> > > > > > > 650.450.2760 | @gwenshap\n> > > > > > > Follow us: Twitter | blog\n> > > > > > >\n> > > > > >\n> > > > >\n> > > >\n> > >\n> >\n>\n"
        },
        "unixfrom": "dev-return-106224-apmail-kafka-dev-archive=kafka.apache.org@kafka.apache.org  Thu Aug  1 18:59:56 2019"
    },
    "origin": "nitish_box",
    "perceval_version": "0.14.0",
    "search_fields": {
        "item_id": "<CAFc58G92ngQrnQg7Xz78o6MjS2spQ-JH9DaE_DoxN1R3s4CBeg@mail.gmail.com>"
    },
    "tag": "nitish_box",
    "timestamp": 1588015221.7502,
    "updated_on": 1564685966.0,
    "uuid": "6176aee62a08f2e4d8b2cec19a6950c9f7d88f48"
},{
    "backend_name": "MBox",
    "backend_version": "0.13.0",
    "category": "message",
    "classified_fields_filtered": null,
    "data": {
        "Authentication-Results": "spamd1-us-west.apache.org (amavisd-new);\n\tdkim=pass (2048-bit key) header.d=gmail.com",
        "Content-Transfer-Encoding": "quoted-printable",
        "Content-Type": "text/plain;\n\tcharset=utf-8",
        "DKIM-Signature": "v=1; a=rsa-sha256; c=relaxed/relaxed;\n        d=gmail.com; s=20161025;\n        h=from:content-transfer-encoding:mime-version:subject:date:references\n         :to:in-reply-to:message-id;\n        bh=iB9YyNok+thJWNNvcrLquI34ZWkery8etVRXFUbq7ss=;\n        b=krWYDy+sD/Yh6XQMONHDPdJK5KMsd3mNQL6+uillKeZYEJqzbQtBjWZCR1mkunyaLp\n         giMD0TefQx0KVzlpkZxKNCSS0uhZB0cY2f9V5TzGGKWZOzFS5Tw+glKRlzF6F08b3anO\n         JBRlpFBO3girnT6uOeMlugNsxqMbweketcJcyN1BjC5OGCpg7wha5ZY6dnfBGwROSVWH\n         8syJIPs+k0PCpjWyMM8YMO+1PNXtEKge8FccvooxtLO9Rttzh3AUMpdO3uW4gURWOyjU\n         V0ST6+dg8qZYRUSx3r1Tzdr0Opl6nq6EEMUPkcJrwAMZn71PVMfaYjvgVdMBr77fmQ3E\n         67AQ==",
        "Date": "Thu, 1 Aug 2019 09:55:45 +0300",
        "Delivered-To": "mailing list dev@kafka.apache.org",
        "From": "Levani Kokhreidze <levani.codes@gmail.com>",
        "In-Reply-To": "<5e62d2c2-cad5-c207-820a-37fca2fe169c@confluent.io>",
        "List-Help": "<mailto:dev-help@kafka.apache.org>",
        "List-Id": "<dev.kafka.apache.org>",
        "List-Post": "<mailto:dev@kafka.apache.org>",
        "List-Unsubscribe": "<mailto:dev-unsubscribe@kafka.apache.org>",
        "Mailing-List": "contact dev-help@kafka.apache.org; run by ezmlm",
        "Message-ID": "<F3C6ADC0-492D-442A-8A02-258361AD706C@gmail.com>",
        "Mime-Version": "1.0 (Mac OS X Mail 12.4 \\(3445.104.11\\))",
        "Precedence": "bulk",
        "Received": "from [10.29.0.28] ([178.162.192.10])\n        by smtp.gmail.com with ESMTPSA id x83sm79438957wmb.42.2019.07.31.23.55.46\n        for <dev@kafka.apache.org>\n        (version=TLS1_2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);\n        Wed, 31 Jul 2019 23:55:46 -0700 (PDT)",
        "Received-SPF": "Pass (mailfrom) identity=mailfrom; client-ip=2a00:1450:4864:20::436; helo=mail-wr1-x436.google.com; envelope-from=levani.codes@gmail.com; receiver=<UNKNOWN> ",
        "References": "<258921E7-3756-433B-89EA-4708B5720FC4@gmail.com>\n <CAFLS_9h+9RiagJVoPGxrzi4FFDjYK_eWUiHft5pSZL_eNFnYOw@mail.gmail.com>\n <535B831A-2071-44CC-A00B-F6E9972FCB29@gmail.com>\n <CAF7WS+oSLs_JFS6Pp0hS84yc4EoAiGDicnPjoGq_i1bpNZTq5A@mail.gmail.com>\n <CAHwHRrWmOge4y8sWANLxgbVkFiGo+veLrnU5AnX_ASD+wBo-BQ@mail.gmail.com>\n <7EA7789A-7372-4B33-B42C-8D17F099ED38@gmail.com>\n <CAHwHRrVZ2g6Krf3M3GeFwVJEn3+=ajpKVh07zh=2ip8tvSDdKA@mail.gmail.com>\n <5e62d2c2-cad5-c207-820a-37fca2fe169c@confluent.io>",
        "Reply-To": "dev@kafka.apache.org",
        "Return-Path": "<dev-return-106211-apmail-kafka-dev-archive=kafka.apache.org@kafka.apache.org>",
        "Subject": "Re: [VOTE] KIP-2232131Enhance",
        "To": "dev@kafka.apache.org",
        "X-Gm-Message-State": "APjAAAUsOia8xj0WHUPnM7wW/iEJnqUmUcOxiOqfgUXU/72sEt6FGtDK\n\tDpVRKumW/bYwkfaqcD4HwOMAiVyq",
        "X-Google-DKIM-Signature": "v=1; a=rsa-sha256; c=relaxed/relaxed;\n        d=1e100.net; s=20161025;\n        h=x-gm-message-state:from:content-transfer-encoding:mime-version\n         :subject:date:references:to:in-reply-to:message-id;\n        bh=iB9YyNok+thJWNNvcrLquI34ZWkery8etVRXFUbq7ss=;\n        b=ZOIuqVxmRBbbyGYwmpFi0hO+744GzyrOcgkw/lVspH5j8VQ39+D/lvqKoxe8i25gKt\n         9L0BlKul1FdLSS2dp2pMa56Ckb6zda6zh3PMLt4JDwpFh9bBAC4lOC8kdAVyRPB9vBRh\n         ZgBm4770qasBt+H3bLnRXA/50jul7ODNjnThVxz8Sa7RhoSy66frNX2OZIBCHS/KuBZV\n         BzCkzeOVIe4uHC/3fduwO1warymhHk//LfsdnSl+vHcAjhYlRJ4ibmdac/k+v9zHoLI5\n         AxSwwlxV/NmpPM8IcKiIey6Nc0RXtyZgfxhGGwpJqADf03tntdkSTnujUG30G666znTC\n         k3kg==",
        "X-Google-Smtp-Source": "APXvYqykpvv3zMZBhb/EPJEa2dzJ6QkLk+hID2+JcVPkC25kdshDlXNAQHEciYFBiCc1oq+YXSExHQ==",
        "X-Mailer": "Apple Mail (2.3445.104.11)",
        "X-Original-To": "apmail-kafka-dev-archive@www.apache.org",
        "X-Received": "by 2002:adf:ce07:: with SMTP id p7mr58409146wrn.129.1564642547220;\n        Wed, 31 Jul 2019 23:55:47 -0700 (PDT)",
        "X-Spam-Flag": "NO",
        "X-Spam-Level": "***",
        "X-Spam-Score": "3.359",
        "X-Spam-Status": "No, score=3.359 tagged_above=-999 required=6.31\n\ttests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,\n\tDKIM_VALID_EF=-0.1, RCVD_IN_DNSWL_NONE=-0.0001, RCVD_IN_SBL_CSS=3.558,\n\tSPF_HELO_NONE=0.001, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]\n\tautolearn=disabled",
        "X-Virus-Scanned": "Debian amavisd-new at spamd1-us-west.apache.org",
        "body": {
            "plain": "Thank you all!\n\nThe vote has been open for ~8 days. KIP has three binding votes (Bill, Guozhang, Matthias) and one non-binding (Sophie) so the KIP vote passes!\nI\u2019ll mark KIP as accepted and start working on it as soon as possible!\n\nRegards,\nLevani\n\n> On Aug 1, 2019, at 2:37 AM, Matthias J. Sax <matthias@confluent.io> wrote:\n> \n> +1 (binding)\n> \n> On 7/31/19 8:36 AM, Guozhang Wang wrote:\n>> Thanks for the update! +1 (binding).\n>> \n>> On Tue, Jul 30, 2019 at 11:42 PM Levani Kokhreidze <levani.codes@gmail.com>\n>> wrote:\n>> \n>>> Hello Guozhang,\n>>> \n>>> Thanks for the feedback. That\u2019s an interesting point. To be honest, I\n>>> totally missed it. I wasn\u2019t aware that there\u2019s `groupBy` possibility on\n>>> KTable.\n>>> I don\u2019t see any reasons why not to add same functionality to KTable\n>>> interface.\n>>> \n>>> I\u2019ve updated the KIP:\n>>> https://cwiki.apache.org/confluence/display/KAFKA/KIP-221%3A+Enhance+DSL+with+Connecting+Topic+Creation+and+Repartition+Hint\n>>> <\n>>> https://cwiki.apache.org/confluence/display/KAFKA/KIP-221:+Enhance+DSL+with+Connecting+Topic+Creation+and+Repartition+Hint\n>>>> \n>>> Please let me know if you have any other questions and/or concerns.\n>>> \n>>> Regards,\n>>> Levani\n>>> \n>>>> On Jul 31, 2019, at 1:24 AM, Guozhang Wang <wangguoz@gmail.com> wrote:\n>>>> \n>>>> Hello Levani,\n>>>> \n>>>> Thanks for the KIP! Just got a quick question here about the scope: why\n>>> do\n>>>> we only want this for `KStream`, not `KTable#groupBy` for example?\n>>>> \n>>>> \n>>>> Guozhang\n>>>> \n>>>> \n>>>> On Tue, Jul 30, 2019 at 1:27 PM Bill Bejeck <bbejeck@gmail.com> wrote:\n>>>> \n>>>>> Thanks for the KIP Levani.\n>>>>> \n>>>>> +1 (binding)\n>>>>> \n>>>>> -Bill\n>>>>> \n>>>>> On Tue, Jul 30, 2019 at 3:37 PM Levani Kokhreidze <\n>>> levani.codes@gmail.com>\n>>>>> wrote:\n>>>>> \n>>>>>> Hello,\n>>>>>> \n>>>>>> Still waiting for feedback on this KIP.\n>>>>>> Please let me know if you have any concerns and/or questions.\n>>>>>> \n>>>>>> Regards,\n>>>>>> Levani\n>>>>>> \n>>>>>> \n>>>>>>> On Jul 24, 2019, at 8:20 PM, Sophie Blee-Goldman <sophie@confluent.io\n>>>> \n>>>>>> wrote:\n>>>>>>> \n>>>>>>> Looks good! Thanks Levani,\n>>>>>>> \n>>>>>>> +1 (non-binding)\n>>>>>>> \n>>>>>>> Sophie\n>>>>>>> \n>>>>>>> On Tue, Jul 23, 2019 at 2:16 PM Levani Kokhreidze <\n>>>>>> levani.codes@gmail.com>\n>>>>>>> wrote:\n>>>>>>> \n>>>>>>>> Hello,\n>>>>>>>> \n>>>>>>>> I\u2019d like to initialize voting on KIP-221:\n>>>>>>>> \n>>>>>> \n>>>>> \n>>> https://cwiki.apache.org/confluence/display/KAFKA/KIP-221%3A+Enhance+KStream+with+Connecting+Topic+Creation+and+Repartition+Hint\n>>>>>>>> <\n>>>>>>>> \n>>>>>> \n>>>>> \n>>> https://cwiki.apache.org/confluence/display/KAFKA/KIP-221:+Enhance+KStream+with+Connecting+Topic+Creation+and+Repartition+Hint\n>>>>>>>>> \n>>>>>>>> If there\u2019re any more concerns about the KIP, happy to discuss\n>>> further.\n>>>>>>>> \n>>>>>>>> Regards,\n>>>>>>>> Levani\n>>>>>> \n>>>>>> \n>>>>> \n>>>> \n>>>> \n>>>> --\n>>>> -- Guozhang\n>>> \n>>> \n>> \n> \n\n"
        },
        "unixfrom": "dev-return-106211-apmail-kafka-dev-archive=kafka.apache.org@kafka.apache.org  Thu Aug  1 06:56:03 2019"
    },
    "origin": "nitish_box",
    "perceval_version": "0.14.0",
    "search_fields": {
        "item_id": "<F3C6ADC0-492D-422A-8A02-258361AD706C@gmail.com>"
    },
    "tag": "nitish_box",
    "timestamp": 1588015221.709632,
    "updated_on": 1564642545.0,
    "uuid": "d8bfe375a7d7472253333b018028bd8204ceced7"
},{
    "backend_name": "MBox",
    "backend_version": "0.13.0",
    "category": "message",
    "classified_fields_filtered": null,
    "data": {
        "Authentication-Results": "spamd1-us-west.apache.org (amavisd-new);\n\tdkim=pass (2048-bit key) header.d=gmail.com",
        "Content-Transfer-Encoding": "quoted-printable",
        "Content-Type": "text/plain;\n\tcharset=utf-8",
        "DKIM-Signature": "v=1; a=rsa-sha256; c=relaxed/relaxed;\n        d=gmail.com; s=20161025;\n        h=from:content-transfer-encoding:mime-version:subject:date:references\n         :to:in-reply-to:message-id;\n        bh=iB9YyNok+thJWNNvcrLquI34ZWkery8etVRXFUbq7ss=;\n        b=krWYDy+sD/Yh6XQMONHDPdJK5KMsd3mNQL6+uillKeZYEJqzbQtBjWZCR1mkunyaLp\n         giMD0TefQx0KVzlpkZxKNCSS0uhZB0cY2f9V5TzGGKWZOzFS5Tw+glKRlzF6F08b3anO\n         JBRlpFBO3girnT6uOeMlugNsxqMbweketcJcyN1BjC5OGCpg7wha5ZY6dnfBGwROSVWH\n         8syJIPs+k0PCpjWyMM8YMO+1PNXtEKge8FccvooxtLO9Rttzh3AUMpdO3uW4gURWOyjU\n         V0ST6+dg8qZYRUSx3r1Tzdr0Opl6nq6EEMUPkcJrwAMZn71PVMfaYjvgVdMBr77fmQ3E\n         67AQ==",
        "Date": "Thu, 1 Aug 2019 09:55:45 +0300",
        "Delivered-To": "mailing list dev@kafka.apache.org",
        "From": "Levani Kokhreidze <levani.codes@gmail.com>",
        "In-Reply-To": "<5e62d2c2-cad5-c207-820a-37fca2fe169c@confluent.io>",
        "List-Help": "<mailto:dev-help@kafka.apache.org>",
        "List-Id": "<dev.kafka.apache.org>",
        "List-Post": "<mailto:dev@kafka.apache.org>",
        "List-Unsubscribe": "<mailto:dev-unsubscribe@kafka.apache.org>",
        "Mailing-List": "contact dev-help@kafka.apache.org; run by ezmlm",
        "Message-ID": "<F3C6ADC0-492D-442A-8A02-258361AD706C@gmail.com>",
        "Mime-Version": "1.0 (Mac OS X Mail 12.4 \\(3445.104.11\\))",
        "Precedence": "bulk",
        "Received": "from [10.29.0.28] ([178.162.192.10])\n        by smtp.gmail.com with ESMTPSA id x83sm79438957wmb.42.2019.07.31.23.55.46\n        for <dev@kafka.apache.org>\n        (version=TLS1_2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);\n        Wed, 31 Jul 2019 23:55:46 -0700 (PDT)",
        "Received-SPF": "Pass (mailfrom) identity=mailfrom; client-ip=2a00:1450:4864:20::436; helo=mail-wr1-x436.google.com; envelope-from=levani.codes@gmail.com; receiver=<UNKNOWN> ",
        "References": "<258921E7-3756-433B-89EA-4708B5720FC4@gmail.com>\n <CAFLS_9h+9RiagJVoPGxrzi4FFDjYK_eWUiHft5pSZL_eNFnYOw@mail.gmail.com>\n <535B831A-2071-44CC-A00B-F6E9972FCB29@gmail.com>\n <CAF7WS+oSLs_JFS6Pp0hS84yc4EoAiGDicnPjoGq_i1bpNZTq5A@mail.gmail.com>\n <CAHwHRrWmOge4y8sWANLxgbVkFiGo+veLrnU5AnX_ASD+wBo-BQ@mail.gmail.com>\n <7EA7789A-7372-4B33-B42C-8D17F099ED38@gmail.com>\n <CAHwHRrVZ2g6Krf3M3GeFwVJEn3+=ajpKVh07zh=2ip8tvSDdKA@mail.gmail.com>\n <5e62d2c2-cad5-c207-820a-37fca2fe169c@confluent.io>",
        "Reply-To": "dev@kafka.apache.org",
        "Return-Path": "<dev-return-106211-apmail-kafka-dev-archive=kafka.apache.org@kafka.apache.org>",
        "Subject": "Re: [VOTE] KIP 22231Enhance",
        "To": "dev@kafka.apache.org",
        "X-Gm-Message-State": "APjAAAUsOia8xj0WHUPnM7wW/iEJnqUmUcOxiOqfgUXU/72sEt6FGtDK\n\tDpVRKumW/bYwkfaqcD4HwOMAiVyq",
        "X-Google-DKIM-Signature": "v=1; a=rsa-sha256; c=relaxed/relaxed;\n        d=1e100.net; s=20161025;\n        h=x-gm-message-state:from:content-transfer-encoding:mime-version\n         :subject:date:references:to:in-reply-to:message-id;\n        bh=iB9YyNok+thJWNNvcrLquI34ZWkery8etVRXFUbq7ss=;\n        b=ZOIuqVxmRBbbyGYwmpFi0hO+744GzyrOcgkw/lVspH5j8VQ39+D/lvqKoxe8i25gKt\n         9L0BlKul1FdLSS2dp2pMa56Ckb6zda6zh3PMLt4JDwpFh9bBAC4lOC8kdAVyRPB9vBRh\n         ZgBm4770qasBt+H3bLnRXA/50jul7ODNjnThVxz8Sa7RhoSy66frNX2OZIBCHS/KuBZV\n         BzCkzeOVIe4uHC/3fduwO1warymhHk//LfsdnSl+vHcAjhYlRJ4ibmdac/k+v9zHoLI5\n         AxSwwlxV/NmpPM8IcKiIey6Nc0RXtyZgfxhGGwpJqADf03tntdkSTnujUG30G666znTC\n         k3kg==",
        "X-Google-Smtp-Source": "APXvYqykpvv3zMZBhb/EPJEa2dzJ6QkLk+hID2+JcVPkC25kdshDlXNAQHEciYFBiCc1oq+YXSExHQ==",
        "X-Mailer": "Apple Mail (2.3445.104.11)",
        "X-Original-To": "apmail-kafka-dev-archive@www.apache.org",
        "X-Received": "by 2002:adf:ce07:: with SMTP id p7mr58409146wrn.129.1564642547220;\n        Wed, 31 Jul 2019 23:55:47 -0700 (PDT)",
        "X-Spam-Flag": "NO",
        "X-Spam-Level": "***",
        "X-Spam-Score": "3.359",
        "X-Spam-Status": "No, score=3.359 tagged_above=-999 required=6.31\n\ttests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,\n\tDKIM_VALID_EF=-0.1, RCVD_IN_DNSWL_NONE=-0.0001, RCVD_IN_SBL_CSS=3.558,\n\tSPF_HELO_NONE=0.001, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]\n\tautolearn=disabled",
        "X-Virus-Scanned": "Debian amavisd-new at spamd1-us-west.apache.org",
        "body": {
            "plain": "Thank you all!\n\nThe vote has been open for ~8 days. KIP has three binding votes (Bill, Guozhang, Matthias) and one non-binding (Sophie) so the KIP vote passes!\nI\u2019ll mark KIP as accepted and start working on it as soon as possible!\n\nRegards,\nLevani\n\n> On Aug 1, 2019, at 2:37 AM, Matthias J. Sax <matthias@confluent.io> wrote:\n> \n> +1 (binding)\n> \n> On 7/31/19 8:36 AM, Guozhang Wang wrote:\n>> Thanks for the update! +1 (binding).\n>> \n>> On Tue, Jul 30, 2019 at 11:42 PM Levani Kokhreidze <levani.codes@gmail.com>\n>> wrote:\n>> \n>>> Hello Guozhang,\n>>> \n>>> Thanks for the feedback. That\u2019s an interesting point. To be honest, I\n>>> totally missed it. I wasn\u2019t aware that there\u2019s `groupBy` possibility on\n>>> KTable.\n>>> I don\u2019t see any reasons why not to add same functionality to KTable\n>>> interface.\n>>> \n>>> I\u2019ve updated the KIP:\n>>> https://cwiki.apache.org/confluence/display/KAFKA/KIP-221%3A+Enhance+DSL+with+Connecting+Topic+Creation+and+Repartition+Hint\n>>> <\n>>> https://cwiki.apache.org/confluence/display/KAFKA/KIP-221:+Enhance+DSL+with+Connecting+Topic+Creation+and+Repartition+Hint\n>>>> \n>>> Please let me know if you have any other questions and/or concerns.\n>>> \n>>> Regards,\n>>> Levani\n>>> \n>>>> On Jul 31, 2019, at 1:24 AM, Guozhang Wang <wangguoz@gmail.com> wrote:\n>>>> \n>>>> Hello Levani,\n>>>> \n>>>> Thanks for the KIP! Just got a quick question here about the scope: why\n>>> do\n>>>> we only want this for `KStream`, not `KTable#groupBy` for example?\n>>>> \n>>>> \n>>>> Guozhang\n>>>> \n>>>> \n>>>> On Tue, Jul 30, 2019 at 1:27 PM Bill Bejeck <bbejeck@gmail.com> wrote:\n>>>> \n>>>>> Thanks for the KIP Levani.\n>>>>> \n>>>>> +1 (binding)\n>>>>> \n>>>>> -Bill\n>>>>> \n>>>>> On Tue, Jul 30, 2019 at 3:37 PM Levani Kokhreidze <\n>>> levani.codes@gmail.com>\n>>>>> wrote:\n>>>>> \n>>>>>> Hello,\n>>>>>> \n>>>>>> Still waiting for feedback on this KIP.\n>>>>>> Please let me know if you have any concerns and/or questions.\n>>>>>> \n>>>>>> Regards,\n>>>>>> Levani\n>>>>>> \n>>>>>> \n>>>>>>> On Jul 24, 2019, at 8:20 PM, Sophie Blee-Goldman <sophie@confluent.io\n>>>> \n>>>>>> wrote:\n>>>>>>> \n>>>>>>> Looks good! Thanks Levani,\n>>>>>>> \n>>>>>>> +1 (non-binding)\n>>>>>>> \n>>>>>>> Sophie\n>>>>>>> \n>>>>>>> On Tue, Jul 23, 2019 at 2:16 PM Levani Kokhreidze <\n>>>>>> levani.codes@gmail.com>\n>>>>>>> wrote:\n>>>>>>> \n>>>>>>>> Hello,\n>>>>>>>> \n>>>>>>>> I\u2019d like to initialize voting on KIP-221:\n>>>>>>>> \n>>>>>> \n>>>>> \n>>> https://cwiki.apache.org/confluence/display/KAFKA/KIP-221%3A+Enhance+KStream+with+Connecting+Topic+Creation+and+Repartition+Hint\n>>>>>>>> <\n>>>>>>>> \n>>>>>> \n>>>>> \n>>> https://cwiki.apache.org/confluence/display/KAFKA/KIP-221:+Enhance+KStream+with+Connecting+Topic+Creation+and+Repartition+Hint\n>>>>>>>>> \n>>>>>>>> If there\u2019re any more concerns about the KIP, happy to discuss\n>>> further.\n>>>>>>>> \n>>>>>>>> Regards,\n>>>>>>>> Levani\n>>>>>> \n>>>>>> \n>>>>> \n>>>> \n>>>> \n>>>> --\n>>>> -- Guozhang\n>>> \n>>> \n>> \n> \n\n"
        },
        "unixfrom": "dev-return-106211-apmail-kafka-dev-archive=kafka.apache.org@kafka.apache.org  Thu Aug  1 06:56:03 2019"
    },
    "origin": "nitish_box",
    "perceval_version": "0.14.0",
    "search_fields": {
        "item_id": "<F3C6ADC0-492D-442A-8A12-258361AD706C@gmail.com>"
    },
    "tag": "nitish_box",
    "timestamp": 1588015221.709632,
    "updated_on": 1564642545.0,
    "uuid": "d8bfe375a7d74722537444418028bd8204ceced7"
},{
    "backend_name": "MBox",
    "backend_version": "0.13.0",
    "category": "message",
    "classified_fields_filtered": null,
    "data": {
        "Authentication-Results": "spamd1-us-west.apache.org (amavisd-new);\n\tdkim=pass (2048-bit key) header.d=gmail.com",
        "Content-Transfer-Encoding": "quoted-printable",
        "Content-Type": "text/plain;\n\tcharset=utf-8",
        "DKIM-Signature": "v=1; a=rsa-sha256; c=relaxed/relaxed;\n        d=gmail.com; s=20161025;\n        h=from:content-transfer-encoding:mime-version:subject:date:references\n         :to:in-reply-to:message-id;\n        bh=iB9YyNok+thJWNNvcrLquI34ZWkery8etVRXFUbq7ss=;\n        b=krWYDy+sD/Yh6XQMONHDPdJK5KMsd3mNQL6+uillKeZYEJqzbQtBjWZCR1mkunyaLp\n         giMD0TefQx0KVzlpkZxKNCSS0uhZB0cY2f9V5TzGGKWZOzFS5Tw+glKRlzF6F08b3anO\n         JBRlpFBO3girnT6uOeMlugNsxqMbweketcJcyN1BjC5OGCpg7wha5ZY6dnfBGwROSVWH\n         8syJIPs+k0PCpjWyMM8YMO+1PNXtEKge8FccvooxtLO9Rttzh3AUMpdO3uW4gURWOyjU\n         V0ST6+dg8qZYRUSx3r1Tzdr0Opl6nq6EEMUPkcJrwAMZn71PVMfaYjvgVdMBr77fmQ3E\n         67AQ==",
        "Date": "Thu, 1 Aug 2019 09:55:45 +0300",
        "Delivered-To": "mailing list dev@kafka.apache.org",
        "From": "Levani Kokhreidze <levani.codes@gmail.com>",
        "In-Reply-To": "<5e62d2c2-cad5-c207-820a-37fca2fe169c@confluent.io>",
        "List-Help": "<mailto:dev-help@kafka.apache.org>",
        "List-Id": "<dev.kafka.apache.org>",
        "List-Post": "<mailto:dev@kafka.apache.org>",
        "List-Unsubscribe": "<mailto:dev-unsubscribe@kafka.apache.org>",
        "Mailing-List": "contact dev-help@kafka.apache.org; run by ezmlm",
        "Message-ID": "<F3C6ADC0-492D-442A-8A02-258361AD706C@gmail.com>",
        "Mime-Version": "1.0 (Mac OS X Mail 12.4 \\(3445.104.11\\))",
        "Precedence": "bulk",
        "Received": "from [10.29.0.28] ([178.162.192.10])\n        by smtp.gmail.com with ESMTPSA id x83sm79438957wmb.42.2019.07.31.23.55.46\n        for <dev@kafka.apache.org>\n        (version=TLS1_2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);\n        Wed, 31 Jul 2019 23:55:46 -0700 (PDT)",
        "Received-SPF": "Pass (mailfrom) identity=mailfrom; client-ip=2a00:1450:4864:20::436; helo=mail-wr1-x436.google.com; envelope-from=levani.codes@gmail.com; receiver=<UNKNOWN> ",
        "References": "<258921E7-3756-433B-89EA-4708B5720FC4@gmail.com>\n <CAFLS_9h+9RiagJVoPGxrzi4FFDjYK_eWUiHft5pSZL_eNFnYOw@mail.gmail.com>\n <535B831A-2071-44CC-A00B-F6E9972FCB29@gmail.com>\n <CAF7WS+oSLs_JFS6Pp0hS84yc4EoAiGDicnPjoGq_i1bpNZTq5A@mail.gmail.com>\n <CAHwHRrWmOge4y8sWANLxgbVkFiGo+veLrnU5AnX_ASD+wBo-BQ@mail.gmail.com>\n <7EA7789A-7372-4B33-B42C-8D17F099ED38@gmail.com>\n <CAHwHRrVZ2g6Krf3M3GeFwVJEn3+=ajpKVh07zh=2ip8tvSDdKA@mail.gmail.com>\n <5e62d2c2-cad5-c207-820a-37fca2fe169c@confluent.io>",
        "Reply-To": "dev@kafka.apache.org",
        "Return-Path": "<dev-return-106211-apmail-kafka-dev-archive=kafka.apache.org@kafka.apache.org>",
        "Subject": "Re: [VOTE] KIP:2242341Enhance",
        "To": "dev@kafka.apache.org",
        "X-Gm-Message-State": "APjAAAUsOia8xj0WHUPnM7wW/iEJnqUmUcOxiOqfgUXU/72sEt6FGtDK\n\tDpVRKumW/bYwkfaqcD4HwOMAiVyq",
        "X-Google-DKIM-Signature": "v=1; a=rsa-sha256; c=relaxed/relaxed;\n        d=1e100.net; s=20161025;\n        h=x-gm-message-state:from:content-transfer-encoding:mime-version\n         :subject:date:references:to:in-reply-to:message-id;\n        bh=iB9YyNok+thJWNNvcrLquI34ZWkery8etVRXFUbq7ss=;\n        b=ZOIuqVxmRBbbyGYwmpFi0hO+744GzyrOcgkw/lVspH5j8VQ39+D/lvqKoxe8i25gKt\n         9L0BlKul1FdLSS2dp2pMa56Ckb6zda6zh3PMLt4JDwpFh9bBAC4lOC8kdAVyRPB9vBRh\n         ZgBm4770qasBt+H3bLnRXA/50jul7ODNjnThVxz8Sa7RhoSy66frNX2OZIBCHS/KuBZV\n         BzCkzeOVIe4uHC/3fduwO1warymhHk//LfsdnSl+vHcAjhYlRJ4ibmdac/k+v9zHoLI5\n         AxSwwlxV/NmpPM8IcKiIey6Nc0RXtyZgfxhGGwpJqADf03tntdkSTnujUG30G666znTC\n         k3kg==",
        "X-Google-Smtp-Source": "APXvYqykpvv3zMZBhb/EPJEa2dzJ6QkLk+hID2+JcVPkC25kdshDlXNAQHEciYFBiCc1oq+YXSExHQ==",
        "X-Mailer": "Apple Mail (2.3445.104.11)",
        "X-Original-To": "apmail-kafka-dev-archive@www.apache.org",
        "X-Received": "by 2002:adf:ce07:: with SMTP id p7mr58409146wrn.129.1564642547220;\n        Wed, 31 Jul 2019 23:55:47 -0700 (PDT)",
        "X-Spam-Flag": "NO",
        "X-Spam-Level": "***",
        "X-Spam-Score": "3.359",
        "X-Spam-Status": "No, score=3.359 tagged_above=-999 required=6.31\n\ttests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,\n\tDKIM_VALID_EF=-0.1, RCVD_IN_DNSWL_NONE=-0.0001, RCVD_IN_SBL_CSS=3.558,\n\tSPF_HELO_NONE=0.001, SPF_PASS=-0.001, URIBL_BLOCKED=0.001]\n\tautolearn=disabled",
        "X-Virus-Scanned": "Debian amavisd-new at spamd1-us-west.apache.org",
        "body": {
            "plain": "Thank you all!\n\nThe vote has been open for ~8 days. KIP has three binding votes (Bill, Guozhang, Matthias) and one non-binding (Sophie) so the KIP vote passes!\nI\u2019ll mark KIP as accepted and start working on it as soon as possible!\n\nRegards,\nLevani\n\n> On Aug 1, 2019, at 2:37 AM, Matthias J. Sax <matthias@confluent.io> wrote:\n> \n> +1 (binding)\n> \n> On 7/31/19 8:36 AM, Guozhang Wang wrote:\n>> Thanks for the update! +1 (binding).\n>> \n>> On Tue, Jul 30, 2019 at 11:42 PM Levani Kokhreidze <levani.codes@gmail.com>\n>> wrote:\n>> \n>>> Hello Guozhang,\n>>> \n>>> Thanks for the feedback. That\u2019s an interesting point. To be honest, I\n>>> totally missed it. I wasn\u2019t aware that there\u2019s `groupBy` possibility on\n>>> KTable.\n>>> I don\u2019t see any reasons why not to add same functionality to KTable\n>>> interface.\n>>> \n>>> I\u2019ve updated the KIP:\n>>> https://cwiki.apache.org/confluence/display/KAFKA/KIP-221%3A+Enhance+DSL+with+Connecting+Topic+Creation+and+Repartition+Hint\n>>> <\n>>> https://cwiki.apache.org/confluence/display/KAFKA/KIP-221:+Enhance+DSL+with+Connecting+Topic+Creation+and+Repartition+Hint\n>>>> \n>>> Please let me know if you have any other questions and/or concerns.\n>>> \n>>> Regards,\n>>> Levani\n>>> \n>>>> On Jul 31, 2019, at 1:24 AM, Guozhang Wang <wangguoz@gmail.com> wrote:\n>>>> \n>>>> Hello Levani,\n>>>> \n>>>> Thanks for the KIP! Just got a quick question here about the scope: why\n>>> do\n>>>> we only want this for `KStream`, not `KTable#groupBy` for example?\n>>>> \n>>>> \n>>>> Guozhang\n>>>> \n>>>> \n>>>> On Tue, Jul 30, 2019 at 1:27 PM Bill Bejeck <bbejeck@gmail.com> wrote:\n>>>> \n>>>>> Thanks for the KIP Levani.\n>>>>> \n>>>>> +1 (binding)\n>>>>> \n>>>>> -Bill\n>>>>> \n>>>>> On Tue, Jul 30, 2019 at 3:37 PM Levani Kokhreidze <\n>>> levani.codes@gmail.com>\n>>>>> wrote:\n>>>>> \n>>>>>> Hello,\n>>>>>> \n>>>>>> Still waiting for feedback on this KIP.\n>>>>>> Please let me know if you have any concerns and/or questions.\n>>>>>> \n>>>>>> Regards,\n>>>>>> Levani\n>>>>>> \n>>>>>> \n>>>>>>> On Jul 24, 2019, at 8:20 PM, Sophie Blee-Goldman <sophie@confluent.io\n>>>> \n>>>>>> wrote:\n>>>>>>> \n>>>>>>> Looks good! Thanks Levani,\n>>>>>>> \n>>>>>>> +1 (non-binding)\n>>>>>>> \n>>>>>>> Sophie\n>>>>>>> \n>>>>>>> On Tue, Jul 23, 2019 at 2:16 PM Levani Kokhreidze <\n>>>>>> levani.codes@gmail.com>\n>>>>>>> wrote:\n>>>>>>> \n>>>>>>>> Hello,\n>>>>>>>> \n>>>>>>>> I\u2019d like to initialize voting on KIP-221:\n>>>>>>>> \n>>>>>> \n>>>>> \n>>> https://cwiki.apache.org/confluence/display/KAFKA/KIP-221%3A+Enhance+KStream+with+Connecting+Topic+Creation+and+Repartition+Hint\n>>>>>>>> <\n>>>>>>>> \n>>>>>> \n>>>>> \n>>> https://cwiki.apache.org/confluence/display/KAFKA/KIP-221:+Enhance+KStream+with+Connecting+Topic+Creation+and+Repartition+Hint\n>>>>>>>>> \n>>>>>>>> If there\u2019re any more concerns about the KIP, happy to discuss\n>>> further.\n>>>>>>>> \n>>>>>>>> Regards,\n>>>>>>>> Levani\n>>>>>> \n>>>>>> \n>>>>> \n>>>> \n>>>> \n>>>> --\n>>>> -- Guozhang\n>>> \n>>> \n>> \n> \n\n"
        },
        "unixfrom": "dev-return-106211-apmail-kafka-dev-archive=kafka.apache.org@kafka.apache.org  Thu Aug  1 06:56:03 2019"
    },
    "origin": "nitish_box",
    "perceval_version": "0.14.0",
    "search_fields": {
        "item_id": "<F3C6ADC0-492D-442A-8A22-258361AD706C@gmail.com>"
    },
    "tag": "nitish_box",
    "timestamp": 1588015221.709632,
    "updated_on": 1564642545.0,
    "uuid": "d8bfe375a7d747227654db018028bd8204ceced7"
},{
    "backend_name": "MBox",
    "backend_version": "0.13.0",
    "category": "message",
    "classified_fields_filtered": null,
    "data": {
        "Authentication-Results": "spamd4-us-west.apache.org (amavisd-new);\n\tdkim=pass (2048-bit key) header.d=confluent.io",
        "Content-Type": "multipart/alternative; boundary=\"000000000000e818fc058f12d74d\"",
        "DKIM-Signature": "v=1; a=rsa-sha256; c=relaxed/relaxed;\n        d=confluent.io; s=google;\n        h=mime-version:references:in-reply-to:from:date:message-id:subject:to;\n        bh=i2e9+M6/fgNmArsbxr4by4HQ87uL3bo6l3LD4hwM/o8=;\n        b=U2oc+MXtlQ2fXPZJAmZ06rC4F7KRQEqlfEWAu0YrXKbzxw8WzKgOe9z6zINE5wr0Hv\n         bCRhCQjy2DuxuYdQutCzlwx9SEucRL7wOSgYvUmGy4WXr/6+CUn3xAhGaFXX3UvevRN6\n         3uSjynr3abp6HuGdcbhyc4CjuGrHPi42+x9Gku4e0Va4S9G/MEZqnRdPCRplqJdxpiwM\n         U/MBqdEQirJNQLr86fqMAyFAmBYL24HwnGlI9hJAesq+NbJnhVFO+//MS17zi5irEVFk\n         ZQj1bE81nazPCK1GC6yEX4auyqpLgsdWE6q5TujyNP8iWs6YtOdn6S1ZRBvfss7F/rvz\n         p9xQ==",
        "Date": "Thu, 1 Aug 2019 11:59:26 -0700",
        "Delivered-To": "mailing list dev@kafka.apache.org",
        "From": "Jun Rao <jun@confluent.io>",
        "In-Reply-To": "<ab513ff6-c97a-4110-9472-72a67e67e3ae@www.fastmail.com>",
        "List-Help": "<mailto:dev-help@kafka.apache.org>",
        "List-Id": "<dev.kafka.apache.org>",
        "List-Post": "<mailto:dev@kafka.apache.org>",
        "List-Unsubscribe": "<mailto:dev-unsubscribe@kafka.apache.org>",
        "MIME-Version": "1.0",
        "Mailing-List": "contact dev-help@kafka.apache.org; run by ezmlm",
        "Message-ID": "<CAFc58G92ngQrnQg7Xz78o6MjS2spQ-JH9DaE_DoxN1R3s4CBeg@mail.gmail.com>",
        "Precedence": "bulk",
        "Received": "by mail-qt1-x842.google.com with SMTP id z4so71423566qtc.3\n        for <dev@kafka.apache.org>; Thu, 01 Aug 2019 11:59:44 -0700 (PDT)",
        "Received-SPF": "Pass (mailfrom) identity=mailfrom; client-ip=2607:f8b0:4864:20::842; helo=mail-qt1-x842.google.com; envelope-from=jun@confluent.io; receiver=<UNKNOWN> ",
        "References": "<24f4660e-ac91-4b9d-b81a-6f69d019d145@www.fastmail.com>\n <CAA9QSJJW4zkEFkzzq8-kumjRT0bd-vRFzzTB2deY_7FZdPGsGw@mail.gmail.com>\n <CAJDuW=D=7FfGHJYyLgCDJy3iNYJoUyYF9QWW_Dqch19J7Y=4AQ@mail.gmail.com>\n <499647c5-806f-46a6-b12f-5349cf1d6082@www.fastmail.com> <9624dce8-0e16-428c-90fc-90da707e2737@www.fastmail.com>\n <1867601726.578961.1557875742921@mail.yahoo.com> <cec5257e-3ef5-47df-982f-26c1e184d453@www.fastmail.com>\n <1714711084.3309489.1558484144620@mail.yahoo.com> <36f90f94-9322-474f-b2c0-877c6b0a7d4d@www.fastmail.com>\n <CANZZNGwhaM2-NBKmhC1gZi1mUdF_7ZMDM7KtAi9kE-4xkeqX=w@mail.gmail.com>\n <909fbcfb-b440-4b8d-a58e-4056bb8b439b@www.fastmail.com> <CAJDuW=AsZ+SMQtwqNYx-0jNMFFD87TPuPa_bZeotGxvdnWvp4g@mail.gmail.com>\n <CAA9QSJKM9m0Kcif094YojQPJT0-+LQtit+_Q_LCcqT3U_38-Zg@mail.gmail.com>\n <37071079.2113589.1563497289422@mail.yahoo.com> <CAO4VHgTDPiDMRvOAnG-hM6jRTvD9W9ki4ktJ_Xk2pTUFQH3XbQ@mail.gmail.com>\n <e6022b55-87a7-4211-9e2a-7531fd79a4a7@www.fastmail.com> <CAFc58G90YV=YhKqOhXSeYDCgvy599mWmvNLhznD-9etHRBueZg@mail.gmail.com>\n <CANZZNGwL-QqQawBaG7maMRdt09_P2jzef3vfPZ0NFde3oEZbag@mail.gmail.com>\n <CAFc58G8VLUv1SbTt4EO2H-JhVKx2q9wiZb_Y_p9gVdhBwNaTrA@mail.gmail.com> <ab513ff6-c97a-4110-9472-72a67e67e3ae@www.fastmail.com>",
        "Reply-To": "dev@kafka.apache.org",
        "Return-Path": "<dev-return-106224-apmail-kafka-dev-archive=kafka.apache.org@kafka.apache.org>",
        "Subject": "Re: [VOTE] KIP-455: Create an Administrative API for Replica Reassignment",
        "To": "dev <dev@kafka.apache.org>",
        "X-Gm-Message-State": "APjAAAWHtUxyAduv4jjFe5kqU+QBZpI3rVpjJk5uoYYos0dUQWxvckpH\n\t5FdsmYcNfwtDajoixDNzCm1VZnGBbHe+CSBajcCLMgH8",
        "X-Google-DKIM-Signature": "v=1; a=rsa-sha256; c=relaxed/relaxed;\n        d=1e100.net; s=20161025;\n        h=x-gm-message-state:mime-version:references:in-reply-to:from:date\n         :message-id:subject:to;\n        bh=i2e9+M6/fgNmArsbxr4by4HQ87uL3bo6l3LD4hwM/o8=;\n        b=P2IsSWXOsDQGMdEUJ2vvPN5O7ZTZc9v/h4A6nMLlWj2hegqiW6EjrF1SulOCV3CLru\n         mEQg+uJf/6TH/R681srdA2q0vA7CHdAUuL101JJA4dRuZlCCeBWiggd3qhPUXqLu4vgD\n         IbEGs7+2Dc51d9zfTmRqLcKXrgOj7lYK0YfxPZhCb21VWjW4v4dAMLlnDRtil/iLp3Zz\n         nyziQukZyeZnY3f1O1I/ebasN/CtSbjx8zOWaRKeL3Uj7w3RhdT0zb1yMGcszIohjK/E\n         lqG1d68yo4otmFPVuIxjFwkl7pfKwzthrZaUdM5y285DU2mwEg5cPfPjWKiJkKm+I0sD\n         8LQA==",
        "X-Google-Smtp-Source": "APXvYqzyHTYTCFe1ckrb57diTGBUM/VntDXLIjvVKukzTDnmW6OOjaDtTATV0tVADI8YGURy7zK4Vzb5jEj8FAMeeHg=",
        "X-Original-To": "apmail-kafka-dev-archive@www.apache.org",
        "X-Received": "by 2002:ac8:252e:: with SMTP id 43mr91623748qtm.61.1564685978041;\n Thu, 01 Aug 2019 11:59:38 -0700 (PDT)",
        "X-Spam-Flag": "NO",
        "X-Spam-Level": "****",
        "X-Spam-Score": "4.801",
        "X-Spam-Status": "No, score=4.801 tagged_above=-999 required=6.31\n\ttests=[DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1,\n\tDKIM_VALID_EF=-0.1, HTML_MESSAGE=2, KAM_TIME=3,\n\tRCVD_IN_DNSWL_NONE=-0.0001, SPF_HELO_NONE=0.001, SPF_PASS=-0.001,\n\tURIBL_BLOCKED=0.001] autolearn=disabled",
        "X-Virus-Scanned": "Debian amavisd-new at spamd4-us-west.apache.org",
        "body": {
            "plain": "Hi, Colin,\n+1 for me\n10. Sounds good.\n\n13. Our current convention is to bump up the version of ZK value if there\nis any format change. For example, we have bumped up the version of the\nvalue in /brokers/ids/nnn multiple times and all of those changes are\ncompatible (just adding new fields). This has the slight benefit that it\nmakes it clear there is a format change. Rolling upgrades and downgrades\ncan still be supported with the version bump. For example, if you downgrade\nfrom a compatible change, you can leave the new format in ZK and the old\ncode will only pick up fields relevant to the old version. Upgrade will be\ncontrolled by inter broker protocol.\n\nThanks,\n\nJun\n\nOn Wed, Jul 31, 2019 at 1:22 PM Colin McCabe <cmccabe@apache.org> wrote:\n\n> Hi Jun,\n>\n> Thanks for taking another look at this.\n>\n> On Wed, Jul 31, 2019, at 09:22, Jun Rao wrote:\n> > Hi, Stan,\n> >\n> > Thanks for the explanation.\n> >\n> > 10. If those new fields in LeaderAndIsr are only needed for future work,\n> > perhaps they should be added when we do the future work instead of now?\n>\n> I think this ties in with one of the big goals of this KIP, making it\n> possible to distinguish reassigning replicas from normal replicas.  This is\n> the key to follow-on work like being able to ensure that partitions with a\n> reassignment don't get falsely flagged as under-replicated in the metrics,\n> or implementing reassignment quotas that don't accidentally affect normal\n> replication traffic when a replica falls out of the ISR.\n>\n> For these follow-on improvements, we need to have that information in\n> LeaderAndIsrRequest.  We could add the information in a follow-on KIP, of\n> course, but then all the improvements are blocked on that follow-on KIP.\n> That would slow things down for all of the downstream KIPs that are blocked\n> on this.\n>\n> Also, to keep things consistent, I think it would be best if the format of\n> the data in the LeaderAndIsrRequest matched the format of the data in\n> ZooKeeper.  Since we're deciding on the ZK format in this KIP, I think it\n> makes sense to also decide on the format in the LeaderAndIsrRequest.\n>\n> > > > Should we include those two fields in UpdateMetadata and potentially\n> > > > Metadata requests too?\n>\n> We had some discussion earlier about how metadata responses to clients are\n> getting too large, in part because they include a lot of information that\n> most clients don't need (such as the ISR).  I think reassignment\n> information definitely falls in the category of something a client doesn't\n> need to know, so we shouldn't include it.\n>\n> A program like CruiseControl, or the command-line reassignment program,\n> just wants to get the most up-to-date information about the state of\n> reassigning partitions.  The MetadataRequest API wouldn't deliver that,\n> because there are inherently delays in how we propagate metadata to\n> brokers.  That's why the ListPartitionReassignments API is a better choice\n> for those programs.  So I think if we added this information to the\n> MetadataResponse, nobody would actually use it, and it would just use up\n> more bandwidth.\n>\n> Of course, we can always revisit this later if we find a scenario where a\n> producer or consumer would actually care about this.  But I think we should\n> default to not adding stuff to the metadata response if we don't have a\n> good use case in mind.\n>\n> > > > 11. \"If a new reassignment is issued during an on-going one, we\n> cancel the\n> > > > current one by emptying out both AR and RR, constructing them from\n> (the\n> > > > updated from the last-reassignment) R and TR, and starting anew.\" In\n> this\n> > > > case, it seems that the controller needs to issue a StopReplica\n> request to\n> > > > remove those unneeded replicas.\n>\n> Good catch.  Yes, we should document this in the  KIP.\n>\n> > > > 12. \"Essentially, once a cancellation is called we subtract AR from\n> R,\n> > > > empty out both AR and RR, and send LeaderAndIsr requests to cancel\n> the\n> > > > replica movements that have not yet completed.\" Similar to the\n> above, it\n> > > > seems the controller needs to issue a StopReplica request to remove\n> those\n> > > > unneeded replicas.\n>\n> Right.  Let's add this.\n>\n> > > > 13. Since we changed the format of the topics/[topic] zNode, should\n> we bump\n> > > > up the version number in the json value?\n>\n> The change to the zNode is backwards compatible, though.  Older brokers\n> will continue to work, but just ignore the new fields.  If we bump that\n> version number, then downgrades will require hand-editing zookeeper.  (Of\n> course downgrade isn't officially supported, but it would be nice not to\n> break it if we don't need to...)  Changing the version number would also\n> create problems during a rolling upgrade.\n>\n> best,\n> Colin\n>\n> > > >\n> > > > Jun\n> > > >\n> > > > On Mon, Jul 22, 2019 at 8:38 AM Colin McCabe <cmccabe@apache.org>\n> wrote:\n> > > >\n> > > > > Hi all,\n> > > > >\n> > > > > With three non-binding +1 votes from Viktor Somogyi-Vass, Robert\n> > > Barrett,\n> > > > > and George Li, and 3 binding +1 votes from Gwen Shapira, Jason\n> > > Gustafson,\n> > > > > and myself, the vote passes.  Thanks, everyone!\n> > > > >\n> > > > > best,\n> > > > > Colin\n> > > > >\n> > > > > On Fri, Jul 19, 2019, at 08:55, Robert Barrett wrote:\n> > > > > > +1 (non-binding). Thanks for the KIP!\n> > > > > >\n> > > > > > On Thu, Jul 18, 2019 at 5:59 PM George Li <\n> sql_consulting@yahoo.com\n> > > > > .invalid>\n> > > > > > wrote:\n> > > > > >\n> > > > > > >  +1 (non-binding)\n> > > > > > >\n> > > > > > >\n> > > > > > >\n> > > > > > > Thanks for addressing the comments.\n> > > > > > > George\n> > > > > > >\n> > > > > > >     On Thursday, July 18, 2019, 05:03:58 PM PDT, Gwen Shapira <\n> > > > > > > gwen@confluent.io> wrote:\n> > > > > > >\n> > > > > > >  Renewing my +1, thank you Colin and Stan for working through\n> all\n> > > the\n> > > > > > > questions, edge cases, requests and alternatives. We ended up\n> with\n> > > a\n> > > > > > > great protocol.\n> > > > > > >\n> > > > > > > On Thu, Jul 18, 2019 at 4:54 PM Jason Gustafson <\n> > > jason@confluent.io>\n> > > > > > > wrote:\n> > > > > > > >\n> > > > > > > > +1 Thanks for the KIP. Really looking forward to this!\n> > > > > > > >\n> > > > > > > > -Jason\n> > > > > > > >\n> > > > > > > > On Wed, Jul 17, 2019 at 1:41 PM Colin McCabe <\n> cmccabe@apache.org\n> > > >\n> > > > > wrote:\n> > > > > > > >\n> > > > > > > > > Thanks, Stanislav.  Let's restart the vote to reflect the\n> fact\n> > > > that\n> > > > > > > we've\n> > > > > > > > > made significant changes.  The new vote will go for 3 days\n> as\n> > > > > usual.\n> > > > > > > > >\n> > > > > > > > > I'll start with my +1 (binding).\n> > > > > > > > >\n> > > > > > > > > best,\n> > > > > > > > > Colin\n> > > > > > > > >\n> > > > > > > > >\n> > > > > > > > > On Wed, Jul 17, 2019, at 08:56, Stanislav Kozlovski wrote:\n> > > > > > > > > > Hey everybody,\n> > > > > > > > > >\n> > > > > > > > > > We have further iterated on the KIP in the accompanying\n> > > > > discussion\n> > > > > > > thread\n> > > > > > > > > > and I'd like to propose we resume the vote.\n> > > > > > > > > >\n> > > > > > > > > > Some notable changes:\n> > > > > > > > > > - we will store reassignment information in the\n> > > > > > > `/brokers/topics/[topic]`\n> > > > > > > > > > - we will internally use two collections to represent a\n> > > > > reassignment\n> > > > > > > -\n> > > > > > > > > > \"addingReplicas\" and \"removingReplicas\". LeaderAndIsr has\n> > > been\n> > > > > > > updated\n> > > > > > > > > > accordingly\n> > > > > > > > > > - the Alter API will still use the \"targetReplicas\"\n> > > collection,\n> > > > > but\n> > > > > > > the\n> > > > > > > > > > List API will now return three separate collections - the\n> > > full\n> > > > > > > replica\n> > > > > > > > > set,\n> > > > > > > > > > the replicas we are adding as part of this reassignment\n> > > > > > > > > (\"addingReplicas\")\n> > > > > > > > > > and the replicas we are removing (\"removingReplicas\")\n> > > > > > > > > > - cancellation of a reassignment now means a proper\n> rollback\n> > > of\n> > > > > the\n> > > > > > > > > > assignment to its original state prior to the API call\n> > > > > > > > > >\n> > > > > > > > > > As always, you can re-read the KIP here\n> > > > > > > > > >\n> > > > > > > > >\n> > > > > > >\n> > > > >\n> > > >\n> > >\n> https://cwiki.apache.org/confluence/display/KAFKA/KIP-455%3A+Create+an+Administrative+API+for+Replica+Reassignment\n> > > > > > > > > >\n> > > > > > > > > > Best,\n> > > > > > > > > > Stanislav\n> > > > > > > > > >\n> > > > > > > > > > On Wed, May 22, 2019 at 6:12 PM Colin McCabe <\n> > > > cmccabe@apache.org\n> > > > > >\n> > > > > > > wrote:\n> > > > > > > > > >\n> > > > > > > > > > > Hi George,\n> > > > > > > > > > >\n> > > > > > > > > > > Thanks for taking a look.  I am working on getting a PR\n> > > done\n> > > > > as a\n> > > > > > > > > > > proof-of-concept.  I'll post it soon.  Then we'll\n> finish up\n> > > > the\n> > > > > > > vote.\n> > > > > > > > > > >\n> > > > > > > > > > > best,\n> > > > > > > > > > > Colin\n> > > > > > > > > > >\n> > > > > > > > > > > On Tue, May 21, 2019, at 17:33, George Li wrote:\n> > > > > > > > > > > >  Hi Colin,\n> > > > > > > > > > > >\n> > > > > > > > > > > >  Great! Looking forward to these features.    +1\n> > > > > (non-binding)\n> > > > > > > > > > > >\n> > > > > > > > > > > > What is the estimated timeline to have this\n> implemented?\n> > > > If\n> > > > > any\n> > > > > > > help\n> > > > > > > > > > > > is needed in the implementation of cancelling\n> > > > > reassignments,  I\n> > > > > > > can\n> > > > > > > > > > > > help if there is spare cycle.\n> > > > > > > > > > > >\n> > > > > > > > > > > >\n> > > > > > > > > > > > Thanks,\n> > > > > > > > > > > > George\n> > > > > > > > > > > >\n> > > > > > > > > > > >\n> > > > > > > > > > > >\n> > > > > > > > > > > >    On Thursday, May 16, 2019, 9:48:56 AM PDT, Colin\n> > > McCabe\n> > > > > > > > > > > > <cmccabe@apache.org> wrote:\n> > > > > > > > > > > >\n> > > > > > > > > > > >  Hi George,\n> > > > > > > > > > > >\n> > > > > > > > > > > > Yes, KIP-455 allows the reassignment of individual\n> > > > > partitions to\n> > > > > > > be\n> > > > > > > > > > > > cancelled.  I think it's very important for these\n> > > > operations\n> > > > > to\n> > > > > > > be at\n> > > > > > > > > > > > the partition level.\n> > > > > > > > > > > >\n> > > > > > > > > > > > best,\n> > > > > > > > > > > > Colin\n> > > > > > > > > > > >\n> > > > > > > > > > > > On Tue, May 14, 2019, at 16:34, George Li wrote:\n> > > > > > > > > > > > >  Hi Colin,\n> > > > > > > > > > > > >\n> > > > > > > > > > > > > Thanks for the updated KIP.  It has very good\n> > > > improvements\n> > > > > of\n> > > > > > > Kafka\n> > > > > > > > > > > > > reassignment operations.\n> > > > > > > > > > > > >\n> > > > > > > > > > > > > One question, looks like the KIP includes the\n> > > > Cancellation\n> > > > > of\n> > > > > > > > > > > > > individual pending reassignments as well when the\n> > > > > > > > > > > > > AlterPartitionReasisgnmentRequest has empty\n> replicas\n> > > for\n> > > > > the\n> > > > > > > > > > > > > topic/partition. Will you also be implementing the\n> the\n> > > > > > > partition\n> > > > > > > > > > > > > cancellation/rollback in the PR ?    If yes,  it\n> will\n> > > > make\n> > > > > > > KIP-236\n> > > > > > > > > (it\n> > > > > > > > > > > > > has PR already) trivial, since the cancel all\n> pending\n> > > > > > > > > reassignments,\n> > > > > > > > > > > > > one just needs to do a\n> ListPartitionRessignmentRequest,\n> > > > > then\n> > > > > > > submit\n> > > > > > > > > > > > > empty replicas for all those topic/partitions in\n> > > > > > > > > > > > > one AlterPartitionReasisgnmentRequest.\n> > > > > > > > > > > > >\n> > > > > > > > > > > > >\n> > > > > > > > > > > > > Thanks,\n> > > > > > > > > > > > > George\n> > > > > > > > > > > > >\n> > > > > > > > > > > > >    On Friday, May 10, 2019, 8:44:31 PM PDT, Colin\n> > > McCabe\n> > > > > > > > > > > > > <cmccabe@apache.org> wrote:\n> > > > > > > > > > > > >\n> > > > > > > > > > > > >  On Fri, May 10, 2019, at 17:34, Colin McCabe\n> wrote:\n> > > > > > > > > > > > > > On Fri, May 10, 2019, at 16:43, Jason Gustafson\n> > > wrote:\n> > > > > > > > > > > > > > > Hi Colin,\n> > > > > > > > > > > > > > >\n> > > > > > > > > > > > > > > I think storing reassignment state at the\n> partition\n> > > > > level\n> > > > > > > is\n> > > > > > > > > the\n> > > > > > > > > > > right move\n> > > > > > > > > > > > > > > and I also agree that replicas should\n> understand\n> > > that\n> > > > > > > there is\n> > > > > > > > > a\n> > > > > > > > > > > > > > > reassignment in progress. This makes KIP-352 a\n> > > > trivial\n> > > > > > > > > follow-up\n> > > > > > > > > > > for\n> > > > > > > > > > > > > > > example. The only doubt I have is whether the\n> > > leader\n> > > > > and\n> > > > > > > isr\n> > > > > > > > > znode\n> > > > > > > > > > > is the\n> > > > > > > > > > > > > > > right place to store the target reassignment.\n> It\n> > > is a\n> > > > > bit\n> > > > > > > odd\n> > > > > > > > > to\n> > > > > > > > > > > keep the\n> > > > > > > > > > > > > > > target assignment in a separate place from the\n> > > > current\n> > > > > > > > > assignment,\n> > > > > > > > > > > right? I\n> > > > > > > > > > > > > > > assume the thinking is probably that although\n> the\n> > > > > current\n> > > > > > > > > > > assignment should\n> > > > > > > > > > > > > > > probably be in the leader and isr znode as\n> well, it\n> > > > is\n> > > > > > > hard to\n> > > > > > > > > > > move the\n> > > > > > > > > > > > > > > state in a compatible way. Is that right? But\n> if we\n> > > > > have no\n> > > > > > > > > plan\n> > > > > > > > > > > to remove\n> > > > > > > > > > > > > > > the assignment znode, do you see a downside to\n> > > > storing\n> > > > > the\n> > > > > > > > > target\n> > > > > > > > > > > > > > > assignment there as well?\n> > > > > > > > > > > > > > >\n> > > > > > > > > > > > > >\n> > > > > > > > > > > > > > Hi Jason,\n> > > > > > > > > > > > > >\n> > > > > > > > > > > > > > That's a good point -- it's probably better to\n> keep\n> > > the\n> > > > > > > target\n> > > > > > > > > > > > > > assignment in the same znode as the current\n> > > assignment,\n> > > > > for\n> > > > > > > > > > > > > > consistency.  I'll change the KIP.\n> > > > > > > > > > > > >\n> > > > > > > > > > > > > Hi Jason,\n> > > > > > > > > > > > >\n> > > > > > > > > > > > > Thanks again for the review.\n> > > > > > > > > > > > >\n> > > > > > > > > > > > > I took another look at this, and I think we should\n> > > stick\n> > > > > with\n> > > > > > > the\n> > > > > > > > > > > > > initial proposal of putting the reassignment state\n> into\n> > > > > > > > > > > > >\n> /brokers/topics/[topic]/partitions/[partitionId]/state.\n> > > > > The\n> > > > > > > > > reason is\n> > > > > > > > > > > > > because we'll want to bump the leader epoch for the\n> > > > > partition\n> > > > > > > when\n> > > > > > > > > > > > > changing the reassignment state, and the leader\n> epoch\n> > > > > resides\n> > > > > > > in\n> > > > > > > > > that\n> > > > > > > > > > > > > znode anyway.  I agree there is some inconsistency\n> > > here,\n> > > > > but\n> > > > > > > so be\n> > > > > > > > > it:\n> > > > > > > > > > > > > if we were to greenfield these zookeeper data\n> > > structures,\n> > > > > we\n> > > > > > > might\n> > > > > > > > > do\n> > > > > > > > > > > > > it differently, but the proposed scheme will work\n> fine\n> > > > and\n> > > > > be\n> > > > > > > > > > > > > extensible for the future.\n> > > > > > > > > > > > >\n> > > > > > > > > > > > > >\n> > > > > > > > > > > > > > > A few additional questions:\n> > > > > > > > > > > > > > >\n> > > > > > > > > > > > > > > 1. Should `alterPartitionReassignments` be\n> > > > > > > > > > > `alterPartitionAssignments`?\n> > > > > > > > > > > > > > > It's the current assignment we're altering,\n> right?\n> > > > > > > > > > > > > >\n> > > > > > > > > > > > > > That's fair.  AlterPartitionAssigments reads a\n> little\n> > > > > > > better, and\n> > > > > > > > > > > I'll\n> > > > > > > > > > > > > > change it to that.\n> > > > > > > > > > > > >\n> > > > > > > > > > > > > +1.  I've changed the RPC and API name in the wiki.\n> > > > > > > > > > > > >\n> > > > > > > > > > > > > >\n> > > > > > > > > > > > > > > 2. Does this change affect the Metadata API? In\n> > > other\n> > > > > > > words,\n> > > > > > > > > are\n> > > > > > > > > > > clients\n> > > > > > > > > > > > > > > aware of reassignments? If so, then we probably\n> > > need\n> > > > a\n> > > > > > > change\n> > > > > > > > > to\n> > > > > > > > > > > > > > > UpdateMetadata as well. The only alternative I\n> can\n> > > > > think of\n> > > > > > > > > would\n> > > > > > > > > > > be to\n> > > > > > > > > > > > > > > represent the replica set in the Metadata\n> request\n> > > as\n> > > > > the\n> > > > > > > union\n> > > > > > > > > of\n> > > > > > > > > > > the\n> > > > > > > > > > > > > > > current and target replicas, but I can't think\n> of\n> > > any\n> > > > > > > benefit\n> > > > > > > > > to\n> > > > > > > > > > > hiding\n> > > > > > > > > > > > > > > reassignments. Note that if we did this, we\n> > > probably\n> > > > > > > wouldn't\n> > > > > > > > > need\n> > > > > > > > > > > a\n> > > > > > > > > > > > > > > separate API to list reassignments.\n> > > > > > > > > > > > > >\n> > > > > > > > > > > > > > I thought about this a bit... and I think on\n> balance,\n> > > > > you're\n> > > > > > > > > right.\n> > > > > > > > > > > We\n> > > > > > > > > > > > > > should keep this information together with the\n> > > replica\n> > > > > > > nodes, isr\n> > > > > > > > > > > > > > nodes, and offline replicas, and that\n> information is\n> > > > > > > available in\n> > > > > > > > > > > the\n> > > > > > > > > > > > > > MetadataResponse.\n> > > > > > > > > > > > > >  However, I do think in order to do this, we'll\n> need\n> > > a\n> > > > > flag\n> > > > > > > in\n> > > > > > > > > the\n> > > > > > > > > > > > > > MetadataRequest that specifiies \"only show me\n> > > > reassigning\n> > > > > > > > > > > partitions\".\n> > > > > > > > > > > > > > I'll add this.\n> > > > > > > > > > > > >\n> > > > > > > > > > > > > I revisited this, and I think we should stick with\n> the\n> > > > > original\n> > > > > > > > > > > > > proposal of having a separate\n> > > ListPartitionReassignments\n> > > > > API.\n> > > > > > > > > There\n> > > > > > > > > > > > > really is no use case where the Producer or\n> Consumer\n> > > > needs\n> > > > > to\n> > > > > > > know\n> > > > > > > > > > > > > about a reassignment.  They should just be notified\n> > > when\n> > > > > the\n> > > > > > > set of\n> > > > > > > > > > > > > partitions changes, which doesn't require changes\n> to\n> > > > > > > > > > > > > MetadataRequest/Response.  The Admin client only\n> cares\n> > > if\n> > > > > > > someone\n> > > > > > > > > is\n> > > > > > > > > > > > > managing the reassignment.  So adding this state\n> to the\n> > > > > > > > > > > > > MetadataResponse adds overhead for no real\n> benefit.  In\n> > > > the\n> > > > > > > common\n> > > > > > > > > > > case\n> > > > > > > > > > > > > where there is no ongoing reassignment, it would\n> be 4\n> > > > > bytes per\n> > > > > > > > > > > > > partition of extra overhead in the\n> MetadataResponse.\n> > > > > > > > > > > > >\n> > > > > > > > > > > > > In general, I think we have a problem of\n> oversharing in\n> > > > the\n> > > > > > > > > > > > > MetadataRequest/Response.  As we 10x or 100x the\n> number\n> > > > of\n> > > > > > > > > partitions\n> > > > > > > > > > > > > we support, we'll need to get stricter about giving\n> > > > clients\n> > > > > > > only\n> > > > > > > > > the\n> > > > > > > > > > > > > information they actually need, about the\n> partitions\n> > > they\n> > > > > > > actually\n> > > > > > > > > > > care\n> > > > > > > > > > > > > about.  Reassignment state clearly falls in the\n> > > category\n> > > > of\n> > > > > > > state\n> > > > > > > > > that\n> > > > > > > > > > > > > isn't needed by clients (except very specialized\n> > > > > rebalancing\n> > > > > > > > > programs).\n> > > > > > > > > > > > >\n> > > > > > > > > > > > > Another important consideration here is that\n> someone\n> > > > > managing\n> > > > > > > an\n> > > > > > > > > > > > > ongoing reassignment wants the most up-to-date\n> > > > information,\n> > > > > > > which\n> > > > > > > > > is\n> > > > > > > > > > > to\n> > > > > > > > > > > > > be found on the controller.  Therefore adding this\n> > > state\n> > > > to\n> > > > > > > > > listTopics\n> > > > > > > > > > > > > or describeTopics, which could contact any node in\n> the\n> > > > > > > cluster, is\n> > > > > > > > > > > > > sub-optimal.\n> > > > > > > > > > > > >\n> > > > > > > > > > > > > Finally, adding this to listTopics or\n> describeTopics\n> > > > feels\n> > > > > > > like a\n> > > > > > > > > > > warty\n> > > > > > > > > > > > > API.  It's an extra boolean which interacts with\n> other\n> > > > > extra\n> > > > > > > > > booleans\n> > > > > > > > > > > > > like \"show internal\", etc. in weird ways.  I think\n> a\n> > > > > separate\n> > > > > > > API\n> > > > > > > > > is\n> > > > > > > > > > > > > cleaner.\n> > > > > > > > > > > > >\n> > > > > > > > > > > > > >\n> > > > > > > > > > > > > > > 3. As replicas come into sync, they will join\n> the\n> > > > ISR.\n> > > > > > > Will we\n> > > > > > > > > > > await all\n> > > > > > > > > > > > > > > target replicas joining the ISR before taking\n> the\n> > > > > replica\n> > > > > > > out\n> > > > > > > > > of\n> > > > > > > > > > > the target\n> > > > > > > > > > > > > > > replicas set? Also, I assume that target\n> replicas\n> > > can\n> > > > > > > still be\n> > > > > > > > > > > elected as\n> > > > > > > > > > > > > > > leader?\n> > > > > > > > > > > > > >\n> > > > > > > > > > > > > > We'll take a replica out of the target replicas\n> set\n> > > as\n> > > > > soon\n> > > > > > > as\n> > > > > > > > > that\n> > > > > > > > > > > > > > replica is in the ISR.  Let me clarify this in\n> the\n> > > KIP.\n> > > > > > > > > > > > > >\n> > > > > > > > > > > > > > > 4. Probably useful to mention permissions for\n> the\n> > > new\n> > > > > APIs.\n> > > > > > > > > > > > > >\n> > > > > > > > > > > > > > Good point.  I think alterPartitionAssignments\n> should\n> > > > > require\n> > > > > > > > > ALTER\n> > > > > > > > > > > on\n> > > > > > > > > > > > > > CLUSTER.  MetadataRequest permissions will be\n> > > > unchanged.\n> > > > > > > > > > > > >\n> > > > > > > > > > > > > I added permission information.\n> > > > > > > > > > > > >\n> > > > > > > > > > > > > best,\n> > > > > > > > > > > > > Colin\n> > > > > > > > > > > > >\n> > > > > > > > > > > > > >\n> > > > > > > > > > > > > > best,\n> > > > > > > > > > > > > > Colin\n> > > > > > > > > > > > > >\n> > > > > > > > > > > > > > >\n> > > > > > > > > > > > > > > Thanks,\n> > > > > > > > > > > > > > > Jason\n> > > > > > > > > > > > > > >\n> > > > > > > > > > > > > > > On Fri, May 10, 2019 at 9:30 AM Gwen Shapira <\n> > > > > > > > > gwen@confluent.io>\n> > > > > > > > > > > wrote:\n> > > > > > > > > > > > > > >\n> > > > > > > > > > > > > > > > +1 (binding)\n> > > > > > > > > > > > > > > > Looks great, and will be awesome to have\n> this new\n> > > > > > > capability.\n> > > > > > > > > > > > > > > >\n> > > > > > > > > > > > > > > > On Wed, May 8, 2019 at 10:23 PM Colin McCabe\n> <\n> > > > > > > > > cmccabe@apache.org>\n> > > > > > > > > > > wrote:\n> > > > > > > > > > > > > > > >\n> > > > > > > > > > > > > > > > > Hi all,\n> > > > > > > > > > > > > > > > >\n> > > > > > > > > > > > > > > > > I'd like to start the vote for KIP-455:\n> Create\n> > > an\n> > > > > > > > > > > Administrative API for\n> > > > > > > > > > > > > > > > > Replica Reassignment.  I think this KIP is\n> > > > > important\n> > > > > > > since\n> > > > > > > > > it\n> > > > > > > > > > > will unlock\n> > > > > > > > > > > > > > > > > many follow-on improvements to Kafka\n> > > reassignment\n> > > > > (see\n> > > > > > > the\n> > > > > > > > > > > \"Future work\"\n> > > > > > > > > > > > > > > > > section, plus a lot of the other\n> discussions\n> > > > we've\n> > > > > had\n> > > > > > > > > > > recently about\n> > > > > > > > > > > > > > > > > reassignment).  It also furthers the\n> important\n> > > > > KIP-4\n> > > > > > > goal\n> > > > > > > > > of\n> > > > > > > > > > > removing\n> > > > > > > > > > > > > > > > > direct access to ZK.\n> > > > > > > > > > > > > > > > >\n> > > > > > > > > > > > > > > > > I made a few changes based on the\n> discussion in\n> > > > the\n> > > > > > > > > [DISCUSS]\n> > > > > > > > > > > thread.  As\n> > > > > > > > > > > > > > > > > Robert suggested, I removed the need to\n> > > > explicitly\n> > > > > > > cancel a\n> > > > > > > > > > > reassignment\n> > > > > > > > > > > > > > > > > for a partition before setting up a\n> different\n> > > > > > > reassignment\n> > > > > > > > > for\n> > > > > > > > > > > that\n> > > > > > > > > > > > > > > > > specific partition.  I also simplified the\n> API\n> > > a\n> > > > > bit by\n> > > > > > > > > adding\n> > > > > > > > > > > a\n> > > > > > > > > > > > > > > > > PartitionReassignment class which is used\n> by\n> > > both\n> > > > > the\n> > > > > > > alter\n> > > > > > > > > > > and list\n> > > > > > > > > > > > > > > > APIs.\n> > > > > > > > > > > > > > > > >\n> > > > > > > > > > > > > > > > > I modified the proposal so that we now\n> > > deprecate\n> > > > > the\n> > > > > > > old\n> > > > > > > > > > > znode-based API\n> > > > > > > > > > > > > > > > > rather than removing it completely.  That\n> > > should\n> > > > > give\n> > > > > > > > > external\n> > > > > > > > > > > > > > > > rebalancing\n> > > > > > > > > > > > > > > > > tools some time to transition to the new\n> API.\n> > > > > > > > > > > > > > > > >\n> > > > > > > > > > > > > > > > > To clarify a question Viktor asked, I\n> added a\n> > > > note\n> > > > > > > that the\n> > > > > > > > > > > > > > > > > kafka-reassign-partitions.sh will now use a\n> > > > > > > > > --bootstrap-server\n> > > > > > > > > > > argument\n> > > > > > > > > > > > > > > > to\n> > > > > > > > > > > > > > > > > contact the admin APIs.\n> > > > > > > > > > > > > > > > >\n> > > > > > > > > > > > > > > > > thanks,\n> > > > > > > > > > > > > > > > > Colin\n> > > > > > > > > > > > > > > > >\n> > > > > > > > > > > > > > > >\n> > > > > > > > > > > > > > > >\n> > > > > > > > > > > > > > > > --\n> > > > > > > > > > > > > > > > *Gwen Shapira*\n> > > > > > > > > > > > > > > > Product Manager | Confluent\n> > > > > > > > > > > > > > > > 650.450.2760 | @gwenshap\n> > > > > > > > > > > > > > > > Follow us: Twitter <\n> > > > https://twitter.com/ConfluentInc>\n> > > > > |\n> > > > > > > blog\n> > > > > > > > > > > > > > > > <http://www.confluent.io/blog>\n> > > > > > > > > > > > > > > >\n> > > > > > > > > > > > > > >\n> > > > > > > > > > > > > >\n> > > > > > > > > > > > >\n> > > > > > > > > > >\n> > > > > > > > > >\n> > > > > > > > >\n> > > > > > >\n> > > > > > >\n> > > > > > >\n> > > > > > > --\n> > > > > > > Gwen Shapira\n> > > > > > > Product Manager | Confluent\n> > > > > > > 650.450.2760 | @gwenshap\n> > > > > > > Follow us: Twitter | blog\n> > > > > > >\n> > > > > >\n> > > > >\n> > > >\n> > >\n> >\n>\n"
        },
        "unixfrom": "dev-return-106224-apmail-kafka-dev-archive=kafka.apache.org@kafka.apache.org  Thu Aug  1 18:59:56 2019"
    },
    "origin": "nitish_box",
    "perceval_version": "0.14.0",
    "search_fields": {
        "item_id": "<CAFc58G92ngQrnQg7Xa78o6MjS2spQ-JH9DaE_DoxN1R3s4CBeg@mail.gmail.com>"
    },
    "tag": "nitish_box",
    "timestamp": 1588015221.7502,
    "updated_on": 1564685966.0,
    "uuid": "6176aee62a08f2e4d8b987619a6950c9f7d88f48"
}]